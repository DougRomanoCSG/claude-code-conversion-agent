{
  "formName": "frmRiverAreaSearch",
  "formType": "Search",
  "relatedForms": [
    {
      "formName": "frmRiverAreaDetail",
      "formType": "DetailEdit",
      "relationship": "ChildForm"
    }
  ],
  "primaryWorkflows": [
    {
      "name": "SearchAndEdit",
      "description": "User searches for river areas and edits one",
      "steps": [
        {
          "step": 1,
          "action": "EnterSearchCriteria",
          "controls": [
            "txtName",
            "chkPricingZonesOnly",
            "chkActiveOnly",
            "chkPortalAreasOnly",
            "cboCustomerID",
            "chkHighWaterAreasOnly"
          ],
          "description": "User enters partial river area name and filter criteria"
        },
        {
          "step": 2,
          "action": "ClickSearch",
          "button": "btnFind",
          "method": "btnFind_Click",
          "result": "RefreshList(True) called - results displayed in grdSearch",
          "businessLogic": "Lists.RiverAreaSearch.GetList"
        },
        {
          "step": 3,
          "action": "SelectRow",
          "control": "grdSearch",
          "trigger": "Grid row selection",
          "description": "User selects a river area from search results"
        },
        {
          "step": 4,
          "action": "EditRiverArea",
          "navigation": "Opens frmRiverAreaDetail via main form toolbar",
          "method": "ItemModify",
          "businessLogic": "RiverArea.GetRiverArea(GridControlIndex)",
          "mode": "Edit"
        }
      ]
    },
    {
      "name": "CreateNewRiverArea",
      "description": "User creates a new river area",
      "steps": [
        {
          "step": 1,
          "action": "ClickNew",
          "method": "ItemAdd",
          "navigation": "Opens frmRiverAreaDetail",
          "businessLogic": "RiverArea.NewRiverArea"
        },
        {
          "step": 2,
          "action": "EnterRiverAreaDetails",
          "controls": [
            "txtName",
            "chkIsPriceZone",
            "chkIsPortalArea",
            "chkIsHighWaterArea",
            "cboCustomerID",
            "chkIsFuelTaxArea",
            "chkIsLiquidRateArea",
            "chkIsActive"
          ],
          "description": "User enters river area name and configuration flags"
        },
        {
          "step": 3,
          "action": "AddRiverSegments",
          "description": "User adds river segments to the river area",
          "subWorkflow": "ManageRiverSegments"
        },
        {
          "step": 4,
          "action": "ClickSubmit",
          "button": "btnSubmit",
          "method": "SubmitNoRefreshClick",
          "validation": "ValidatorExtender validates required fields",
          "businessLogic": "RiverArea.ApplyEdit and Save",
          "result": "Form closes, search form refreshed"
        }
      ]
    },
    {
      "name": "ManageRiverSegments",
      "description": "User manages river segments within a river area",
      "steps": [
        {
          "step": 1,
          "action": "AddSegment",
          "button": "tbmList Add",
          "method": "ItemAdd",
          "businessLogic": "RiverAreaSegments.NewRiverAreaSegment",
          "result": "Detail section enabled, focus set to cboRiver"
        },
        {
          "step": 2,
          "action": "EnterSegmentDetails",
          "controls": [
            "cboRiver",
            "txtStartMile",
            "txtEndMile"
          ],
          "validation": "Decimal validation on mile fields"
        },
        {
          "step": 3,
          "action": "ClickSet",
          "button": "btnSet",
          "method": "SetClickListAndDetail",
          "businessLogic": "RiverAreaSegment.ApplyEdit, added to collection",
          "result": "Segment added to grdList, detail section cleared and disabled"
        }
      ]
    },
    {
      "name": "DeleteRiverArea",
      "description": "User deletes a river area from search results",
      "steps": [
        {
          "step": 1,
          "action": "SelectRow",
          "control": "grdSearch",
          "description": "User selects river area to delete"
        },
        {
          "step": 2,
          "action": "ClickDelete",
          "method": "ItemRemove",
          "confirmation": "Main.ItemRemoveDialog('River Area')",
          "result": "Confirmation dialog displayed"
        },
        {
          "step": 3,
          "action": "ConfirmDelete",
          "businessLogic": "RiverArea.DeleteRiverArea(GridControlIndex)",
          "result": "RefreshList(False) called - grid refreshed without selecting first row"
        }
      ]
    },
    {
      "name": "EditRiverSegment",
      "description": "User modifies existing river segment",
      "steps": [
        {
          "step": 1,
          "action": "SelectSegment",
          "control": "grdList",
          "trigger": "Row selection or double-click"
        },
        {
          "step": 2,
          "action": "ClickModify",
          "button": "tbmList Modify",
          "method": "ItemModify",
          "result": "Segment loaded into detail section, controls enabled, focus to cboRiver"
        },
        {
          "step": 3,
          "action": "ModifySegmentDetails",
          "controls": [
            "cboRiver",
            "txtStartMile",
            "txtEndMile"
          ]
        },
        {
          "step": 4,
          "action": "ClickSet",
          "button": "btnSet",
          "method": "SetClickListAndDetail",
          "result": "Changes applied, grid refreshed"
        }
      ]
    },
    {
      "name": "CancelSegmentEdit",
      "description": "User cancels editing a river segment",
      "steps": [
        {
          "step": 1,
          "action": "ClickCancelEdit",
          "button": "btnCancelEdit",
          "method": "CancelClickListAndDetail",
          "businessLogic": "RiverAreaSegment.CancelEdit",
          "result": "Detail section cleared and disabled, grid refreshed"
        }
      ]
    },
    {
      "name": "DeleteRiverSegment",
      "description": "User removes a river segment from the river area",
      "steps": [
        {
          "step": 1,
          "action": "SelectSegment",
          "control": "grdList"
        },
        {
          "step": 2,
          "action": "ClickRemove",
          "button": "tbmList Remove",
          "method": "ItemRemove",
          "confirmation": "Main.ItemRemoveDialog('River Segment')"
        },
        {
          "step": 3,
          "action": "ConfirmDelete",
          "businessLogic": "RiverArea.RiverAreaSegments.Remove",
          "result": "RefreshList(False) - grid refreshed"
        }
      ]
    },
    {
      "name": "ResetSearchCriteria",
      "description": "User clears all search filters",
      "steps": [
        {
          "step": 1,
          "action": "ClickReset",
          "button": "btnReset",
          "method": "ResetFields",
          "result": "txtName cleared, chkActiveOnly checked, all other filters unchecked, focus to txtName"
        }
      ]
    },
    {
      "name": "ExportSegmentList",
      "description": "User exports river segments to external file",
      "steps": [
        {
          "step": 1,
          "action": "ClickExport",
          "button": "tbmList Export",
          "method": "Main.ExportGrid",
          "enabled": "At least one row exists and not editing child",
          "result": "Export dialog displayed"
        }
      ]
    }
  ],
  "formStates": [
    {
      "state": "Initial",
      "description": "Search form first loaded",
      "gridState": "Empty",
      "enabledButtons": [
        "btnFind",
        "btnReset"
      ],
      "disabledButtons": [
        "Edit",
        "Delete"
      ],
      "defaultFocus": "txtName",
      "defaultValues": {
        "chkActiveOnly": true
      }
    },
    {
      "state": "ResultsDisplayed",
      "description": "Search results shown in grid",
      "gridState": "Populated",
      "enabledButtons": [
        "btnFind",
        "btnReset",
        "New"
      ],
      "conditionalButtons": {
        "Edit": "Row selected",
        "Delete": "Row selected"
      }
    },
    {
      "state": "DetailFormOpen_New",
      "description": "New river area detail form opened",
      "form": "frmRiverAreaDetail",
      "businessObject": "New RiverArea instance",
      "editMode": "BeginEdit called",
      "enabledControls": [
        "pnlDetail",
        "btnSubmit",
        "chkIsActive"
      ],
      "disabledControls": [
        "grpEditDetail"
      ],
      "segmentGridState": "Empty",
      "toolbarState": "Add enabled, Modify/Remove disabled"
    },
    {
      "state": "DetailFormOpen_Edit",
      "description": "Existing river area detail form opened",
      "form": "frmRiverAreaDetail",
      "businessObject": "Existing RiverArea loaded via GetRiverArea",
      "editMode": "BeginEdit called",
      "enabledControls": [
        "pnlDetail",
        "btnSubmit",
        "chkIsActive"
      ],
      "disabledControls": [
        "grpEditDetail"
      ],
      "segmentGridState": "Populated with existing segments",
      "toolbarState": "Add enabled, Modify/Remove enabled if row selected"
    },
    {
      "state": "EditingSegment",
      "description": "User is adding or modifying a river segment",
      "isEditingChild": true,
      "enabledControls": [
        "grpEditDetail",
        "btnSet",
        "btnCancelEdit"
      ],
      "disabledControls": [
        "pnlDetail",
        "btnSubmit",
        "chkIsActive",
        "tbmList"
      ],
      "focusedControl": "cboRiver"
    },
    {
      "state": "HighWaterAreaEnabled",
      "description": "High Water Area checkbox checked",
      "trigger": "chkIsHighWaterArea.CheckedChanged",
      "conditionalVisibility": {
        "lblCustomerID": "Visible if GlobalSettingList.EnableRiverSegmentHighWaterModel",
        "cboCustomerID": "Enabled when chkIsHighWaterArea checked, populated with CustomerList"
      }
    },
    {
      "state": "ConditionalLicenseFeatures",
      "description": "Controls shown based on license configuration",
      "conditionalVisibility": {
        "chkIsPortalArea": "Visible if LicenseList(Portal).Active",
        "chkPortalAreasOnly": "Visible if LicenseList(Portal).Active",
        "chkIsLiquidRateArea": "Visible if LicenseList(UnitTow).Active",
        "chkIsHighWaterArea": "Visible if GlobalSettingList.EnableRiverSegmentHighWaterModel",
        "cboCustomerID": "Visible if GlobalSettingList.EnableRiverSegmentHighWaterModel",
        "chkHighWaterAreasOnly": "Visible if GlobalSettingList.EnableRiverSegmentHighWaterModel"
      }
    }
  ],
  "navigationPatterns": [
    {
      "from": "frmRiverAreaSearch",
      "to": "frmRiverAreaDetail",
      "trigger": "ItemAdd (New button from main form toolbar)",
      "method": "ItemAdd",
      "dataPassedId": null,
      "businessObject": "RiverArea.NewRiverArea",
      "showDialogParent": "pnlSearch.Parent"
    },
    {
      "from": "frmRiverAreaSearch",
      "to": "frmRiverAreaDetail",
      "trigger": "ItemModify (Edit button from main form toolbar)",
      "method": "ItemModify",
      "dataPassedId": "GridControlIndex (selected RiverAreaID)",
      "businessObject": "RiverArea.GetRiverArea(GridControlIndex)",
      "showDialogParent": "pnlSearch.Parent"
    },
    {
      "from": "frmRiverAreaDetail",
      "to": "frmRiverAreaSearch",
      "trigger": "btnSubmit click or btnCancel click",
      "method": "SubmitNoRefreshClick or CancelClick",
      "result": "Form closes via DialogResult.OK or DialogResult.Cancel"
    }
  ],
  "stateTransitions": [
    {
      "from": "Initial",
      "to": "ResultsDisplayed",
      "trigger": "btnFind_Click",
      "method": "RefreshList(True)",
      "action": "Grid populated with search results, first row selected"
    },
    {
      "from": "ResultsDisplayed",
      "to": "Initial",
      "trigger": "btnReset_Click",
      "method": "ResetFields",
      "action": "Search criteria cleared, grid remains populated"
    },
    {
      "from": "DetailFormOpen",
      "to": "EditingSegment",
      "trigger": "Add or Modify segment button clicked",
      "method": "ItemAdd or ItemModify",
      "action": "EnableDisableControls(True), detail section enabled, main controls disabled"
    },
    {
      "from": "EditingSegment",
      "to": "DetailFormOpen",
      "trigger": "btnSet or btnCancelEdit clicked",
      "method": "SetClickListAndDetail or CancelClickListAndDetail",
      "action": "EnableDisableControls(False), controls cleared, grid refreshed"
    },
    {
      "from": "DetailFormOpen",
      "to": "Closed",
      "trigger": "btnSubmit clicked",
      "method": "SubmitNoRefreshClick",
      "validation": "ValidatorExtender validates all fields",
      "businessLogic": "ClearUnusedFields, ApplyEdit, Save",
      "action": "Form closes with DialogResult.OK"
    },
    {
      "from": "DetailFormOpen",
      "to": "Closed",
      "trigger": "btnCancel clicked",
      "method": "CancelClick",
      "businessLogic": "ClearUnusedFields, CancelEdit",
      "action": "Form closes with DialogResult.Cancel"
    }
  ],
  "eventHandlerChains": [
    {
      "event": "pnlSearch.HandleCreated",
      "description": "Panel initialized when re-parented into main form",
      "callChain": [
        "FormatControls",
        "InfragisticsHelper.FormatInfragisticsControls",
        "PopulateListCombo for cboCustomerID if GlobalSetting enabled",
        "AddToInitialColumnSortOrder"
      ]
    },
    {
      "event": "pnlSearch.HandleDestroyed",
      "description": "Panel destroyed when closed",
      "callChain": [
        "MyAppSettingHelper.SaveGrid - saves grid layout/settings"
      ]
    },
    {
      "event": "frmRiverAreaDetail.Load",
      "description": "Detail form loaded",
      "callChain": [
        "FormatControls",
        "FormatAndLoadRiverArea",
        "SetValidatorExtenderForRiverArea",
        "SetMaxLengthsForRiverArea",
        "LoadControlsForRiverArea",
        "EnableDisableControls(False)",
        "RefreshList(True)"
      ]
    },
    {
      "event": "btnFind.Click",
      "description": "Search button clicked",
      "callChain": [
        "RefreshList(True)",
        "RefreshListBase",
        "Lists.RiverAreaSearch.GetList",
        "Grid populated with results"
      ]
    },
    {
      "event": "btnSubmit.Click",
      "description": "Submit button on detail form",
      "callChain": [
        "SubmitNoRefreshClick (override)",
        "ClearUnusedFields",
        "Base.SubmitNoRefreshClick",
        "BusinessObject.IsValid",
        "BusinessObject.ApplyEdit",
        "BusinessObject.Save",
        "Form.Close"
      ]
    },
    {
      "event": "btnCancel.Click",
      "description": "Cancel button on detail form",
      "callChain": [
        "CancelClick (override)",
        "ClearUnusedFields",
        "Base.CancelClick",
        "BusinessObject.CancelEdit",
        "Form.Close"
      ]
    },
    {
      "event": "tbmList.ToolClick (Add)",
      "description": "Add segment toolbar button",
      "callChain": [
        "Me.Validate",
        "ItemAdd",
        "RiverAreaSegments.NewRiverAreaSegment",
        "BeginEdit",
        "FormatAndLoadRiverAreaSegment",
        "EnableDisableControls(True)",
        "cboRiver.Focus"
      ]
    },
    {
      "event": "tbmList.ToolClick (Modify)",
      "description": "Modify segment toolbar button",
      "callChain": [
        "Me.Validate",
        "ItemModify",
        "Get selected RiverAreaSegment from grid",
        "BeginEdit",
        "FormatAndLoadRiverAreaSegment",
        "EnableDisableControls(True)",
        "cboRiver.Focus"
      ]
    },
    {
      "event": "tbmList.ToolClick (Remove)",
      "description": "Remove segment toolbar button",
      "callChain": [
        "Me.Validate",
        "ItemRemove",
        "Main.ItemRemoveDialog",
        "RiverArea.RiverAreaSegments.Remove",
        "RefreshList(False)"
      ]
    },
    {
      "event": "btnSet.Click",
      "description": "Set button for segment detail",
      "callChain": [
        "SetClickListAndDetail",
        "Base.SetClickListAndDetail",
        "RiverAreaSegment.ApplyEdit",
        "Add to collection if new",
        "ClearControls",
        "EnableDisableControls(False)",
        "RefreshList(False)"
      ]
    },
    {
      "event": "btnCancelEdit.Click",
      "description": "Cancel edit button for segment detail",
      "callChain": [
        "CancelClickListAndDetail",
        "Base.CancelClickListAndDetail",
        "RiverAreaSegment.CancelEdit",
        "ClearControls",
        "EnableDisableControls(False)",
        "RefreshList(False)"
      ]
    },
    {
      "event": "chkIsHighWaterArea.CheckedChanged",
      "description": "High water area checkbox state changed",
      "callChain": [
        "Set RiverArea.IsHighWaterArea property",
        "SetState(cboCustomerID, Enabled/Disabled based on checkbox)"
      ]
    },
    {
      "event": "Control.Validated events",
      "description": "Various field validated events update business object",
      "controls": [
        "txtName.Validated → RiverArea.Name",
        "chkIsActive.Validated → RiverArea.IsActive",
        "chkIsPriceZone.Validated → RiverArea.IsPriceZone",
        "chkIsPortalArea.Validated → RiverArea.IsPortalArea",
        "cboCustomerID.Validated → RiverArea.CustomerID",
        "chkIsFuelTaxArea.CheckedChanged → RiverArea.IsFuelTaxArea",
        "chkIsLiquidRateArea.CheckedChanged → RiverArea.IsLiquidRateArea",
        "cboRiver.Validated → RiverAreaSegment.River",
        "txtStartMile.Validated → RiverAreaSegment.StartMile",
        "txtEndMile.Validated → RiverAreaSegment.EndMile"
      ]
    }
  ],
  "formLifecycleMethods": [
    {
      "method": "Initialize",
      "interface": "IBaseSearch",
      "description": "Called by main form to initialize the search panel",
      "actions": [
        "InitializeBase(SubSystem.frmRiverAreaSearch)",
        "Sets ControlAuthorization",
        "Calls SetButtonTypes and SetFunctionalAreas"
      ]
    },
    {
      "method": "Initialize (Detail)",
      "interface": "IBaseDetailEdit",
      "description": "Called when detail form is opened",
      "parameters": "BusinessLogicBase (RiverArea)",
      "actions": [
        "Sets _RiverArea reference",
        "Calls BeginEdit on business object",
        "Sets form title based on IsNew",
        "InitializeBase(businessObject, SubSystem)"
      ]
    },
    {
      "method": "FocusFirstField",
      "interface": "IBaseSearch",
      "description": "Called by main form when panel is loaded",
      "actions": [
        "txtName.Focus()"
      ]
    },
    {
      "method": "RefreshList",
      "interface": "IBaseSearch",
      "description": "Called to refresh search results grid",
      "parameters": "selectFirstRow As Boolean",
      "actions": [
        "RefreshListBase with RiverAreaSearch.GetList",
        "Applies filters: name, active only, pricing zones, portal areas, customer, high water areas"
      ]
    },
    {
      "method": "FormatControls",
      "description": "One-time control initialization",
      "actions": [
        "FormatInfragisticsControls",
        "Set GridControlUniqueIdentifierCol",
        "Set conditional visibility based on licenses",
        "Populate combo boxes",
        "Set initial sort order"
      ]
    },
    {
      "method": "EnableDisableControls",
      "description": "Toggles between edit and view mode for child segments",
      "parameters": "isEditing As Boolean",
      "actions": [
        "Enable/disable grpEditDetail and pnlDetail",
        "Enable/disable toolbar",
        "Set IsEditingChild property",
        "Call SetToolState"
      ]
    },
    {
      "method": "ClearUnusedFields",
      "description": "Clears dependent fields when parent checkbox unchecked",
      "actions": [
        "If not IsHighWaterArea, clear CustomerID"
      ]
    }
  ],
  "statePersistencePatterns": [
    {
      "pattern": "GridSettings",
      "description": "Grid layout and settings saved/restored per user",
      "saveEvent": "pnlSearch.HandleDestroyed",
      "saveMechanism": "MyAppSettingHelper.SaveGrid",
      "restoreMechanism": "Automatic grid layout restoration on load"
    },
    {
      "pattern": "BusinessObjectEditing",
      "description": "CSLA BeginEdit/ApplyEdit/CancelEdit pattern",
      "businessObjects": [
        "RiverArea",
        "RiverAreaSegment"
      ],
      "lifecycle": [
        "BeginEdit called when form opened or item selected",
        "ApplyEdit called when Set/Submit clicked",
        "CancelEdit called when Cancel clicked",
        "Save called after successful ApplyEdit on parent object"
      ]
    },
    {
      "pattern": "InMemoryChildCollection",
      "description": "Child segments managed in-memory before parent save",
      "collection": "RiverArea.RiverAreaSegments",
      "operations": [
        "Add: Segments added to collection after SetClickListAndDetail",
        "Modify: Existing segments modified in collection",
        "Remove: Segments removed from collection",
        "All persisted when parent RiverArea.Save called"
      ]
    },
    {
      "pattern": "SearchCriteria",
      "description": "Search filters maintained across searches",
      "criteria": [
        "txtName",
        "chkActiveOnly",
        "chkPricingZonesOnly",
        "chkPortalAreasOnly",
        "cboCustomerID",
        "chkHighWaterAreasOnly"
      ],
      "resetBehavior": "ResetFields clears name, unchecks filters except ActiveOnly, refocuses txtName"
    },
    {
      "pattern": "SelectedRowPersistence",
      "description": "Grid remembers selected row after refresh",
      "mechanism": "GridControlUniqueIdentifierCol = 'RiverAreaID'",
      "behavior": "RefreshListBase reselects same ID after refresh"
    }
  ],
  "modalDialogPatterns": [
    {
      "dialogType": "Detail Form",
      "form": "frmRiverAreaDetail",
      "showMethod": "ShowDialog(pnlSearch.Parent)",
      "modalBehavior": "Blocks parent until closed",
      "closeMethod": "DialogResult.OK or DialogResult.Cancel",
      "returnValue": "DialogResult enumeration",
      "refreshOnClose": "Search form refreshed by main form based on DialogResult"
    },
    {
      "dialogType": "Confirmation",
      "usage": "Delete confirmation",
      "method": "Main.ItemRemoveDialog",
      "parameters": "Entity name string",
      "returnValue": "DialogResult.Yes or DialogResult.No",
      "actionOnYes": "Delete operation proceeds",
      "actionOnNo": "Operation cancelled"
    },
    {
      "dialogType": "Export",
      "method": "Main.ExportGrid",
      "parameters": "grdList, staStatus, form title",
      "description": "Exports grid data to external format"
    }
  ],
  "refreshUpdateTriggers": [
    {
      "trigger": "ItemAdd completion",
      "description": "New river area added",
      "refreshSource": "Main form (external)",
      "refreshTarget": "Search grid",
      "selectFirstRow": false
    },
    {
      "trigger": "ItemModify completion",
      "description": "River area edited",
      "refreshSource": "Main form (external)",
      "refreshTarget": "Search grid",
      "selectFirstRow": false
    },
    {
      "trigger": "ItemRemove completion",
      "description": "River area deleted",
      "method": "RefreshList(False)",
      "refreshTarget": "Search grid",
      "selectFirstRow": false
    },
    {
      "trigger": "btnFind.Click",
      "description": "Manual search",
      "method": "RefreshList(True)",
      "refreshTarget": "Search grid",
      "selectFirstRow": true
    },
    {
      "trigger": "Segment Add/Modify/Remove",
      "description": "River segment changed",
      "method": "RefreshList(False)",
      "refreshTarget": "Segment grid (grdList)",
      "selectFirstRow": false,
      "scope": "In-memory collection only, not persisted until Submit"
    }
  ],
  "validationPatterns": [
    {
      "validator": "ValidatorExtender",
      "displayControl": "staStatus",
      "fields": [
        {
          "control": "txtName",
          "validationType": "String",
          "maxLength": "RiverArea.MaxLength.Name",
          "required": false
        },
        {
          "control": "txtStartMile",
          "validationType": "Decimal",
          "required": false
        },
        {
          "control": "txtEndMile",
          "validationType": "Decimal",
          "required": false
        }
      ]
    },
    {
      "validator": "Business Object Validation",
      "method": "IsValid",
      "timing": "Called before ApplyEdit in SubmitNoRefreshClick",
      "errorHandling": "Validation errors displayed in status bar"
    }
  ],
  "userExperience": {
    "defaultFocus": "txtName",
    "enterKeyBehavior": "Accepts form (triggers btnFind via AcceptButton)",
    "escapeKeyBehavior": "Cancels form (triggers btnCancel via CancelButton on detail form)",
    "doubleClickBehavior": "Not implemented in search grid, edit via main toolbar",
    "gridDoubleClickBehavior": "Segment grid - triggers ItemModify (opens detail edit)",
    "cursorManagement": "WaitCursor shown during operations",
    "conditionalFieldEnabling": [
      "cboCustomerID enabled only when chkIsHighWaterArea checked",
      "Segment detail section enabled only when adding/editing segment"
    ],
    "gridFormatting": {
      "searchGrid": "Columns: Name, IsPriceZone, IsActive, IsPortalArea (conditional), IsHighWaterArea (conditional), CustomerName (conditional), IsFuelTaxArea, IsLiquidRateArea (conditional)",
      "segmentGrid": "Columns: River, StartMile, EndMile, AutoFitStyle.ResizeAllColumns, Custom numeric comparers for mile columns"
    },
    "accessibilityFeatures": [
      "Keyboard shortcuts: &ind (Find), Ca&ncel (Cancel), S&et (Set)",
      "Tab order follows logical flow",
      "Proper label associations"
    ]
  },
  "securityIntegration": {
    "authorizationSystem": "ControlAuthorization",
    "subsystem": "SubSystem.frmRiverAreaSearch",
    "buttonTypes": {
      "btnFind": "ButtonType.Open",
      "btnReset": "ButtonType.Open",
      "btnSubmit": "ButtonType.Submit",
      "btnCancel": "ButtonType.Cancel",
      "btnSet": "ButtonType.Submit",
      "btnCancelEdit": "ButtonType.CancelEdit",
      "Add": "ButtonType.Add",
      "Modify": "ButtonType.Modify",
      "Remove": "ButtonType.Remove",
      "Export": "ButtonType.Open"
    },
    "permissionChecks": [
      "Toolbar buttons check ToolbarButtonCanBeEnabled",
      "Control permissions set via ControlAuthorization",
      "SetFunctionalAreas called during initialization"
    ]
  },
  "dataBindingPatterns": [
    {
      "pattern": "Manual Two-Way Binding",
      "description": "Validated events update business object properties",
      "direction": "Control → Business Object",
      "timing": "On Validated event"
    },
    {
      "pattern": "Manual Load from Object",
      "description": "LoadControlsForRiverArea/LoadControlsForRiverAreaSegment",
      "direction": "Business Object → Controls",
      "timing": "On form load or item selection"
    },
    {
      "pattern": "Grid Collection Binding",
      "description": "Grid bound directly to business object collection",
      "grid": "grdList",
      "collection": "_RiverArea.RiverAreaSegments",
      "method": "RefreshListBase",
      "idColumn": "RiverAreaSegmentID"
    },
    {
      "pattern": "Search Results Binding",
      "description": "Grid populated from search list",
      "grid": "grdSearch",
      "source": "Lists.RiverAreaSearch.GetList",
      "method": "RefreshListBase",
      "idColumn": "RiverAreaID"
    }
  ],
  "notes": [
    "Search form implements IBaseSearch interface for main form integration",
    "Detail form implements IBaseDetailEdit interface for modal editing",
    "Uses CSLA business object pattern with BeginEdit/ApplyEdit/CancelEdit",
    "Child collection (RiverAreaSegments) managed in-memory, persisted with parent",
    "Two-level editing: River Area (main detail) and River Segments (child list/detail)",
    "Conditional UI based on licenses: Portal, UnitTow, GlobalSettingList.EnableRiverSegmentHighWaterModel",
    "High Water Area feature enables customer selection",
    "Grid settings persisted per user via MyAppSettingHelper",
    "Form uses panel-based design for main form embedding (search) and modal dialog (detail)",
    "Infragistics controls used throughout (UltraGrid, UltraCombo, UltraButton, etc.)",
    "Toolbar for segment management uses UltraToolbarsManager",
    "Search form does not implement ItemView or ItemRun (no-op)",
    "OnChangeOfFleet not implemented (no fleet-specific behavior)"
  ]
}
