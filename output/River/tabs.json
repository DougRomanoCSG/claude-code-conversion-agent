{
  "formName": "frmRiverDetail",
  "hasTabControl": false,
  "formType": "Single Panel Detail Form",
  "purpose": "River/Waterway detail entry and editing",
  "panels": [
    {
      "panelName": "pnlRiverDetail",
      "panelType": "UltraPanel",
      "defaultActive": true,
      "purpose": "Primary river information",
      "sections": [
        {
          "name": "Basic Information",
          "order": 1,
          "controls": [
            {
              "name": "txtName",
              "type": "UltraTextEditor",
              "label": "Waterway name:",
              "required": false,
              "validationType": "String",
              "property": "Name",
              "tabIndex": 1,
              "maxLength": "River.MaxLength.Name",
              "bold": true
            },
            {
              "name": "txtCode",
              "type": "UltraTextEditor",
              "label": "Code:",
              "required": false,
              "validationType": "Custom",
              "customRegEx": "\\w{River.MaxLength.Code}",
              "customErrorMessage": "Abbreviation must be exactly {River.MaxLength.Code} characters long",
              "property": "Code",
              "tabIndex": 3,
              "maxLength": "River.MaxLength.Code",
              "bold": true,
              "transform": "ToUpper"
            }
          ]
        },
        {
          "name": "Mile Markers",
          "order": 2,
          "controls": [
            {
              "name": "txtStartMile",
              "type": "UltraTextEditor",
              "label": "Start mile:",
              "required": false,
              "validationType": "Decimal",
              "property": "StartMile",
              "tabIndex": 5,
              "maxLength": null
            },
            {
              "name": "txtEndMile",
              "type": "UltraTextEditor",
              "label": "End mile:",
              "required": false,
              "validationType": "Decimal",
              "property": "EndMile",
              "tabIndex": 7,
              "maxLength": null
            }
          ]
        },
        {
          "name": "Integration",
          "order": 3,
          "controls": [
            {
              "name": "txtBargeExCode",
              "type": "UltraTextEditor",
              "label": "BargeEx Code:",
              "required": false,
              "validationType": "String",
              "property": "BargeExCode",
              "tabIndex": 9,
              "maxLength": "River.MaxLength.BargeExCode"
            }
          ]
        },
        {
          "name": "Direction Labels",
          "order": 4,
          "controls": [
            {
              "name": "txtUpLabel",
              "type": "UltraTextEditor",
              "label": "Upstream:",
              "required": false,
              "validationType": "String",
              "property": "UpLabel",
              "tabIndex": 11,
              "maxLength": "River.MaxLength.UpLabel",
              "bold": true
            },
            {
              "name": "txtDownLabel",
              "type": "UltraTextEditor",
              "label": "Downstream:",
              "required": false,
              "validationType": "String",
              "property": "DownLabel",
              "tabIndex": 13,
              "maxLength": "River.MaxLength.DownLabel",
              "bold": true
            }
          ]
        },
        {
          "name": "Direction Settings",
          "order": 5,
          "controls": [
            {
              "name": "chkIsLowToHighDirection",
              "type": "UltraCheckEditor",
              "label": "Direction is low to high (like Mississippi)",
              "required": false,
              "property": "IsLowToHighDirection",
              "tabIndex": 15,
              "defaultChecked": true
            }
          ]
        }
      ]
    }
  ],
  "sharedControls": {
    "location": "Bottom of form in grpSubmitCancel group box",
    "groupBox": "grpSubmitCancel",
    "controls": [
      {
        "name": "chkIsActive",
        "type": "UltraCheckEditor",
        "text": "Active",
        "property": "IsActive",
        "defaultChecked": true,
        "tabIndex": 1,
        "location": "Left side of group box"
      },
      {
        "name": "btnSubmit",
        "type": "UltraButton",
        "text": "&Submit",
        "action": "Save river data",
        "dialogResult": "OK",
        "tabIndex": 3,
        "buttonType": "Submit",
        "location": "Right side, before Cancel"
      },
      {
        "name": "btnCancel",
        "type": "UltraButton",
        "text": "&Cancel",
        "action": "Cancel edit",
        "dialogResult": "Cancel",
        "tabIndex": 5,
        "buttonType": "Cancel",
        "causesValidation": false,
        "location": "Right side, last button"
      }
    ]
  },
  "statusBar": {
    "name": "staStatus",
    "type": "UltraStatusBar",
    "purpose": "Display validation messages",
    "linkedToValidator": true
  },
  "formProperties": {
    "title": "<New or River Name> - River/Waterway Detail",
    "titleDynamic": true,
    "titleLogic": "If River.Name is empty, show 'New', otherwise show River.Name",
    "formBorderStyle": "Fixed3D",
    "startPosition": "CenterParent",
    "showInTaskbar": false,
    "maximizeBox": false,
    "minimizeBox": false,
    "size": "316x270"
  },
  "businessLogic": {
    "businessObject": "River",
    "namespace": "BargeOps.Onshore.BusinessLogic",
    "editMode": "BeginEdit/ApplyEdit pattern",
    "baseForm": "frmBaseDetailEdit",
    "implements": "IBaseDetailEdit",
    "searchForm": "frmRiverSearch"
  },
  "validation": {
    "validatorType": "ValidatorExtender",
    "displayControl": "staStatus",
    "rules": [
      {
        "control": "txtName",
        "type": "String",
        "required": false
      },
      {
        "control": "txtCode",
        "type": "Custom",
        "required": false,
        "regex": "\\w{River.MaxLength.Code}",
        "errorMessage": "Abbreviation must be exactly {River.MaxLength.Code} characters long"
      },
      {
        "control": "txtBargeExCode",
        "type": "String",
        "required": false
      },
      {
        "control": "txtStartMile",
        "type": "Decimal",
        "required": false
      },
      {
        "control": "txtEndMile",
        "type": "Decimal",
        "required": false
      },
      {
        "control": "txtUpLabel",
        "type": "String",
        "required": false
      },
      {
        "control": "txtDownLabel",
        "type": "String",
        "required": false
      }
    ]
  },
  "loadSequence": [
    {
      "order": 1,
      "method": "FormatControls",
      "actions": [
        "Set form title based on River.Name",
        "Configure validator extender",
        "Set max lengths for text fields"
      ]
    },
    {
      "order": 2,
      "method": "LoadControlsForRiver",
      "actions": [
        "Load all River properties into form controls"
      ]
    }
  ],
  "modernImplementationNotes": {
    "layoutRecommendation": "Single-panel Bootstrap form with logical sections",
    "sections": [
      "Basic Information (Name, Code)",
      "Mile Markers (Start/End Mile)",
      "Integration (BargeEx Code)",
      "Direction Labels (Upstream/Downstream)",
      "Direction Settings (IsLowToHighDirection checkbox)"
    ],
    "bootstrapComponents": [
      "form-control for text inputs",
      "form-check for checkboxes",
      "btn btn-primary for Submit",
      "btn btn-secondary for Cancel"
    ],
    "validationStrategy": "Client-side using data annotations and jQuery validation",
    "statusDisplay": "Toast notifications or inline validation messages"
  }
}
