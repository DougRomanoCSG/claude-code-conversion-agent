{
  "formName": "frmBargeEvent",
  "tabControl": "tabBargeDetail",
  "tabs": [
    {
      "tabName": "tpgBargeDetails",
      "tabKey": "Barge Details",
      "tabText": "&1 - Barge Details",
      "order": 1,
      "defaultActive": true,
      "purpose": "Primary barge event details and barge list management",
      "sections": [
        {
          "name": "Event Controls Panel",
          "groupControl": "pnlEventControls",
          "purpose": "Top-level event information and controls",
          "controls": [
            "cboFleetBoatID",
            "lblFleetBoatID",
            "dtStartDate",
            "cboStartTime",
            "lblStartDateTime",
            "dtCompleteDate",
            "cboCompleteTime",
            "lblCompleteDateTime",
            "dtSchedStartDate",
            "cboSchedStartTime",
            "lblSchedStartDateTime",
            "dtSchedCompleteDate",
            "cboSchedCompleteTime",
            "lblSchedCompleteDateTime",
            "cboFromLocationID",
            "lblFromLocationID",
            "cboToLocationID",
            "lblToLocationID",
            "cboRiver",
            "txtMile",
            "lblFromBoatPosition",
            "txtOnOrderTripNumber",
            "lblOnOrderTripNumber",
            "txtNote",
            "lblNote",
            "chkCloseTicket",
            "chkPickupWhenEmpty",
            "btnDelays"
          ]
        },
        {
          "name": "Barge List Grid",
          "groupControl": "grpBarges",
          "purpose": "Manage list of barges in the event",
          "hasGrid": true,
          "grid": {
            "name": "grdBargeList",
            "childEntity": "BargeEventBarge",
            "parentKey": "BargeEventID",
            "operations": ["Add", "Edit", "Delete", "View Positions", "Enter Tonnages", "Manage Boats"],
            "toolbar": {
              "name": "ToolbarsManager",
              "buttons": [
                {
                  "key": "Add to List",
                  "caption": "&Add to List",
                  "action": "Add barge to event",
                  "visible": false
                },
                {
                  "key": "Modify Details",
                  "caption": "&Modify Details",
                  "action": "Modify barge details in event"
                },
                {
                  "key": "Remove from List",
                  "caption": "&Remove from List",
                  "action": "Remove barge from event"
                },
                {
                  "key": "New Barge",
                  "caption": "&New Barge",
                  "action": "Create new barge",
                  "isFirstInGroup": true
                },
                {
                  "key": "Modify Barge",
                  "caption": "Modify &Barge",
                  "action": "Modify barge master record"
                },
                {
                  "key": "Enter Tonnages",
                  "caption": "Enter &Tonnages",
                  "action": "Enter tonnage information"
                },
                {
                  "key": "Manage Boats",
                  "caption": "Manage &Boats",
                  "action": "Manage boat assignments"
                },
                {
                  "key": "Barge Positions",
                  "caption": "View Fleet",
                  "action": "View barge positions/fleet"
                },
                {
                  "key": "Export",
                  "caption": "Export",
                  "action": "Export grid data",
                  "isFirstInGroup": true
                }
              ]
            }
          }
        },
        {
          "name": "Barge Details - Top Section",
          "groupControl": "grpBargeDetailsTop",
          "purpose": "Individual barge details - top section",
          "controls": [
            "cboCustomerID",
            "lblCustomerID",
            "cboCargoCustomerID",
            "lblCargoCustomerID",
            "cboDestinationInID",
            "lblDestinationInID",
            "cboDestinationOutID",
            "lblDestinationOutID",
            "cboRigID",
            "lblRigID",
            "cboCommodityID",
            "lblCommodityID",
            "cboCargoID",
            "lblCargoID",
            "cboCargoHandlingStatus",
            "lblCargoHandlingStatus",
            "cboBargeConsignLocationID",
            "lblBargeConsignLocationID",
            "cboBargeConsignTruckTicketID",
            "txtSurveyTons",
            "lblSurveyTons",
            "txtTicketDraftRequestedFeet",
            "txtTicketDraftRequestedInches",
            "lblTicketDraftRequested",
            "txtBargeDraftFeet",
            "txtBargeDraftInches",
            "lblDraft",
            "btnDraftDetail",
            "btnSurveyDraftDetail",
            "chkIsCommercialBarge"
          ]
        },
        {
          "name": "Barge Details - Separator Section",
          "groupControl": "grpBargeDetailsSeparator",
          "purpose": "Individual barge details - status and configuration",
          "controls": [
            "cboLoadStatus",
            "lblLoadStatus",
            "cboCleanStatus",
            "lblCleanStatus",
            "cboCoverConfig",
            "lblCoverConfig",
            "cboCoverType",
            "lblCoverType",
            "cboCoverSubTypeID",
            "cboRepairStatus",
            "lblRepairStatus",
            "cboDamageLevel",
            "lblDamageLevel",
            "cboFreeboardRange",
            "chkIsDamaged",
            "chkIsLeaker",
            "chkHasInsufficientFreeboard",
            "chkLoadFirst",
            "chkLoadLast",
            "chkLoadMultipleLots",
            "txtDamageNote",
            "txtBargeNote",
            "lblBargeNote"
          ]
        },
        {
          "name": "Barge Detail Popup Controls",
          "groupControl": "pnlEventDetail",
          "purpose": "Popup panel for detailed barge editing",
          "controls": [
            "cboConsignLocationID",
            "lblConsignLocationID",
            "cboConsignShipID",
            "cboBargeConsignShipID",
            "lblConsignToType",
            "btnDetailSet",
            "btnDetailCancel"
          ]
        }
      ]
    },
    {
      "tabName": "tpgBilling",
      "tabKey": "Billing",
      "tabText": "&2 - Billing",
      "order": 2,
      "purpose": "Event billing information including rates, surcharges, and allowances",
      "conditionalBehavior": {
        "enabled": "Based on event status and billing configuration",
        "condition": "Disabled in certain states per line 3247 in frmBargeEvent.vb"
      },
      "sections": [
        {
          "name": "Customer Information",
          "groupControl": "grpCustomer",
          "purpose": "Billing customer and event classification",
          "controls": [
            "cboBillingCustomerID",
            "lblBillingCustomerID",
            "cboDivision",
            "lblDivision",
            "cboVendorID",
            "lblVendorID",
            "cboVendorBusinessUnitID",
            "lblVendorBusinessUnitID",
            "optChargeType",
            "lblChargeType",
            "txtLoadStatus",
            "lblLoadStatusRO",
            "txtSizeCategory",
            "lblBargeSize",
            "txtHullType",
            "lblHullType",
            "txtCurrentFleetingDays",
            "lblCurrentFleetingDays",
            "txtPriorFleetingDays",
            "lblPriorFleetingDays",
            "chkIsPortShift"
          ]
        },
        {
          "name": "Base Amount",
          "groupControl": "grpBaseAmount",
          "purpose": "Base billing rate calculation",
          "controls": [
            "cboRateType",
            "lblRateType",
            "txtBaseRate",
            "lblRateAmount",
            "txtMinimum",
            "lblMinTime",
            "txtMinimumAmount",
            "lblMinimumAmount",
            "txtProrateUnits",
            "lblProrateUnits",
            "lblProrateUnitsLabel",
            "txtFreeHours",
            "lblFreeHours",
            "txtBaseAmount",
            "lblAmount",
            "btnEventBillingDetail"
          ]
        },
        {
          "name": "Surcharges",
          "groupControl": "grpSurcharges",
          "purpose": "Additional billing surcharges",
          "controls": [
            "chkIncludeHighWater",
            "txtHighWaterRate",
            "lblHighWaterRate",
            "txtHighWaterAmount",
            "lblHighWaterAmount",
            "chkIncludeFuelAndLaborEscalation",
            "txtFuelEscalationRate",
            "lblFuelEscalationRate",
            "txtFuelEscalationAmount",
            "lblFuelEscalationAmount",
            "txtLaborEscalationRate",
            "lblLaborEscalationRate",
            "txtLaborEscalationAmount",
            "lblLaborEscalationAmount"
          ]
        },
        {
          "name": "Allowances",
          "groupControl": "grpAllowances",
          "purpose": "Billing deductions and allowances",
          "controls": [
            "txtFreightAllowanceAmount",
            "lblFreightAllowanceAmount"
          ]
        },
        {
          "name": "Total",
          "groupControl": "grpTotal",
          "purpose": "Final billing amount and invoice information",
          "controls": [
            "txtTotalAmount",
            "lblTotalAmount",
            "txtInvoiceNote",
            "lblInvoiceNote",
            "txtBillableStatus",
            "lblBillableStatus",
            "chkRebill"
          ]
        }
      ]
    },
    {
      "tabName": "tpgFreightBilling",
      "tabKey": "Freight Billing",
      "tabText": "&3 - Freight Billing",
      "order": 3,
      "purpose": "Freight-specific billing details including contract and rate information",
      "conditionalBehavior": {
        "enabled": "_BargeEvent.IsFreightBillable() per line 2498 in frmBargeEvent.vb",
        "visible": "_IsFreightActive license check per lines 3261-3266 in frmBargeEvent.vb",
        "condition": "Only available when freight license is active and event is freight billable"
      },
      "controls": [
        {
          "name": "txtFreightCustomer",
          "type": "UltraTextEditor",
          "label": "Freight Customer",
          "section": "Customer Info"
        },
        {
          "name": "lblFreightCustomer",
          "type": "UltraLabel",
          "section": "Customer Info"
        },
        {
          "name": "txtFreightBillingDivision",
          "type": "UltraTextEditor",
          "label": "Billing Division",
          "section": "Customer Info"
        },
        {
          "name": "lblFreightBillingDivision",
          "type": "UltraLabel",
          "section": "Customer Info"
        },
        {
          "name": "txtFreightOriginName",
          "type": "UltraTextEditor",
          "label": "Freight Origin Name",
          "section": "Route Info"
        },
        {
          "name": "lblFreightOriginName",
          "type": "UltraLabel",
          "section": "Route Info"
        },
        {
          "name": "txtFreightDestinationName",
          "type": "UltraTextEditor",
          "label": "Freight Destination Name",
          "section": "Route Info"
        },
        {
          "name": "lblFreightDestinationName",
          "type": "UltraLabel",
          "section": "Route Info"
        },
        {
          "name": "txtFreightContractNumber",
          "type": "UltraTextEditor",
          "label": "Contract Number",
          "section": "Contract Info"
        },
        {
          "name": "lblContractNumber",
          "type": "UltraLabel",
          "section": "Contract Info"
        },
        {
          "name": "txtFreightBillableTons",
          "type": "UltraTextEditor",
          "label": "Freight Billable Tons",
          "section": "Tonnage"
        },
        {
          "name": "lblFreightBillableTons",
          "type": "UltraLabel",
          "section": "Tonnage"
        },
        {
          "name": "lblQuantityUnits",
          "type": "UltraLabel",
          "section": "Tonnage"
        },
        {
          "name": "txtFreightMinQuantity",
          "type": "UltraTextEditor",
          "label": "Min Quantity",
          "section": "Tonnage"
        },
        {
          "name": "lvlFreightMinQuantity",
          "type": "UltraLabel",
          "section": "Tonnage"
        },
        {
          "name": "lblFreightMinQuantityUnits",
          "type": "UltraLabel",
          "section": "Tonnage"
        },
        {
          "name": "txtFreightBaseRate",
          "type": "UltraTextEditor",
          "label": "Freight Base Rate",
          "section": "Rate Info"
        },
        {
          "name": "lblFreightBaseRate",
          "type": "UltraLabel",
          "section": "Rate Info"
        },
        {
          "name": "txtFreightRateEscalation",
          "type": "UltraTextEditor",
          "label": "Freight Rate Escalation",
          "section": "Rate Info"
        },
        {
          "name": "lblFreightRateEscalation",
          "type": "UltraLabel",
          "section": "Rate Info"
        },
        {
          "name": "txtFreightEffectiveRate",
          "type": "UltraTextEditor",
          "label": "Freight Effective Rate",
          "section": "Rate Info"
        },
        {
          "name": "lblFreightEffectiveRate",
          "type": "UltraLabel",
          "section": "Rate Info"
        },
        {
          "name": "txtFreightRateEffectiveDate",
          "type": "UltraTextEditor",
          "label": "Freight Rate Effective Date",
          "section": "Rate Info"
        },
        {
          "name": "lblFreightRateEffectiveDate",
          "type": "UltraLabel",
          "section": "Rate Info"
        },
        {
          "name": "lblFreightRateType",
          "type": "UltraLabel",
          "section": "Rate Info"
        },
        {
          "name": "chkIsManualFreightRate",
          "type": "UltraCheckEditor",
          "label": "Manual Freight Rate",
          "section": "Rate Info"
        },
        {
          "name": "txtFreightTotalAmount",
          "type": "UltraTextEditor",
          "label": "Freight Total Amount",
          "section": "Total"
        },
        {
          "name": "lblFreightTotalAmount",
          "type": "UltraLabel",
          "section": "Total"
        },
        {
          "name": "txtFreightInvoiceNote",
          "type": "UltraTextEditor",
          "label": "Freight Invoice Note",
          "section": "Notes"
        },
        {
          "name": "lblFreightInvoiceNote",
          "type": "UltraLabel",
          "section": "Notes"
        },
        {
          "name": "txtFreightBillableStatus",
          "type": "UltraTextEditor",
          "label": "Freight Billable Status",
          "section": "Status"
        },
        {
          "name": "lblFreightBillableStatus",
          "type": "UltraLabel",
          "section": "Status"
        }
      ]
    },
    {
      "tabName": "tpgDemurrageBilling",
      "tabKey": "Demurrage Billing",
      "tabText": "&4 - Demurrage Billing",
      "order": 4,
      "purpose": "Demurrage billing calculations including free time and demurrage rates",
      "conditionalBehavior": {
        "enabled": "_IsFreightActive AndAlso _BargeEvent.IsDemurrageBillable() per lines 2504-2505 in frmBargeEvent.vb",
        "visible": "_IsFreightActive license check per lines 3261-3266 in frmBargeEvent.vb",
        "condition": "Only available when freight license is active and event is demurrage billable"
      },
      "controls": [
        {
          "name": "cboDemurrageCustomerID",
          "type": "UltraCombo",
          "label": "Demurrage Customer ID",
          "section": "Customer Info"
        },
        {
          "name": "lblDemurrageCustomerID",
          "type": "UltraLabel",
          "section": "Customer Info"
        },
        {
          "name": "txtDemBillingDivision",
          "type": "UltraTextEditor",
          "label": "Dem Billing Division",
          "section": "Customer Info"
        },
        {
          "name": "lblDemBillingDivision",
          "type": "UltraLabel",
          "section": "Customer Info"
        },
        {
          "name": "txtDemFreightContractNumber",
          "type": "UltraTextEditor",
          "label": "Dem Freight Contract Number",
          "section": "Contract Info"
        },
        {
          "name": "lblDemFreightContractNumber",
          "type": "UltraLabel",
          "section": "Contract Info"
        },
        {
          "name": "txtDemFreeTimeType",
          "type": "UltraTextEditor",
          "label": "Dem Free Time Type",
          "section": "Time Calculation"
        },
        {
          "name": "lblDemFreeTimeType",
          "type": "UltraLabel",
          "section": "Time Calculation"
        },
        {
          "name": "txtDemLoadTime",
          "type": "UltraTextEditor",
          "label": "Dem Load Time",
          "section": "Time Calculation"
        },
        {
          "name": "lblDemLoadTime",
          "type": "UltraLabel",
          "section": "Time Calculation"
        },
        {
          "name": "txtDemUnloadTime",
          "type": "UltraTextEditor",
          "label": "Dem Unload Time",
          "section": "Time Calculation"
        },
        {
          "name": "lblDemUnloadTime",
          "type": "UltraLabel",
          "section": "Time Calculation"
        },
        {
          "name": "txtDemNetTimeCalculation",
          "type": "UltraTextEditor",
          "label": "Dem Net Time Calculation",
          "section": "Time Calculation"
        },
        {
          "name": "lblDemNetTimeCalculation",
          "type": "UltraLabel",
          "section": "Time Calculation"
        },
        {
          "name": "txtDemFreeTime",
          "type": "UltraTextEditor",
          "label": "Free Time",
          "section": "Time Calculation"
        },
        {
          "name": "UltraLabel12",
          "type": "UltraLabel",
          "section": "Time Calculation"
        },
        {
          "name": "txtDemNetTime",
          "type": "UltraTextEditor",
          "label": "Net Time",
          "section": "Time Calculation"
        },
        {
          "name": "UltraLabel13",
          "type": "UltraLabel",
          "section": "Time Calculation"
        },
        {
          "name": "txtDemSizeCategory",
          "type": "UltraTextEditor",
          "label": "Dem Size Category",
          "section": "Rate Info"
        },
        {
          "name": "lblDemSizeCategory",
          "type": "UltraLabel",
          "section": "Rate Info"
        },
        {
          "name": "txtDemRateEffectiveDate",
          "type": "UltraTextEditor",
          "label": "Dem Rate Effective Date",
          "section": "Rate Info"
        },
        {
          "name": "lblDemRateEffectiveDate",
          "type": "UltraLabel",
          "section": "Rate Info"
        },
        {
          "name": "txtDemRate",
          "type": "UltraTextEditor",
          "label": "Dem Rate",
          "section": "Rate Info"
        },
        {
          "name": "lblDemRate",
          "type": "UltraLabel",
          "section": "Rate Info"
        },
        {
          "name": "chkDemOverride",
          "type": "UltraCheckEditor",
          "label": "Dem Override",
          "section": "Rate Info"
        },
        {
          "name": "txtDemAmount",
          "type": "UltraTextEditor",
          "label": "Dem Amount",
          "section": "Total"
        },
        {
          "name": "UltraLabel14",
          "type": "UltraLabel",
          "section": "Total"
        },
        {
          "name": "txtDemInvoiceNote",
          "type": "UltraTextEditor",
          "label": "Dem Invoice Note",
          "section": "Notes"
        },
        {
          "name": "lblDemInvoiceNote",
          "type": "UltraLabel",
          "section": "Notes"
        },
        {
          "name": "txtDemBillableStatus",
          "type": "UltraTextEditor",
          "label": "Dem Billable Status",
          "section": "Status"
        },
        {
          "name": "lblDemBillableStatus",
          "type": "UltraLabel",
          "section": "Status"
        },
        {
          "name": "UltraGroupBox1",
          "type": "UltraGroupBox",
          "section": "Container"
        }
      ]
    },
    {
      "tabName": "tpgBillingAudit",
      "tabKey": "Billing Audit",
      "tabText": "&5 - Billing Audit",
      "order": 5,
      "purpose": "Track billing audit history and changes",
      "conditionalBehavior": {
        "enabled": "Enabled when freight billing is configured per line 2511 in frmBargeEvent.vb",
        "text": "Changes between '&5 - Billing Audit' and '&3 - Billing Audit' depending on freight visibility per lines 3263-3267 in frmBargeEvent.vb",
        "condition": "Tab text changes based on whether freight tabs are visible"
      },
      "hasGrid": true,
      "grid": {
        "name": "grdBillingAudit",
        "childEntity": "BargeEventBillingAudit",
        "parentKey": "BargeEventID",
        "operations": ["View"],
        "purpose": "Display billing audit trail",
        "dockStyle": "Fill"
      }
    }
  ],
  "sharedControls": {
    "location": "Outside tabs (tpgSharedControls page)",
    "groupControl": "grpSubmitCancel",
    "purpose": "Form-level submit and cancel actions",
    "controls": [
      {
        "name": "btnSubmit",
        "type": "UltraButton",
        "text": "Submit",
        "action": "Save all tab data and submit form"
      },
      {
        "name": "btnCancel",
        "type": "UltraButton",
        "text": "Cancel",
        "action": "Cancel form without saving"
      },
      {
        "name": "btnAddToList",
        "type": "UltraButton",
        "text": "Add to List",
        "action": "Add item to list"
      }
    ]
  },
  "tabLogic": {
    "conditionalVisibility": [
      {
        "tabs": ["tpgFreightBilling", "tpgDemurrageBilling"],
        "condition": "_IsFreightActive (license check)",
        "reason": "Freight and Demurrage tabs only visible when freight license is active",
        "sourceLines": "frmBargeEvent.vb:3261-3266"
      }
    ],
    "conditionalEnabled": [
      {
        "tab": "tpgBilling",
        "condition": "Disabled in certain event states",
        "reason": "Billing tab disabled when event is in specific states",
        "sourceLines": "frmBargeEvent.vb:3247"
      },
      {
        "tab": "tpgFreightBilling",
        "condition": "_BargeEvent.IsFreightBillable()",
        "reason": "Freight billing only enabled when event is freight billable",
        "sourceLines": "frmBargeEvent.vb:2498, 3253"
      },
      {
        "tab": "tpgDemurrageBilling",
        "condition": "_IsFreightActive AndAlso _BargeEvent.IsDemurrageBillable()",
        "reason": "Demurrage billing requires freight license and demurrage-billable event",
        "sourceLines": "frmBargeEvent.vb:2504-2505, 3254"
      },
      {
        "tab": "tpgBillingAudit",
        "condition": "_BargeEvent.IsFreightBillable()",
        "reason": "Billing audit enabled when freight billing is available",
        "sourceLines": "frmBargeEvent.vb:2511, 3248"
      }
    ],
    "dynamicTabText": [
      {
        "tab": "tpgBillingAudit",
        "condition": "Freight tabs visible",
        "textWhenTrue": "&5 - Billing Audit",
        "textWhenFalse": "&3 - Billing Audit",
        "reason": "Tab numbering adjusts when freight tabs are hidden",
        "sourceLines": "frmBargeEvent.vb:3263-3267"
      }
    ],
    "loadSequence": [
      {
        "order": 1,
        "action": "Load license configuration (_IsFreightActive)",
        "sourceLines": "frmBargeEvent.vb:259"
      },
      {
        "order": 2,
        "action": "Configure tab visibility based on license",
        "sourceLines": "frmBargeEvent.vb:3260-3267"
      },
      {
        "order": 3,
        "action": "Load BargeEvent data and configure tab enabled states",
        "sourceLines": "frmBargeEvent.vb:2498-2511"
      },
      {
        "order": 4,
        "event": "SelectedTabChanged",
        "action": "Handle tab-specific loading as user navigates",
        "sourceLines": "frmBargeEvent.vb:906"
      }
    ]
  },
  "additionalNotes": {
    "baseClass": "frmBaseDetailEditList",
    "popupControls": "FromLocationPopupControlContainer used for location selection popup",
    "validationExtender": "ValidatorExtender used for form validation",
    "statusBar": "staStatus displays form status information",
    "toolbarIntegration": "UltraToolbarsManager provides grid toolbar functionality",
    "dockAreas": "Grid toolbar uses dock areas: Left, Right, Top, Bottom"
  }
}
