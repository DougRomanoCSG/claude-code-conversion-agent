{
  "formName": "frmBargeTokenColors",
  "formType": "DetailEditList",
  "inherits": "frmBaseDetailEditList",
  "implements": ["IBaseDetailEdit"],
  "description": "Define Colors for Barge Token - A master-detail form with list and inline editing",
  "businessObject": "ColorPair",
  "fleetScoped": true,
  "controls": [
    {
      "name": "txtName",
      "type": "UltraTextEditor",
      "category": "DataEntry",
      "label": "Color name",
      "dataBinding": "ColorPair.Name",
      "modernPattern": {
        "type": "TextInput",
        "htmlType": "text",
        "cssClass": "form-control",
        "required": false
      },
      "validation": [
        {
          "type": "String",
          "validatorExtender": true
        }
      ],
      "maxLength": "ColorPair.MaxLength.Name",
      "events": ["Validated"],
      "location": "grpDetail",
      "tabIndex": 193
    },
    {
      "name": "clrTextColor",
      "type": "UltraColorPicker",
      "category": "DataEntry",
      "label": "Text color",
      "dataBinding": "ColorPair.TextColor",
      "modernPattern": {
        "type": "ColorPicker",
        "htmlType": "color",
        "cssClass": "form-control",
        "defaultValue": "Black",
        "note": "Modern HTML5 color input or JavaScript color picker library"
      },
      "validation": [],
      "events": ["ColorChanged", "Validated"],
      "location": "grpDetail",
      "tabIndex": 196,
      "relatedControls": ["lblSample"]
    },
    {
      "name": "clrBackColor",
      "type": "UltraColorPicker",
      "category": "DataEntry",
      "label": "Back color",
      "dataBinding": "ColorPair.BackColor",
      "modernPattern": {
        "type": "ColorPicker",
        "htmlType": "color",
        "cssClass": "form-control",
        "defaultValue": "Pink",
        "note": "Modern HTML5 color input or JavaScript color picker library"
      },
      "validation": [],
      "events": ["ColorChanged", "Validated"],
      "location": "grpDetail",
      "tabIndex": 197,
      "relatedControls": ["lblSample"]
    },
    {
      "name": "lblSample",
      "type": "UltraLabel",
      "category": "Display",
      "label": "Sample",
      "description": "Live preview of color combination",
      "modernPattern": {
        "type": "PreviewLabel",
        "htmlType": "div",
        "cssClass": "color-preview-sample",
        "note": "Dynamic preview updated via JavaScript when colors change"
      },
      "dynamicStyling": {
        "foreColor": "clrTextColor.Color",
        "backColor": "clrBackColor.Color"
      },
      "location": "grpDetail",
      "tabIndex": 198
    },
    {
      "name": "staStatus",
      "type": "UltraStatusBar",
      "category": "StatusDisplay",
      "description": "Displays validation messages",
      "modernPattern": {
        "type": "ValidationSummary",
        "htmlType": "div",
        "cssClass": "alert alert-danger",
        "note": "ASP.NET validation summary or toast notifications"
      },
      "location": "pnlMain",
      "tabIndex": 4
    }
  ],
  "grids": [
    {
      "name": "grdColorPair",
      "type": "UltraGrid",
      "description": "List of color pairs defined for barge tokens",
      "uniqueIdentifier": "ColorPairID",
      "dataSource": "ColorPairList.GetList(FleetID).List",
      "modernPattern": {
        "type": "DataTable",
        "serverSide": true,
        "ajaxUrl": "/api/bargetokencolors/list",
        "features": ["sorting", "row-selection", "double-click-edit"]
      },
      "columns": [
        {
          "key": "Name",
          "header": "Color Name",
          "dataType": "String",
          "width": 142,
          "alignment": "Left",
          "sortable": true,
          "editable": false,
          "sortOrder": "Ascending",
          "sortPriority": 1
        },
        {
          "key": "TextColor",
          "header": "Text Color",
          "dataType": "String",
          "width": 100,
          "alignment": "Left",
          "sortable": true,
          "editable": false,
          "note": "Color name string representation"
        },
        {
          "key": "BackColor",
          "header": "Back Color",
          "dataType": "String",
          "width": 100,
          "alignment": "Left",
          "sortable": true,
          "editable": false,
          "note": "Color name string representation"
        }
      ],
      "displaySettings": {
        "autoFitStyle": "ExtendLastColumn",
        "columnChooserEnabled": false
      },
      "events": ["DoubleClick", "AfterSelectChange"],
      "location": "pnlMain",
      "tabIndex": 197
    }
  ],
  "buttons": [
    {
      "name": "btnDetailSubmit",
      "text": "Submit",
      "type": "Submit",
      "category": "DetailEdit",
      "enabled": true,
      "visible": true,
      "handler": "btnDetailSubmit_Click",
      "description": "Saves changes to ColorPair and refreshes list",
      "location": "grpDetail",
      "tabIndex": 199,
      "anchor": "BottomRight",
      "modernPattern": {
        "type": "SubmitButton",
        "cssClass": "btn btn-primary",
        "formAction": "/BargeTokenColors/Save"
      }
    },
    {
      "name": "btnDetailCancel",
      "text": "Cancel",
      "type": "CancelEdit",
      "category": "DetailEdit",
      "enabled": true,
      "visible": true,
      "handler": "btnDetailCancel_Click",
      "description": "Cancels editing and clears detail controls",
      "causesValidation": false,
      "location": "grpDetail",
      "tabIndex": 192,
      "anchor": "BottomRight",
      "modernPattern": {
        "type": "CancelButton",
        "cssClass": "btn btn-secondary",
        "action": "Reset form and exit edit mode"
      }
    },
    {
      "name": "btnClose",
      "text": "Close",
      "type": "Cancel",
      "category": "Navigation",
      "enabled": true,
      "visible": true,
      "handler": "btnClose_Click",
      "description": "Closes the form",
      "causesValidation": false,
      "location": "grpClose",
      "tabIndex": 158,
      "anchor": "BottomRight",
      "modernPattern": {
        "type": "CloseButton",
        "cssClass": "btn btn-secondary",
        "action": "Return to parent view"
      }
    }
  ],
  "toolbarButtons": [
    {
      "key": "Add",
      "name": "Add",
      "text": "Add",
      "type": "Add",
      "icon": "Add",
      "enabled": "Not IsEditingChild",
      "handler": "ItemAdd",
      "description": "Creates new ColorPair object",
      "modernPattern": {
        "type": "ToolbarButton",
        "cssClass": "btn btn-success",
        "icon": "fa-plus",
        "action": "Enter add mode with empty form"
      }
    },
    {
      "key": "Modify",
      "name": "Modify",
      "text": "Modify",
      "type": "Open",
      "icon": "Modify",
      "enabled": "itemIsSelected AND Not IsEditingChild",
      "handler": "ItemModify",
      "description": "Opens selected ColorPair for editing",
      "modernPattern": {
        "type": "ToolbarButton",
        "cssClass": "btn btn-primary",
        "icon": "fa-edit",
        "action": "Load selected row into edit form"
      }
    },
    {
      "key": "Remove",
      "name": "Remove",
      "text": "Remove",
      "type": "Remove",
      "icon": "Remove",
      "enabled": "itemIsSelected AND Not IsEditingChild",
      "handler": "ItemRemove",
      "description": "Deletes selected ColorPair with confirmation",
      "modernPattern": {
        "type": "ToolbarButton",
        "cssClass": "btn btn-danger",
        "icon": "fa-trash",
        "action": "Show confirmation modal then delete"
      }
    },
    {
      "key": "Export",
      "name": "Export",
      "text": "Export",
      "type": "Open",
      "icon": "ExportResults",
      "enabled": "atLeastOneRow AND Not IsEditingChild",
      "handler": "ExportGrid",
      "description": "Exports grid to Excel/CSV",
      "modernPattern": {
        "type": "ToolbarButton",
        "cssClass": "btn btn-info",
        "icon": "fa-download",
        "action": "Export DataTable to Excel"
      }
    }
  ],
  "panels": [
    {
      "name": "pnlMain",
      "type": "UltraPanel",
      "description": "Main container panel",
      "dock": "Fill",
      "controls": ["grdColorPair", "grpDetail", "grpClose", "staStatus"]
    },
    {
      "name": "grpDetail",
      "type": "UltraGroupBox",
      "label": "Detail",
      "description": "Detail editing section",
      "dock": "Bottom",
      "enabled": "Based on IsEditingChild state",
      "controls": ["txtName", "clrTextColor", "clrBackColor", "lblSample", "btnDetailSubmit", "btnDetailCancel"]
    },
    {
      "name": "grpClose",
      "type": "UltraGroupBox",
      "description": "Close button section",
      "dock": "Bottom",
      "controls": ["btnClose"]
    }
  ],
  "validation": {
    "validatorExtender": "ValidatorExtender",
    "displayControl": "staStatus",
    "rules": [
      {
        "control": "txtName",
        "validationType": "String",
        "required": false,
        "maxLength": "ColorPair.MaxLength.Name"
      }
    ]
  },
  "eventHandlers": {
    "Form_Load": "Calls FormatControls and RefreshList on initial load",
    "ToolbarColorPair_ToolClick": "Routes toolbar button clicks to appropriate handlers",
    "btnDetailSubmit_Click": "Validates and saves ColorPair, refreshes list, clears form",
    "btnDetailCancel_Click": "Cancels edit, clears form, disables detail section",
    "btnClose_Click": "Closes form with change confirmation if needed",
    "clrTextColor_ColorChanged": "Updates lblSample.ForeColor with selected color",
    "clrBackColor_ColorChanged": "Updates lblSample.BackColor with selected color",
    "txtName_Validated": "Updates ColorPair.Name property",
    "clrTextColor_Validated": "Updates ColorPair.TextColor property",
    "clrBackColor_Validated": "Updates ColorPair.BackColor property",
    "grdColorPair_DoubleClick": "Calls ItemModify to edit selected row",
    "grdColorPair_AfterSelectChange": "Calls SetToolState to enable/disable toolbar buttons"
  },
  "businessLogic": {
    "businessObject": "ColorPair",
    "businessObjectPath": "BusinessLogic.ColorPair",
    "listObject": "ColorPairList",
    "listMethod": "ColorPairList.GetList(FleetID).List",
    "newMethod": "ColorPair.NewColorPair()",
    "getMethod": "ColorPair.GetColorPair(ColorPairID)",
    "deleteMethod": "ColorPair.DeleteColorPair(ColorPairID)",
    "properties": [
      {
        "name": "ColorPairID",
        "type": "Integer",
        "primaryKey": true,
        "description": "Unique identifier"
      },
      {
        "name": "FleetID",
        "type": "Integer",
        "foreignKey": true,
        "required": true,
        "description": "Fleet scope identifier"
      },
      {
        "name": "Name",
        "type": "String",
        "maxLength": "ColorPair.MaxLength.Name",
        "description": "Color pair name"
      },
      {
        "name": "TextColor",
        "type": "String",
        "description": "Text color name"
      },
      {
        "name": "BackColor",
        "type": "String",
        "description": "Background color name"
      }
    ],
    "subsystem": "None"
  },
  "formBehavior": {
    "pattern": "MasterDetailInline",
    "description": "List with inline detail editing section",
    "editMode": "Inline detail panel activated by toolbar buttons",
    "stateManagement": {
      "IsEditingChild": "Controls whether form is in edit mode",
      "EnableDisableControls": "Toggles detail section and toolbar based on edit state",
      "ClearControls": "Resets all detail controls to empty",
      "SetToolState": "Enables/disables toolbar buttons based on selection and edit state"
    },
    "workflowSteps": [
      {
        "step": 1,
        "action": "User clicks Add or Modify toolbar button",
        "result": "Detail panel becomes enabled, controls populated (empty for Add, loaded for Modify)"
      },
      {
        "step": 2,
        "action": "User enters/edits color information",
        "result": "Validated events update ColorPair object, sample preview updates in real-time"
      },
      {
        "step": 3,
        "action": "User clicks Submit",
        "result": "ColorPair saved, list refreshed, detail panel cleared and disabled"
      },
      {
        "step": 4,
        "action": "User clicks Cancel",
        "result": "Changes rolled back, detail panel cleared and disabled"
      },
      {
        "step": 5,
        "action": "User clicks Remove",
        "result": "Confirmation dialog shown, ColorPair deleted if confirmed, list refreshed"
      }
    ]
  },
  "modernizationNotes": {
    "architecture": "ASP.NET Core MVC with Razor views",
    "uiFramework": "Bootstrap 5",
    "gridLibrary": "DataTables with server-side processing",
    "colorPicker": "HTML5 color input or JavaScript color picker (e.g., spectrum, bootstrap-colorpicker)",
    "validationPattern": "Client-side with jQuery Validation and server-side model validation",
    "ajaxPattern": "Partial page updates for list refresh after save/delete",
    "recommendations": [
      "Implement ColorPair API controller with CRUD endpoints",
      "Use ViewModels for search/list and edit operations",
      "DataTables for grid with server-side filtering/sorting/paging",
      "Modal dialog OR inline edit panel for detail editing",
      "Real-time color preview using JavaScript event handlers",
      "Toast notifications for success/error messages instead of status bar",
      "Consider using a rich color picker library for better UX",
      "Implement soft delete if color pairs are referenced elsewhere"
    ]
  },
  "securityConsiderations": {
    "authorization": "ControlAuthorization.SetButtonType patterns",
    "buttonTypeSecurity": {
      "Submit": "Submit",
      "Cancel": "Cancel",
      "CancelEdit": "CancelEdit",
      "Add": "Add",
      "Modify": "Open",
      "Remove": "Remove",
      "Export": "Open"
    },
    "modernEquivalent": "ASP.NET Core Authorization with role-based or policy-based access"
  },
  "relatedFiles": {
    "businessLogic": [
      "C:\\Dev\\BargeOps.Admin.Mono\\OnShore\\apps\\Onshore.BusinessLogic\\Business Objects\\ColorPair.vb",
      "C:\\Dev\\BargeOps.Admin.Mono\\OnShore\\apps\\Onshore.BusinessLogic\\Lists\\ColorPairList.vb"
    ],
    "baseForm": "frmBaseDetailEditList"
  },
  "extractionMetadata": {
    "extractedFrom": [
      "C:\\Dev\\BargeOps.Admin.Mono\\OnShore\\apps\\Onshore\\Forms\\frmBargeTokenColors.vb",
      "C:\\Dev\\BargeOps.Admin.Mono\\OnShore\\apps\\Onshore\\Forms\\frmBargeTokenColors.Designer.vb"
    ],
    "extractionDate": "2025-12-19",
    "formComplexity": "Medium",
    "totalControls": 13,
    "totalButtons": 7,
    "hasValidation": true,
    "hasGrids": true,
    "hasCustomEvents": true,
    "specialFeatures": [
      "Live color preview",
      "Color picker controls",
      "Master-detail inline editing",
      "Fleet-scoped data",
      "Real-time UI updates on color change"
    ]
  }
}
