{
  "formName": "frmBargeTokenColors",
  "formTitle": "Define Colors for Barge Token",
  "implements": ["IBaseDetailEdit"],
  "baseClass": "frmBaseDetailEditList",
  "formType": "DetailEditList",
  "businessObject": "ColorPair",
  "businessObjectList": "ColorPairList",
  "uniqueIdentifier": "ColorPairID",
  "initializationParameters": {
    "FleetID": {
      "type": "Int32",
      "required": true,
      "description": "Fleet identifier for filtering color pairs"
    }
  },
  "controls": [
    {
      "name": "txtName",
      "type": "UltraTextEditor",
      "category": "DataEntry",
      "label": "Color name:",
      "dataBinding": "ColorPair.Name",
      "validation": [
        {
          "type": "String",
          "required": false,
          "maxLength": "ColorPair.MaxLength.Name"
        }
      ],
      "events": ["Validated"],
      "modernEquivalent": {
        "type": "text",
        "htmlElement": "<input type=\"text\" class=\"form-control\" />",
        "dataAnnotations": ["StringLength"]
      }
    },
    {
      "name": "clrTextColor",
      "type": "UltraColorPicker",
      "category": "DataEntry",
      "label": "Text color:",
      "dataBinding": "ColorPair.TextColor",
      "defaultValue": "Black",
      "validation": [],
      "events": ["ColorChanged", "Validated"],
      "modernEquivalent": {
        "type": "color",
        "htmlElement": "<input type=\"color\" class=\"form-control form-control-color\" />",
        "notes": "Color picker with live preview, stores color name as string"
      },
      "interactivity": {
        "description": "Updates lblSample foreground color on change",
        "affectedControls": ["lblSample"]
      }
    },
    {
      "name": "clrBackColor",
      "type": "UltraColorPicker",
      "category": "DataEntry",
      "label": "Back color:",
      "dataBinding": "ColorPair.BackColor",
      "defaultValue": "Pink",
      "validation": [],
      "events": ["ColorChanged", "Validated"],
      "modernEquivalent": {
        "type": "color",
        "htmlElement": "<input type=\"color\" class=\"form-control form-control-color\" />",
        "notes": "Color picker with live preview, stores color name as string"
      },
      "interactivity": {
        "description": "Updates lblSample background color on change",
        "affectedControls": ["lblSample"]
      }
    },
    {
      "name": "lblSample",
      "type": "UltraLabel",
      "category": "Display",
      "label": "Sample",
      "dataBinding": null,
      "defaultValue": {
        "text": "Sample",
        "backColor": "Pink",
        "foreColor": "Black"
      },
      "validation": [],
      "events": [],
      "modernEquivalent": {
        "type": "div",
        "htmlElement": "<div class=\"color-sample-preview text-center\" style=\"min-height: 40px; border: 1px solid #ccc;\">Sample</div>",
        "notes": "Live preview element showing text and background color combination"
      },
      "purpose": "Live preview of the color combination as user selects colors"
    }
  ],
  "grids": [
    {
      "name": "grdColorPair",
      "type": "UltraGrid",
      "uniqueIdentifier": "ColorPairID",
      "dataSource": "ColorPairList.GetList(FleetID)",
      "dockStyle": "Fill",
      "autoFitStyle": "ExtendLastColumn",
      "initialSort": {
        "column": "Name",
        "direction": "Ascending"
      },
      "columns": [
        {
          "key": "Name",
          "header": "Color Name",
          "dataType": "String",
          "width": 142,
          "sortable": true,
          "filterable": true,
          "editable": false,
          "alignment": "Left"
        },
        {
          "key": "TextColor",
          "header": "Text Color",
          "dataType": "String",
          "width": 100,
          "sortable": true,
          "filterable": true,
          "editable": false,
          "alignment": "Left",
          "notes": "Color name as string (e.g., 'Black', 'White')"
        },
        {
          "key": "BackColor",
          "header": "Back Color",
          "dataType": "String",
          "width": 100,
          "sortable": true,
          "filterable": true,
          "editable": false,
          "alignment": "Left",
          "notes": "Color name as string (e.g., 'Pink', 'Yellow')"
        }
      ],
      "events": [
        {
          "event": "DoubleClick",
          "handler": "ItemModify",
          "description": "Opens selected color pair for editing"
        },
        {
          "event": "AfterSelectChange",
          "handler": "SetToolState",
          "description": "Updates toolbar button states based on selection"
        }
      ],
      "modernEquivalent": {
        "type": "DataTable",
        "serverSide": true,
        "ajax": {
          "url": "/BargeTokenColors/ColorPairTable",
          "method": "POST"
        },
        "columns": [
          {
            "data": "name",
            "title": "Color Name"
          },
          {
            "data": "textColor",
            "title": "Text Color"
          },
          {
            "data": "backColor",
            "title": "Back Color"
          }
        ]
      }
    }
  ],
  "dropdowns": [],
  "buttons": [
    {
      "name": "btnDetailSubmit",
      "text": "&Submit",
      "type": "Submit",
      "enabled": "WhenEditing",
      "visible": true,
      "location": "grpDetail",
      "handler": "btnDetailSubmit_Click",
      "purpose": "Saves the current color pair (new or modified)",
      "securityType": "ButtonType.Submit",
      "modernEquivalent": {
        "type": "submit",
        "class": "btn btn-primary"
      }
    },
    {
      "name": "btnDetailCancel",
      "text": "Ca&ncel",
      "type": "CancelEdit",
      "enabled": "WhenEditing",
      "visible": true,
      "location": "grpDetail",
      "causesValidation": false,
      "handler": "btnDetailCancel_Click",
      "purpose": "Cancels current edit operation and reverts changes",
      "securityType": "ButtonType.CancelEdit",
      "modernEquivalent": {
        "type": "button",
        "class": "btn btn-secondary"
      }
    },
    {
      "name": "btnClose",
      "text": "&Close",
      "type": "Cancel",
      "enabled": true,
      "visible": true,
      "location": "grpClose",
      "causesValidation": false,
      "handler": "btnClose_Click",
      "purpose": "Closes the form (with dirty check if editing)",
      "securityType": "ButtonType.Cancel",
      "modernEquivalent": {
        "type": "button",
        "class": "btn btn-secondary",
        "action": "redirect to search/list page"
      }
    }
  ],
  "toolbar": {
    "name": "ToolbarColorPair",
    "type": "UltraToolbarsManager",
    "style": "Office2003",
    "allowCustomize": false,
    "allowFloating": false,
    "buttons": [
      {
        "key": "Add",
        "caption": "&Add",
        "icon": "Add",
        "type": "ButtonType.Add",
        "handler": "ItemAdd",
        "enabled": "!IsEditingChild",
        "purpose": "Creates a new color pair for editing"
      },
      {
        "key": "Modify",
        "caption": "&Modify",
        "icon": "Modify",
        "type": "ButtonType.Open",
        "handler": "ItemModify",
        "enabled": "itemIsSelected && !IsEditingChild",
        "purpose": "Opens selected color pair for editing"
      },
      {
        "key": "Remove",
        "caption": "&Remove",
        "icon": "Remove",
        "type": "ButtonType.Remove",
        "handler": "ItemRemove",
        "enabled": "itemIsSelected && !IsEditingChild",
        "purpose": "Deletes selected color pair with confirmation"
      },
      {
        "key": "Export",
        "caption": "Export",
        "icon": "ExportResults",
        "type": "ButtonType.Open",
        "handler": "Main.ExportGrid",
        "enabled": "atLeastOneRow && !IsEditingChild",
        "visible": true,
        "isFirstInGroup": true,
        "purpose": "Exports grid data to file"
      }
    ],
    "modernEquivalent": {
      "type": "Bootstrap button group or navbar",
      "notes": "Implement as fixed toolbar with icon buttons, disable during edit mode"
    }
  },
  "panels": [
    {
      "name": "pnlMain",
      "type": "UltraPanel",
      "dockStyle": "Fill",
      "controls": ["grdColorPair", "grpDetail", "grpClose", "staStatus"],
      "purpose": "Main container panel"
    },
    {
      "name": "grpDetail",
      "type": "UltraGroupBox",
      "label": "Detail",
      "dockStyle": "Bottom",
      "borderStyle": "Header3D",
      "size": {
        "width": 362,
        "height": 116
      },
      "controls": ["lblName", "txtName", "lblTextColor", "clrTextColor", "lblBackColor", "clrBackColor", "lblSample", "btnDetailSubmit", "btnDetailCancel"],
      "initialState": "Disabled",
      "purpose": "Edit section for color pair details (enabled when editing)"
    },
    {
      "name": "grpClose",
      "type": "UltraGroupBox",
      "dockStyle": "Bottom",
      "borderStyle": "Header3D",
      "size": {
        "width": 362,
        "height": 32
      },
      "controls": ["btnClose"],
      "purpose": "Form close button container"
    }
  ],
  "validation": {
    "extender": "ValidatorExtender",
    "displayControl": "staStatus",
    "rules": [
      {
        "control": "txtName",
        "validationType": "String",
        "required": false,
        "maxLength": "ColorPair.MaxLength.Name",
        "message": "Validated on business object"
      }
    ]
  },
  "eventHandlers": {
    "frmBargeTokenColors_Load": "Initializes form, formats controls, loads color pair list",
    "ToolbarColorPair_ToolClick": "Routes toolbar button clicks to appropriate handlers",
    "btnDetailSubmit_Click": "Saves color pair using SubmitNoRefreshClick",
    "btnDetailCancel_Click": "Cancels edit using CancelClick",
    "btnClose_Click": "Closes form with dirty check",
    "clrTextColor_ColorChanged": "Updates sample label foreground color in real-time",
    "clrBackColor_ColorChanged": "Updates sample label background color in real-time",
    "txtName_Validated": "Binds text value to ColorPair.Name property",
    "clrTextColor_Validated": "Binds color name to ColorPair.TextColor property",
    "clrBackColor_Validated": "Binds color name to ColorPair.BackColor property",
    "ItemAdd": "Creates new ColorPair, loads controls, enables edit mode",
    "ItemModify": "Gets ColorPair by ID, begins edit, loads controls, enables edit mode",
    "ItemRemove": "Deletes ColorPair after confirmation, refreshes list",
    "SetToolState": "Enables/disables toolbar buttons based on grid selection and edit state",
    "RefreshList": "Reloads grid with ColorPairList.GetList(FleetID)",
    "EnableDisableControls": "Toggles edit section and toolbar based on edit state",
    "ClearControls": "Clears all edit section controls",
    "LoadControlsForColorPair": "Populates edit controls from ColorPair object",
    "FormatControls": "Initializes grid formatting, validators, and max lengths"
  },
  "businessLogicMethods": {
    "ColorPair.NewColorPair": "Creates new ColorPair instance",
    "ColorPair.GetColorPair": "Retrieves ColorPair by ID",
    "ColorPair.DeleteColorPair": "Deletes ColorPair by ID",
    "ColorPairList.GetList": "Gets all ColorPairs for a FleetID",
    "ColorPair.BeginEdit": "Starts editing transaction",
    "ColorPair.IsValid": "Validates ColorPair (called by base form)",
    "ColorPair.ApplyEdit": "Commits changes (called by base form)",
    "ColorPair.CancelEdit": "Rolls back changes (called by base form)"
  },
  "formBehavior": {
    "editMode": "InPlaceDetail",
    "description": "Master-detail form with list at top and edit section at bottom. Edit section disabled until Add/Modify clicked.",
    "workflow": [
      "1. Form loads with grid showing all color pairs for the fleet",
      "2. User clicks Add (new) or Modify/double-click (edit existing)",
      "3. Detail section enables, controls populate (if editing)",
      "4. User modifies color values, live preview updates in lblSample",
      "5. User clicks Submit (saves) or Cancel (reverts)",
      "6. Detail section disables, grid refreshes",
      "7. User can Remove selected item with confirmation",
      "8. User can Export grid data",
      "9. User clicks Close to exit form"
    ],
    "colorPreview": {
      "description": "lblSample provides real-time visual preview of color combination",
      "updateTriggers": ["clrTextColor.ColorChanged", "clrBackColor.ColorChanged"]
    },
    "dirtyTracking": "Base form tracks changes via CSLA business object",
    "securityIntegration": "ControlAuthorization sets button access based on ButtonType"
  },
  "modernizationNotes": {
    "formType": "Simple list-detail screen, good candidate for single page with modal edit",
    "colorPicker": "HTML5 color input or JavaScript color picker library (e.g., spectrum, bootstrap-colorpicker)",
    "livePreview": "JavaScript to update preview div on color change events",
    "dataTable": "DataTables for grid with server-side processing",
    "validation": "Client-side: jQuery Validation, Server-side: Data Annotations + FluentValidation",
    "toolbar": "Bootstrap button group with Font Awesome icons",
    "editPattern": "In-page edit section or Bootstrap modal dialog",
    "ajaxSave": "Submit via AJAX to avoid full page refresh",
    "confirmDialog": "SweetAlert2 or Bootstrap modal for delete confirmation",
    "colorStorage": "Store as hex value (#RRGGBB) instead of color names for consistency"
  },
  "dependencies": {
    "businessObjects": ["ColorPair", "ColorPairList"],
    "baseClasses": ["frmBaseDetailEditList", "IBaseDetailEdit"],
    "helpers": ["InfragisticsHelper", "ExceptionManager", "Main"],
    "security": ["ControlAuthorization", "ButtonType"],
    "validation": ["ValidatorExtender", "ValidationTypeConstants"]
  },
  "extractionMetadata": {
    "extractedFrom": [
      "C:\\Dev\\BargeOps.Admin.Mono\\OnShore\\apps\\Onshore\\Forms\\frmBargeTokenColors.vb",
      "C:\\Dev\\BargeOps.Admin.Mono\\OnShore\\apps\\Onshore\\Forms\\frmBargeTokenColors.Designer.vb"
    ],
    "extractedDate": "2025-12-22",
    "agent": "Form Structure Analyzer",
    "completeness": "100% - All controls, grids, buttons, events, and business logic documented"
  }
}
