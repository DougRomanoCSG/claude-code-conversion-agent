{
  "businessObject": "ColorPair",
  "baseClass": "ColorPairBase",
  "namespace": "BargeOps.Onshore.BusinessLogic",
  "description": "Manages color pair configurations for barge token visual display. Each color pair defines foreground (text) and background colors used in barge token UI representations.",
  "database": {
    "tableName": "ColorPair",
    "primaryKey": "ColorPairID",
    "foreignKeys": [
      {
        "column": "FleetID",
        "referencedTable": "Fleet",
        "referencedColumn": "FleetID",
        "description": "Links color pair to specific fleet"
      }
    ]
  },
  "properties": [
    {
      "name": "ColorPairID",
      "type": "Int32",
      "access": "ReadOnly",
      "isPrimaryKey": true,
      "isNullable": false,
      "isIdentity": true,
      "description": "Unique identifier for the color pair"
    },
    {
      "name": "FleetID",
      "type": "Int32",
      "access": "ReadWrite",
      "isNullable": false,
      "isRequired": true,
      "description": "Foreign key to Fleet table - associates color pair with fleet",
      "validation": {
        "required": false,
        "notes": "Set after creation in form submission, not enforced in business rules"
      }
    },
    {
      "name": "Name",
      "type": "String",
      "access": "ReadWrite",
      "maxLength": 50,
      "isRequired": true,
      "isNullable": false,
      "description": "User-friendly name for the color pair (e.g., 'Red on White', 'Blue on Yellow')",
      "validation": {
        "required": true,
        "maxLength": 50
      }
    },
    {
      "name": "TextColor",
      "type": "String",
      "access": "ReadWrite",
      "maxLength": 50,
      "isRequired": true,
      "isNullable": false,
      "description": "Foreground/text color name (System.Drawing.Color name)",
      "validation": {
        "required": true,
        "maxLength": 50,
        "customValidation": "Cannot be '0' or empty string"
      }
    },
    {
      "name": "BackColor",
      "type": "String",
      "access": "ReadWrite",
      "maxLength": 50,
      "isRequired": true,
      "isNullable": false,
      "description": "Background color name (System.Drawing.Color name)",
      "validation": {
        "required": true,
        "maxLength": 50,
        "customValidation": "Cannot be '0' or empty string"
      }
    }
  ],
  "businessRules": [
    {
      "ruleName": "NameRequired",
      "property": "Name",
      "condition": "String.IsNullOrEmpty(p_Name)",
      "message": "Name is required",
      "severity": "Error",
      "context": "Always",
      "ruleType": "Required",
      "source": "ColorPairBase.vb:211-213"
    },
    {
      "ruleName": "NameMaxLength",
      "property": "Name",
      "condition": "p_Name.Length > MaxLength.Name",
      "message": "Name exceeds maximum length of 50.",
      "severity": "Error",
      "context": "Always",
      "ruleType": "MaxLength",
      "maxLength": 50,
      "source": "ColorPairBase.vb:214-216"
    },
    {
      "ruleName": "TextColorRequired",
      "property": "TextColor",
      "condition": "String.IsNullOrEmpty(p_TextColor)",
      "message": "TextColor is required",
      "severity": "Error",
      "context": "Always",
      "ruleType": "Required",
      "source": "ColorPairBase.vb:220-221"
    },
    {
      "ruleName": "TextColorMaxLength",
      "property": "TextColor",
      "condition": "p_TextColor.Length > MaxLength.TextColor",
      "message": "TextColor exceeds maximum length of 50.",
      "severity": "Error",
      "context": "Always",
      "ruleType": "MaxLength",
      "maxLength": 50,
      "source": "ColorPairBase.vb:222-224"
    },
    {
      "ruleName": "TextColorNotBlank",
      "property": "TextColor",
      "condition": "p_TextColor = '0' OrElse p_TextColor = String.Empty",
      "message": "TextColor is required",
      "severity": "Error",
      "context": "Always",
      "ruleType": "CustomValidation",
      "description": "Prevents blank/empty color values from color picker control",
      "source": "ColorPair.vb:46-49"
    },
    {
      "ruleName": "BackColorRequired",
      "property": "BackColor",
      "condition": "String.IsNullOrEmpty(p_BackColor)",
      "message": "BackColor is required",
      "severity": "Error",
      "context": "Always",
      "ruleType": "Required",
      "source": "ColorPairBase.vb:228-229"
    },
    {
      "ruleName": "BackColorMaxLength",
      "property": "BackColor",
      "condition": "p_BackColor.Length > MaxLength.BackColor",
      "message": "BackColor exceeds maximum length of 50.",
      "severity": "Error",
      "context": "Always",
      "ruleType": "MaxLength",
      "maxLength": 50,
      "source": "ColorPairBase.vb:230-232"
    },
    {
      "ruleName": "BackColorNotBlank",
      "property": "BackColor",
      "condition": "p_BackColor = '0' OrElse p_BackColor = String.Empty",
      "message": "BackColor is required",
      "severity": "Error",
      "context": "Always",
      "ruleType": "CustomValidation",
      "description": "Prevents blank/empty color values from color picker control",
      "source": "ColorPair.vb:50-53"
    }
  ],
  "methods": {
    "factory": [
      {
        "name": "NewColorPair",
        "returnType": "ColorPair",
        "parameters": [],
        "scope": "Public",
        "isStatic": true,
        "description": "Creates new ColorPair instance with default values",
        "source": "ColorPairBase.vb:334-336"
      },
      {
        "name": "NewColorPairAsChild",
        "returnType": "ColorPair",
        "parameters": [],
        "scope": "Friend",
        "isStatic": true,
        "description": "Creates new ColorPair as child object",
        "source": "ColorPairBase.vb:339-341"
      },
      {
        "name": "GetColorPair",
        "returnType": "ColorPair",
        "parameters": [
          {
            "name": "ID",
            "type": "Int32",
            "description": "ColorPairID to retrieve"
          }
        ],
        "scope": "Public",
        "isStatic": true,
        "description": "Loads existing ColorPair by ID from database",
        "source": "ColorPairBase.vb:344-346"
      },
      {
        "name": "GetColorPairChild",
        "returnType": "ColorPair",
        "parameters": [
          {
            "name": "ID",
            "type": "Int32",
            "description": "ColorPairID to retrieve"
          }
        ],
        "scope": "Friend",
        "isStatic": true,
        "description": "Loads existing ColorPair as child object by ID",
        "source": "ColorPairBase.vb:349-351"
      },
      {
        "name": "GetColorPairChild",
        "returnType": "ColorPair",
        "parameters": [
          {
            "name": "dr",
            "type": "SafeDataReader",
            "description": "Data reader containing ColorPair data"
          }
        ],
        "scope": "Friend",
        "isStatic": true,
        "description": "Loads existing ColorPair from data reader",
        "source": "ColorPairBase.vb:354-360"
      }
    ],
    "crud": [
      {
        "name": "Save",
        "returnType": "ColorPair",
        "description": "Persists ColorPair to database (insert or update)",
        "notes": "Inherited from BusinessLogicBase, uses DataPortal pattern"
      },
      {
        "name": "DeleteColorPair",
        "returnType": "void",
        "parameters": [
          {
            "name": "ID",
            "type": "Int32",
            "description": "ColorPairID to delete"
          }
        ],
        "scope": "Public",
        "isStatic": true,
        "description": "Deletes ColorPair from database by ID",
        "source": "ColorPairBase.vb:363-365"
      }
    ],
    "businessLogic": [
      {
        "name": "Initialize",
        "returnType": "void",
        "description": "Initializes ColorPair with default values and sets stored procedure names",
        "defaultValues": [
          {
            "property": "ColorPairID",
            "value": "0"
          },
          {
            "property": "FleetID",
            "value": "0"
          },
          {
            "property": "Name",
            "value": "String.Empty"
          },
          {
            "property": "TextColor",
            "value": "String.Empty"
          },
          {
            "property": "BackColor",
            "value": "String.Empty"
          }
        ],
        "source": "ColorPairBase.vb:182-204"
      },
      {
        "name": "CheckBusinessRules",
        "returnType": "void",
        "parameters": [
          {
            "name": "PropertyName",
            "type": "String",
            "description": "Property name to validate, or empty string to validate all"
          }
        ],
        "description": "Validates business rules for specified property or all properties",
        "source": "ColorPairBase.vb:206-236, ColorPair.vb:41-56"
      }
    ]
  },
  "relationships": [
    {
      "property": "FleetID",
      "relatedEntity": "Fleet",
      "type": "ManyToOne",
      "description": "ColorPair belongs to a Fleet",
      "cascadeDelete": false
    }
  ],
  "initialization": {
    "method": "Initialize",
    "defaults": [
      {
        "property": "ColorPairID",
        "value": "0",
        "description": "Primary key initialized to 0, set by database on insert"
      },
      {
        "property": "FleetID",
        "value": "0",
        "description": "Must be set before save, typically set by form on submit"
      },
      {
        "property": "Name",
        "value": "String.Empty",
        "description": "User must provide color pair name"
      },
      {
        "property": "TextColor",
        "value": "String.Empty",
        "description": "User must select text color from color picker"
      },
      {
        "property": "BackColor",
        "value": "String.Empty",
        "description": "User must select background color from color picker"
      }
    ],
    "storedProcedures": {
      "select": "ColorPairSelect",
      "selectAll": "ColorPairsSelect",
      "insert": "ColorPairInsert",
      "update": "ColorPairUpdate",
      "delete": "ColorPairDelete"
    }
  },
  "dataAccess": {
    "storedProcedures": [
      {
        "name": "ColorPairSelect",
        "type": "Select",
        "parameters": [
          "@ColorPairID Int"
        ],
        "description": "Retrieves single ColorPair by ID"
      },
      {
        "name": "ColorPairList",
        "type": "List",
        "parameters": [
          "@FleetID Int"
        ],
        "description": "Retrieves all ColorPairs for specified Fleet"
      },
      {
        "name": "ColorPairInsert",
        "type": "Insert",
        "parameters": [
          "@ColorPairID Int OUTPUT",
          "@FleetID Int",
          "@Name VarChar(50)",
          "@TextColor VarChar(50)",
          "@BackColor VarChar(50)"
        ],
        "description": "Inserts new ColorPair, returns generated ColorPairID"
      },
      {
        "name": "ColorPairUpdate",
        "type": "Update",
        "parameters": [
          "@ColorPairID Int",
          "@FleetID Int",
          "@Name VarChar(50)",
          "@TextColor VarChar(50)",
          "@BackColor VarChar(50)"
        ],
        "description": "Updates existing ColorPair"
      },
      {
        "name": "ColorPairDelete",
        "type": "Delete",
        "parameters": [
          "@ColorPairID Int"
        ],
        "description": "Deletes ColorPair by ID"
      }
    ]
  },
  "listObject": {
    "name": "ColorPairList",
    "namespace": "BargeOps.Onshore.BusinessLogic.Lists",
    "baseClass": "ListBase",
    "description": "Provides list of ColorPairs for a specific Fleet",
    "displayMember": "Name",
    "valueMember": "ColorPairID",
    "filterParameters": [
      {
        "name": "FleetID",
        "type": "Int32",
        "description": "Fleet to filter color pairs by"
      }
    ],
    "columns": [
      {
        "name": "ColorPairID",
        "type": "Int32"
      },
      {
        "name": "Name",
        "type": "String"
      },
      {
        "name": "TextColor",
        "type": "System.Drawing.Color",
        "notes": "Converted from string using Color.FromName()"
      },
      {
        "name": "BackColor",
        "type": "System.Drawing.Color",
        "notes": "Converted from string using Color.FromName()"
      }
    ],
    "isCached": false,
    "source": "ColorPairList.vb"
  },
  "modernEquivalents": {
    "dataAnnotations": [
      {
        "property": "Name",
        "annotations": [
          "[Required(ErrorMessage = \"Name is required\")]",
          "[StringLength(50, ErrorMessage = \"Name exceeds maximum length of 50.\")]"
        ]
      },
      {
        "property": "TextColor",
        "annotations": [
          "[Required(ErrorMessage = \"TextColor is required\")]",
          "[StringLength(50, ErrorMessage = \"TextColor exceeds maximum length of 50.\")]"
        ]
      },
      {
        "property": "BackColor",
        "annotations": [
          "[Required(ErrorMessage = \"BackColor is required\")]",
          "[StringLength(50, ErrorMessage = \"BackColor exceeds maximum length of 50.\")]"
        ]
      },
      {
        "property": "FleetID",
        "annotations": [
          "[Required]"
        ]
      }
    ],
    "fluentValidation": {
      "validator": "ColorPairValidator",
      "rules": [
        {
          "property": "Name",
          "rules": [
            "RuleFor(x => x.Name).NotEmpty().WithMessage(\"Name is required\")",
            "RuleFor(x => x.Name).MaximumLength(50).WithMessage(\"Name exceeds maximum length of 50.\")"
          ]
        },
        {
          "property": "TextColor",
          "rules": [
            "RuleFor(x => x.TextColor).NotEmpty().WithMessage(\"TextColor is required\")",
            "RuleFor(x => x.TextColor).MaximumLength(50).WithMessage(\"TextColor exceeds maximum length of 50.\")",
            "RuleFor(x => x.TextColor).Must(color => color != \"0\" && !string.IsNullOrEmpty(color)).WithMessage(\"TextColor is required\")"
          ]
        },
        {
          "property": "BackColor",
          "rules": [
            "RuleFor(x => x.BackColor).NotEmpty().WithMessage(\"BackColor is required\")",
            "RuleFor(x => x.BackColor).MaximumLength(50).WithMessage(\"BackColor exceeds maximum length of 50.\")",
            "RuleFor(x => x.BackColor).Must(color => color != \"0\" && !string.IsNullOrEmpty(color)).WithMessage(\"BackColor is required\")"
          ]
        },
        {
          "property": "FleetID",
          "rules": [
            "RuleFor(x => x.FleetID).GreaterThan(0).WithMessage(\"FleetID is required\")"
          ]
        }
      ]
    },
    "entityFramework": {
      "entityName": "ColorPair",
      "tableName": "ColorPair",
      "keyConfiguration": "[Key] on ColorPairID property",
      "relationships": [
        {
          "navigation": "Fleet",
          "type": "Reference",
          "foreignKey": "FleetID",
          "configuration": "HasOne(cp => cp.Fleet).WithMany().HasForeignKey(cp => cp.FleetID)"
        }
      ]
    }
  },
  "uiUsage": {
    "forms": [
      {
        "name": "frmBargeTokenColors",
        "type": "DetailEdit",
        "description": "Manages ColorPair CRUD operations",
        "controls": [
          {
            "name": "txtName",
            "type": "TextBox",
            "boundProperty": "Name",
            "maxLength": 50,
            "validationType": "String"
          },
          {
            "name": "clrTextColor",
            "type": "ColorPicker",
            "boundProperty": "TextColor",
            "notes": "Stores color as Color.Name string"
          },
          {
            "name": "clrBackColor",
            "type": "ColorPicker",
            "boundProperty": "BackColor",
            "notes": "Stores color as Color.Name string"
          },
          {
            "name": "lblSample",
            "type": "Label",
            "description": "Preview of selected color combination"
          }
        ],
        "grid": {
          "name": "grdColorPair",
          "dataSource": "ColorPairList.GetList(FleetID)",
          "columns": [
            {
              "field": "Name",
              "header": "Color Name",
              "width": 142
            },
            {
              "field": "TextColor",
              "header": "Text Color",
              "width": 100
            },
            {
              "field": "BackColor",
              "header": "Back Color",
              "width": 100
            }
          ],
          "uniqueIdentifier": "ColorPairID",
          "defaultSort": "Name ASC"
        },
        "toolbar": {
          "buttons": [
            "Add",
            "Modify",
            "Remove",
            "Export"
          ]
        },
        "source": "frmBargeTokenColors.vb"
      }
    ],
    "relatedForms": [
      {
        "name": "frmBargeToken",
        "description": "Uses ColorPairs for barge token display configuration"
      }
    ]
  },
  "businessContext": {
    "purpose": "Color pairs are used to define visual appearance of barge tokens in the system. Each fleet can have multiple color pair configurations that are applied to barge tokens for visual distinction and status indication.",
    "useCases": [
      "Define color schemes for different barge token states",
      "Configure fleet-specific color standards",
      "Provide visual distinction in barge token displays",
      "Support accessibility through configurable color combinations"
    ],
    "relatedFeatures": [
      "BargeToken - Uses color pairs for visual display",
      "BargeTokenMap - May use color pairs for map visualization",
      "BargeTokenStatus - May use color pairs for status indication"
    ]
  },
  "securityAndAuditing": {
    "auditedFields": [
      "ColorPairID",
      "FleetID",
      "Name",
      "TextColor",
      "BackColor"
    ],
    "securityArea": "General",
    "notes": "All field changes are tracked through AuditFieldEvent system"
  },
  "extractionMetadata": {
    "extractedFrom": [
      "ColorPair.vb",
      "ColorPairBase.vb",
      "ColorPairList.vb",
      "frmBargeTokenColors.vb"
    ],
    "extractionDate": "2025-12-19",
    "completeness": "Complete",
    "notes": "Full business logic extraction including all properties, business rules, methods, and relationships. The ColorPair entity is relatively simple with straightforward CRUD operations and validation rules focused on ensuring color values are properly configured."
  }
}
