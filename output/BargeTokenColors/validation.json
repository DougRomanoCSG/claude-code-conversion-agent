{
  "entity": "ColorPair",
  "displayName": "Barge Token Colors",
  "formTitle": "Define Colors for Barge Token",
  "formValidation": {
    "method": "SetValidatorExtenderForColorPair",
    "location": "frmBargeTokenColors.vb:546-554",
    "rules": [
      {
        "field": "txtName",
        "property": "Name",
        "rule": "String validation",
        "validationType": "ValidationTypeConstants.String",
        "displayControl": "staStatus",
        "severity": "Error",
        "clientSide": true,
        "notes": "Uses ValidatorExtender control for client-side validation"
      }
    ],
    "maxLengthSettings": {
      "method": "SetMaxLengthsForColorPair",
      "location": "frmBargeTokenColors.vb:560-565",
      "rules": [
        {
          "field": "txtName",
          "property": "Name",
          "maxLength": 50,
          "source": "ColorPair.MaxLength.Name"
        }
      ]
    }
  },
  "businessValidation": {
    "method": "CheckBusinessRules",
    "baseClassLocation": "ColorPairBase.vb:206-236",
    "customLogicLocation": "ColorPair.vb:41-56",
    "rules": [
      {
        "ruleName": "NameIsRequired",
        "property": "Name",
        "condition": "String.IsNullOrEmpty(p_Name)",
        "message": "Name is required.",
        "severity": "Error",
        "alwaysApplies": true,
        "location": "ColorPairBase.vb:211-213",
        "propertyCheck": "(propertyName = p_dispName) OrElse String.IsNullOrEmpty(propertyName)",
        "assertFormat": "BrokenRules.Assert(p_dispName & cIsRequiredName, p_dispName & cIsRequiredDesc, String.IsNullOrEmpty(p_Name))"
      },
      {
        "ruleName": "NameMaxLength",
        "property": "Name",
        "condition": "(p_Name.Length > MaxLength.Name)",
        "message": "Name maximum length is 50.",
        "severity": "Error",
        "alwaysApplies": true,
        "location": "ColorPairBase.vb:214-216",
        "maxLength": 50,
        "propertyCheck": "(propertyName = p_dispName) OrElse String.IsNullOrEmpty(propertyName)",
        "assertFormat": "BrokenRules.Assert(p_dispName & cMaxLengthName, p_dispName & cMaxLengthDesc & MaxLength.Name & \".\", (p_Name.Length > MaxLength.Name))"
      },
      {
        "ruleName": "TextColorIsRequired",
        "property": "TextColor",
        "condition": "String.IsNullOrEmpty(p_TextColor)",
        "message": "TextColor is required.",
        "severity": "Error",
        "alwaysApplies": true,
        "location": "ColorPairBase.vb:220-221",
        "propertyCheck": "(propertyName = p_dispTextColor) OrElse String.IsNullOrEmpty(propertyName)",
        "assertFormat": "BrokenRules.Assert(p_dispTextColor & cIsRequiredName, p_dispTextColor & cIsRequiredDesc, String.IsNullOrEmpty(p_TextColor))"
      },
      {
        "ruleName": "TextColorNotBlank",
        "property": "TextColor",
        "condition": "(p_TextColor = \"0\" OrElse p_TextColor = String.Empty)",
        "message": "TextColor is required.",
        "severity": "Error",
        "alwaysApplies": true,
        "location": "ColorPair.vb:46-48",
        "propertyCheck": "PropertyName = p_dispTextColor OrElse PropertyName = p_dispName OrElse PropertyName = String.Empty",
        "assertFormat": "BrokenRules.Assert(p_dispTextColor & cIsRequiredName, p_dispTextColor & cIsRequiredDesc, (p_TextColor = \"0\" OrElse p_TextColor = String.Empty))",
        "notes": "Additional business rule check to prevent blank value in color controls"
      },
      {
        "ruleName": "TextColorMaxLength",
        "property": "TextColor",
        "condition": "(p_TextColor.Length > MaxLength.TextColor)",
        "message": "TextColor maximum length is 50.",
        "severity": "Error",
        "alwaysApplies": true,
        "location": "ColorPairBase.vb:222-224",
        "maxLength": 50,
        "propertyCheck": "(propertyName = p_dispTextColor) OrElse String.IsNullOrEmpty(propertyName)",
        "assertFormat": "BrokenRules.Assert(p_dispTextColor & cMaxLengthName, p_dispTextColor & cMaxLengthDesc & MaxLength.TextColor & \".\", (p_TextColor.Length > MaxLength.TextColor))"
      },
      {
        "ruleName": "BackColorIsRequired",
        "property": "BackColor",
        "condition": "String.IsNullOrEmpty(p_BackColor)",
        "message": "BackColor is required.",
        "severity": "Error",
        "alwaysApplies": true,
        "location": "ColorPairBase.vb:228-229",
        "propertyCheck": "(propertyName = p_dispBackColor) OrElse String.IsNullOrEmpty(propertyName)",
        "assertFormat": "BrokenRules.Assert(p_dispBackColor & cIsRequiredName, p_dispBackColor & cIsRequiredDesc, String.IsNullOrEmpty(p_BackColor))"
      },
      {
        "ruleName": "BackColorNotBlank",
        "property": "BackColor",
        "condition": "(p_BackColor = \"0\" OrElse p_BackColor = String.Empty)",
        "message": "BackColor is required.",
        "severity": "Error",
        "alwaysApplies": true,
        "location": "ColorPair.vb:50-52",
        "propertyCheck": "PropertyName = p_dispBackColor OrElse PropertyName = p_dispName OrElse PropertyName = String.Empty",
        "assertFormat": "BrokenRules.Assert(p_dispBackColor & cIsRequiredName, p_dispBackColor & cIsRequiredDesc, (p_BackColor = \"0\" OrElse p_BackColor = String.Empty))",
        "notes": "Additional business rule check to prevent blank value in color controls"
      },
      {
        "ruleName": "BackColorMaxLength",
        "property": "BackColor",
        "condition": "(p_BackColor.Length > MaxLength.BackColor)",
        "message": "BackColor maximum length is 50.",
        "severity": "Error",
        "alwaysApplies": true,
        "location": "ColorPairBase.vb:230-232",
        "maxLength": 50,
        "propertyCheck": "(propertyName = p_dispBackColor) OrElse String.IsNullOrEmpty(propertyName)",
        "assertFormat": "BrokenRules.Assert(p_dispBackColor & cMaxLengthName, p_dispBackColor & cMaxLengthDesc & MaxLength.BackColor & \".\", (p_BackColor.Length > MaxLength.BackColor))"
      }
    ]
  },
  "validationTriggers": {
    "propertySetters": [
      {
        "property": "Name",
        "location": "ColorPairBase.vb:113-126",
        "trigger": "MarkDirty() then CheckBusinessRules(p_dispName)",
        "validatedEvent": "txtName_Validated (frmBargeTokenColors.vb:479-498)"
      },
      {
        "property": "TextColor",
        "location": "ColorPairBase.vb:128-141",
        "trigger": "MarkDirty() then CheckBusinessRules(p_dispTextColor)",
        "validatedEvent": "clrTextColor_Validated (frmBargeTokenColors.vb:500-519)"
      },
      {
        "property": "BackColor",
        "location": "ColorPairBase.vb:143-156",
        "trigger": "MarkDirty() then CheckBusinessRules(p_dispBackColor)",
        "validatedEvent": "clrBackColor_Validated (frmBargeTokenColors.vb:521-540)"
      },
      {
        "property": "FleetID",
        "location": "ColorPairBase.vb:99-111",
        "trigger": "MarkDirty() then CheckBusinessRules(p_dispFleetID)",
        "notes": "Set during submit: If _ColorPair.IsNew Then _ColorPair.FleetID = _FleetID (frmBargeTokenColors.vb:242)"
      }
    ],
    "formSubmit": {
      "method": "SubmitNoRefreshClick",
      "location": "frmBargeTokenColors.vb:235-252",
      "baseMethod": "frmBaseDetailEditList.SubmitNoRefreshClick",
      "validationFlow": [
        "Sets FleetID if new record",
        "Calls MyBase.SubmitNoRefreshClick which validates business object",
        "Checks businessObject.IsValid before saving",
        "If valid: saves, clears controls, refreshes list",
        "If invalid: displays broken rules in status bar"
      ]
    }
  },
  "fields": [
    {
      "fieldName": "txtName",
      "propertyName": "Name",
      "label": "Color name:",
      "controlType": "UltraTextEditor",
      "dataType": "String",
      "required": true,
      "maxLength": 50,
      "validationType": "String",
      "defaultValue": "Color 1"
    },
    {
      "fieldName": "clrTextColor",
      "propertyName": "TextColor",
      "label": "Text color:",
      "controlType": "UltraColorPicker",
      "dataType": "String",
      "required": true,
      "maxLength": 50,
      "defaultValue": "Black",
      "notes": "Stores color name as string, validates against '0' or empty"
    },
    {
      "fieldName": "clrBackColor",
      "propertyName": "BackColor",
      "label": "Back color:",
      "controlType": "UltraColorPicker",
      "dataType": "String",
      "required": true,
      "maxLength": 50,
      "defaultValue": "Pink",
      "notes": "Stores color name as string, validates against '0' or empty"
    },
    {
      "fieldName": "lblSample",
      "label": "Sample",
      "controlType": "UltraLabel",
      "notes": "Preview label showing selected text and background colors"
    }
  ],
  "modernValidationMapping": {
    "dataAnnotations": {
      "Name": [
        "[Required(ErrorMessage = \"Name is required.\")]",
        "[StringLength(50, ErrorMessage = \"Name maximum length is 50.\")]"
      ],
      "TextColor": [
        "[Required(ErrorMessage = \"TextColor is required.\")]",
        "[StringLength(50, ErrorMessage = \"TextColor maximum length is 50.\")]"
      ],
      "BackColor": [
        "[Required(ErrorMessage = \"BackColor is required.\")]",
        "[StringLength(50, ErrorMessage = \"BackColor maximum length is 50.\")]"
      ]
    },
    "fluentValidation": {
      "className": "ColorPairValidator",
      "rules": [
        "RuleFor(x => x.Name).NotEmpty().WithMessage(\"Name is required.\").MaximumLength(50).WithMessage(\"Name maximum length is 50.\");",
        "RuleFor(x => x.TextColor).NotEmpty().WithMessage(\"TextColor is required.\").MaximumLength(50).WithMessage(\"TextColor maximum length is 50.\").Must(color => color != \"0\").WithMessage(\"TextColor is required.\");",
        "RuleFor(x => x.BackColor).NotEmpty().WithMessage(\"BackColor is required.\").MaximumLength(50).WithMessage(\"BackColor maximum length is 50.\").Must(color => color != \"0\").WithMessage(\"BackColor is required.\");"
      ]
    },
    "clientSideValidation": {
      "framework": "jquery.validate",
      "rules": {
        "txtName": {
          "required": true,
          "maxlength": 50
        },
        "clrTextColor": {
          "required": true,
          "maxlength": 50
        },
        "clrBackColor": {
          "required": true,
          "maxlength": 50
        }
      },
      "messages": {
        "txtName": {
          "required": "Name is required.",
          "maxlength": "Name maximum length is 50."
        },
        "clrTextColor": {
          "required": "TextColor is required.",
          "maxlength": "TextColor maximum length is 50."
        },
        "clrBackColor": {
          "required": "BackColor is required.",
          "maxlength": "BackColor maximum length is 50."
        }
      }
    }
  },
  "validationPatterns": {
    "requiredFields": [
      "Name",
      "TextColor",
      "BackColor"
    ],
    "stringLengthValidations": [
      {
        "field": "Name",
        "maxLength": 50
      },
      {
        "field": "TextColor",
        "maxLength": 50
      },
      {
        "field": "BackColor",
        "maxLength": 50
      }
    ],
    "customValidations": [
      {
        "field": "TextColor",
        "pattern": "NotBlankColorValue",
        "description": "Color value cannot be '0' or empty string"
      },
      {
        "field": "BackColor",
        "pattern": "NotBlankColorValue",
        "description": "Color value cannot be '0' or empty string"
      }
    ]
  },
  "errorMessageConstants": {
    "cIsRequiredName": "IsRequired",
    "cIsRequiredDesc": " is required.",
    "cMaxLengthName": "MaxLength",
    "cMaxLengthDesc": " maximum length is ",
    "location": "BusinessLogicBase.vb:100-103"
  },
  "extractionMetadata": {
    "sourceFiles": [
      "OnShore/apps/Onshore/Forms/frmBargeTokenColors.vb",
      "OnShore/apps/Onshore/Forms/frmBargeTokenColors.Designer.vb",
      "OnShore/apps/Onshore.BusinessLogic/Business Objects/ColorPair.vb",
      "OnShore/apps/Onshore.BusinessLogic/Business Objects/Base Classes/ColorPairBase.vb",
      "OnShore/apps/Onshore.BusinessLogic/Business Objects/Base Classes/BusinessLogicBase.vb"
    ],
    "extractionDate": "2025-12-19",
    "validationFramework": "CSLA BrokenRules Pattern",
    "formFramework": "WinForms with Infragistics Controls",
    "notes": [
      "ColorPair entity manages text and background color pairs for barge tokens",
      "Uses custom validation to prevent color value of '0' in addition to standard empty checks",
      "Color picker controls store color names as strings, not Color objects",
      "FleetID is set during submit for new records only",
      "Sample label provides real-time preview of color combination",
      "Validation occurs on property setters and during save operation",
      "All fields are required with maximum length of 50 characters"
    ]
  }
}
