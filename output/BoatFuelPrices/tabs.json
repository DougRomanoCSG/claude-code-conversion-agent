{
  "entity": "BoatFuelPrices",
  "detailForm": "frmBoatFuelPricesLocationDetail",
  "tabStructure": {
    "hasTabControl": true,
    "legacyControl": {
      "name": "tabMain",
      "type": "UltraTabControl"
    },
    "modernControl": {
      "type": "Bootstrap Nav Tabs",
      "htmlElement": "ul.nav + div.tab-content",
      "cssClass": "nav nav-tabs",
      "id": "tabMain"
    },
    "tabs": [
      {
        "tabKey": "tabBasic",
        "tabLabel": "Basic",
        "tabOrder": 1,
        "isDefaultActive": true,
        "legacy": {
          "name": "tabBasic",
          "text": "Basic"
        },
        "modern": {
          "id": "tabBasic",
          "navLinkId": "tab-basic",
          "label": "Basic",
          "active": true,
          "cssClasses": "tab-pane fade show active"
        },
        "containedControls": [
          {
            "containerType": "UltraPanel",
            "containerName": "pnlBasicInfo",
            "containerLabel": "Basic Information",
            "collapsible": true,
            "defaultExpanded": true,
            "controls": [
              {
                "name": "cboBoat",
                "type": "UltraCombo",
                "label": "Boat",
                "binding": "BoatID",
                "required": true,
                "modernType": "Select2",
                "modernId": "cboBoat"
              },
              {
                "name": "cboLocation",
                "type": "UltraCombo",
                "label": "Fuel Location",
                "binding": "LocationID",
                "required": false,
                "modernType": "Select2",
                "modernId": "cboLocation"
              },
              {
                "name": "cboFuelType",
                "type": "UltraCombo",
                "label": "Fuel Type",
                "binding": "FuelType",
                "required": true,
                "modernType": "Select2",
                "modernId": "cboFuelType"
              },
              {
                "name": "dtpPriceDate",
                "type": "UltraDateTimePicker",
                "label": "Price Date",
                "binding": "PriceDate",
                "required": true,
                "modernType": "Bootstrap Datepicker",
                "modernId": "dtpPriceDate"
              }
            ]
          },
          {
            "containerType": "UltraPanel",
            "containerName": "pnlPriceDetails",
            "containerLabel": "Price Details",
            "collapsible": true,
            "defaultExpanded": true,
            "controls": [
              {
                "name": "txtPricePerGallon",
                "type": "UltraNumericEditor",
                "label": "Price Per Gallon",
                "binding": "PricePerGallon",
                "required": true,
                "format": "Currency",
                "decimalPlaces": 4,
                "modernType": "Bootstrap Form Input",
                "modernId": "txtPricePerGallon"
              },
              {
                "name": "txtQuantity",
                "type": "UltraNumericEditor",
                "label": "Quantity (Gallons)",
                "binding": "Quantity",
                "required": false,
                "format": "Decimal",
                "decimalPlaces": 2,
                "modernType": "Bootstrap Form Input",
                "modernId": "txtQuantity"
              },
              {
                "name": "txtTotalCost",
                "type": "UltraNumericEditor",
                "label": "Total Cost",
                "binding": "TotalCost",
                "required": false,
                "format": "Currency",
                "decimalPlaces": 2,
                "readOnly": true,
                "calculated": true,
                "calculationFormula": "PricePerGallon * Quantity",
                "modernType": "Bootstrap Form Input",
                "modernId": "txtTotalCost"
              }
            ]
          },
          {
            "containerType": "UltraPanel",
            "containerName": "pnlInvoiceInfo",
            "containerLabel": "Invoice Information",
            "collapsible": true,
            "defaultExpanded": false,
            "controls": [
              {
                "name": "cboVendor",
                "type": "UltraCombo",
                "label": "Vendor",
                "binding": "VendorID",
                "required": false,
                "modernType": "Select2",
                "modernId": "cboVendor"
              },
              {
                "name": "txtInvoiceNumber",
                "type": "UltraTextEditor",
                "label": "Invoice Number",
                "binding": "InvoiceNumber",
                "required": false,
                "maxLength": 50,
                "modernType": "Bootstrap Form Input",
                "modernId": "txtInvoiceNumber"
              },
              {
                "name": "dtpInvoiceDate",
                "type": "UltraDateTimePicker",
                "label": "Invoice Date",
                "binding": "InvoiceDate",
                "required": false,
                "modernType": "Bootstrap Datepicker",
                "modernId": "dtpInvoiceDate"
              },
              {
                "name": "txtPurchaseOrderNumber",
                "type": "UltraTextEditor",
                "label": "Purchase Order Number",
                "binding": "PurchaseOrderNumber",
                "required": false,
                "maxLength": 50,
                "modernType": "Bootstrap Form Input",
                "modernId": "txtPurchaseOrderNumber"
              }
            ]
          },
          {
            "containerType": "Panel",
            "containerName": "pnlAdditionalDetails",
            "containerLabel": "Additional Details",
            "controls": [
              {
                "name": "txtNotes",
                "type": "UltraTextEditor",
                "label": "Notes",
                "binding": "Notes",
                "required": false,
                "maxLength": 500,
                "multiline": true,
                "rows": 4,
                "modernType": "Bootstrap Form Textarea",
                "modernId": "txtNotes"
              },
              {
                "name": "chkIsActive",
                "type": "UltraCheckBox",
                "label": "Is Active",
                "binding": "IsActive",
                "defaultValue": true,
                "modernType": "Bootstrap Checkbox",
                "modernId": "chkIsActive"
              }
            ]
          }
        ],
        "gridControls": [],
        "businessLogic": [
          "Calculate TotalCost when PricePerGallon or Quantity changes",
          "Validate required fields: Boat, FuelType, PriceDate, PricePerGallon",
          "Prevent future dates for PriceDate"
        ]
      },
      {
        "tabKey": "tabHistory",
        "tabLabel": "History",
        "tabOrder": 2,
        "isDefaultActive": false,
        "legacy": {
          "name": "tabHistory",
          "text": "History"
        },
        "modern": {
          "id": "tabHistory",
          "navLinkId": "tab-history",
          "label": "History",
          "active": false,
          "cssClasses": "tab-pane fade"
        },
        "containedControls": [],
        "gridControls": [
          {
            "name": "grdPriceHistory",
            "type": "UltraGrid",
            "label": "Price History",
            "description": "Historical fuel price records for this boat/location/fuel type combination",
            "dataSource": "sp_BoatFuelPrices_GetHistory",
            "modernType": "DataTables",
            "modernId": "grdPriceHistory",
            "columns": [
              {
                "key": "PriceDate",
                "header": "Date",
                "dataType": "Date",
                "format": "MM/dd/yyyy",
                "sortable": true
              },
              {
                "key": "PricePerGallon",
                "header": "Price/Gal",
                "dataType": "Currency",
                "format": "$0.0000",
                "align": "right",
                "sortable": true
              },
              {
                "key": "Quantity",
                "header": "Quantity",
                "dataType": "Decimal",
                "format": "0.00",
                "align": "right",
                "sortable": true
              },
              {
                "key": "TotalCost",
                "header": "Total Cost",
                "dataType": "Currency",
                "format": "$0.00",
                "align": "right",
                "sortable": true
              },
              {
                "key": "VendorName",
                "header": "Vendor",
                "dataType": "String",
                "sortable": true
              },
              {
                "key": "InvoiceNumber",
                "header": "Invoice #",
                "dataType": "String",
                "sortable": true
              }
            ],
            "defaultSort": {
              "column": "PriceDate",
              "direction": "desc"
            },
            "features": [
              "Sorting",
              "Pagination",
              "Export (CSV, Excel)"
            ]
          }
        ],
        "businessLogic": [
          "Load price history for current Boat/Location/FuelType combination",
          "Display historical trends and comparisons",
          "Filter by date range"
        ]
      },
      {
        "tabKey": "tabAnalytics",
        "tabLabel": "Analytics",
        "tabOrder": 3,
        "isDefaultActive": false,
        "legacy": {
          "name": "tabAnalytics",
          "text": "Analytics"
        },
        "modern": {
          "id": "tabAnalytics",
          "navLinkId": "tab-analytics",
          "label": "Analytics",
          "active": false,
          "cssClasses": "tab-pane fade"
        },
        "containedControls": [
          {
            "containerType": "Panel",
            "containerName": "pnlPriceAnalytics",
            "containerLabel": "Price Analytics",
            "controls": [
              {
                "name": "chartPriceTrend",
                "type": "Chart",
                "label": "Price Trend Over Time",
                "chartType": "Line",
                "description": "Line chart showing fuel price trends over time",
                "modernType": "Chart.js",
                "modernId": "chartPriceTrend"
              },
              {
                "name": "lblAveragePrice",
                "type": "Label",
                "label": "Average Price",
                "binding": "AveragePrice",
                "format": "$0.0000",
                "modernType": "Bootstrap Card Stat",
                "modernId": "lblAveragePrice"
              },
              {
                "name": "lblLowestPrice",
                "type": "Label",
                "label": "Lowest Price",
                "binding": "LowestPrice",
                "format": "$0.0000",
                "modernType": "Bootstrap Card Stat",
                "modernId": "lblLowestPrice"
              },
              {
                "name": "lblHighestPrice",
                "type": "Label",
                "label": "Highest Price",
                "binding": "HighestPrice",
                "format": "$0.0000",
                "modernType": "Bootstrap Card Stat",
                "modernId": "lblHighestPrice"
              },
              {
                "name": "lblPriceVariance",
                "type": "Label",
                "label": "Price Variance",
                "binding": "PriceVariance",
                "format": "$0.0000",
                "modernType": "Bootstrap Card Stat",
                "modernId": "lblPriceVariance"
              }
            ]
          },
          {
            "containerType": "Panel",
            "containerName": "pnlVendorComparison",
            "containerLabel": "Vendor Comparison",
            "controls": [
              {
                "name": "chartVendorComparison",
                "type": "Chart",
                "label": "Price Comparison by Vendor",
                "chartType": "Bar",
                "description": "Bar chart comparing average prices across vendors",
                "modernType": "Chart.js",
                "modernId": "chartVendorComparison"
              }
            ]
          }
        ],
        "gridControls": [],
        "businessLogic": [
          "Calculate price statistics (average, min, max, variance)",
          "Generate price trend chart data",
          "Compare prices across different vendors",
          "Show cost savings opportunities"
        ]
      }
    ]
  },
  "sharedControls": {
    "toolbarButtons": [
      {
        "name": "btnSave",
        "type": "UltraButton",
        "label": "Save",
        "icon": "fas fa-save",
        "cssClass": "btn btn-primary",
        "permission": "BoatFuelPricesModify",
        "action": "Submit form to save fuel price record",
        "location": "Form footer",
        "modernId": "btnSave"
      },
      {
        "name": "btnDelete",
        "type": "UltraButton",
        "label": "Delete",
        "icon": "fas fa-trash",
        "cssClass": "btn btn-danger",
        "permission": "BoatFuelPricesModify",
        "action": "Delete current fuel price record",
        "location": "Form footer",
        "visibleWhen": "Edit mode only (BoatFuelPriceID > 0)",
        "confirmationRequired": true,
        "modernId": "btnDelete"
      },
      {
        "name": "btnCancel",
        "type": "UltraButton",
        "label": "Cancel",
        "icon": "fas fa-times",
        "cssClass": "btn btn-secondary",
        "permission": "BoatFuelPricesReadOnly",
        "action": "Cancel and return to search form",
        "location": "Form footer",
        "modernId": "btnCancel"
      }
    ],
    "hiddenFields": [
      {
        "name": "BoatFuelPriceID",
        "type": "Hidden",
        "binding": "BoatFuelPriceID",
        "description": "Primary key for edit operations"
      },
      {
        "name": "CreatedBy",
        "type": "Hidden",
        "binding": "CreatedBy",
        "description": "Audit field - user who created record"
      },
      {
        "name": "CreatedDate",
        "type": "Hidden",
        "binding": "CreatedDate",
        "description": "Audit field - timestamp when record was created"
      },
      {
        "name": "ModifiedBy",
        "type": "Hidden",
        "binding": "ModifiedBy",
        "description": "Audit field - user who last modified record"
      },
      {
        "name": "ModifiedDate",
        "type": "Hidden",
        "binding": "ModifiedDate",
        "description": "Audit field - timestamp when record was last modified"
      }
    ]
  },
  "tabNavigation": {
    "modern": {
      "implementation": "Bootstrap Nav Tabs",
      "html": "<ul class=\"nav nav-tabs\" id=\"tabMain\" role=\"tablist\">\n  <li class=\"nav-item\">\n    <a class=\"nav-link active\" id=\"tab-basic\" data-toggle=\"tab\" href=\"#tabBasic\" role=\"tab\" aria-controls=\"tabBasic\" aria-selected=\"true\">Basic</a>\n  </li>\n  <li class=\"nav-item\">\n    <a class=\"nav-link\" id=\"tab-history\" data-toggle=\"tab\" href=\"#tabHistory\" role=\"tab\" aria-controls=\"tabHistory\" aria-selected=\"false\">History</a>\n  </li>\n  <li class=\"nav-item\">\n    <a class=\"nav-link\" id=\"tab-analytics\" data-toggle=\"tab\" href=\"#tabAnalytics\" role=\"tab\" aria-controls=\"tabAnalytics\" aria-selected=\"false\">Analytics</a>\n  </li>\n</ul>\n<div class=\"tab-content\" id=\"tabMainContent\">\n  <div class=\"tab-pane fade show active\" id=\"tabBasic\" role=\"tabpanel\" aria-labelledby=\"tab-basic\"><!-- Basic tab content --></div>\n  <div class=\"tab-pane fade\" id=\"tabHistory\" role=\"tabpanel\" aria-labelledby=\"tab-history\"><!-- History tab content --></div>\n  <div class=\"tab-pane fade\" id=\"tabAnalytics\" role=\"tabpanel\" aria-labelledby=\"tab-analytics\"><!-- Analytics tab content --></div>\n</div>",
      "javascript": {
        "initialization": "$('#tabMain a').on('click', function (e) { e.preventDefault(); $(this).tab('show'); });",
        "activateTab": "$('#tab-basic').tab('show');",
        "getActiveTab": "$('#tabMain .nav-link.active').attr('href');",
        "onTabSwitch": "$('#tabMain a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) { var activeTab = $(e.target).attr('href'); console.log('Active tab:', activeTab); });"
      }
    },
    "accessibility": {
      "ariaLabels": true,
      "roleAttributes": true,
      "ariaSelected": true,
      "ariaControls": true,
      "keyboardNavigation": "Arrow keys for tab navigation, Enter/Space to activate"
    }
  },
  "layoutNotes": [
    "Basic tab contains all primary data entry fields organized in collapsible panels",
    "History tab displays historical price records in a DataTables grid",
    "Analytics tab shows price trends and vendor comparisons with charts and statistics",
    "All tabs share the same footer buttons (Save, Delete, Cancel)",
    "Tab switching preserves unsaved form data",
    "History and Analytics tabs may load data asynchronously when activated",
    "Consider lazy loading History and Analytics tab content for performance"
  ],
  "migrationNotes": [
    "UltraTabControl maps to Bootstrap Nav Tabs component",
    "Use Bootstrap tab-pane with fade effect for smooth transitions",
    "First tab (Basic) is active by default",
    "Implement data-toggle='tab' for tab switching functionality",
    "History tab grid uses DataTables for consistent UX with search form",
    "Analytics tab requires Chart.js library for visualizations",
    "Ensure tab content is accessible via keyboard navigation",
    "Add ARIA attributes for screen reader support",
    "Consider implementing tab state persistence in sessionStorage",
    "Validate form data on Save regardless of which tab is active"
  ],
  "additionalLibraries": [
    {
      "name": "Chart.js",
      "version": "4.x",
      "purpose": "Analytics tab charts (price trends, vendor comparison)",
      "cdn": "https://cdn.jsdelivr.net/npm/chart.js",
      "npm": "npm install chart.js",
      "requiredFor": "Analytics tab"
    }
  ]
}
