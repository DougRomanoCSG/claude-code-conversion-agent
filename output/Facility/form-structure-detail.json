{
  "formName": "frmFacilityDetail",
  "implements": ["IBaseDetailEdit"],
  "baseForm": "frmBaseDetailEditList",
  "businessObjects": {
    "primary": "Location",
    "children": [
      {
        "name": "FacilityLocation",
        "relationship": "Location.FacilityLocation"
      },
      {
        "name": "FacilityBerth",
        "relationship": "Location.FacilityLocation.FacilityBerths",
        "collection": true
      },
      {
        "name": "FacilityStatus",
        "relationship": "Location.FacilityStatuses",
        "collection": true
      }
    ]
  },
  "tabs": [
    {
      "key": "Details",
      "name": "tabPageDetails",
      "displayName": "Details",
      "isDefault": true
    },
    {
      "key": "Status",
      "name": "tabPageStatus",
      "displayName": "Status"
    },
    {
      "key": "Berths",
      "name": "tabPageBertsh",
      "displayName": "Berths"
    },
    {
      "key": "NDC Data",
      "name": "tabPageNdcData",
      "displayName": "NDC Data"
    }
  ],
  "controls": {
    "location": [
      {
        "name": "txtName",
        "type": "UltraTextEditor",
        "category": "Details",
        "label": "Name",
        "dataBinding": "_Location.Name",
        "validation": "String",
        "required": true,
        "maxLength": "Location.MaxLength.Name",
        "isBold": true,
        "events": ["Validated"]
      },
      {
        "name": "txtShortName",
        "type": "UltraTextEditor",
        "category": "Details",
        "label": "Short name",
        "dataBinding": "_Location.ShortName",
        "validation": "String",
        "required": false,
        "maxLength": "Location.MaxLength.ShortName",
        "events": ["Validated"]
      },
      {
        "name": "txtLocationNote",
        "type": "UltraTextEditor",
        "category": "Details",
        "label": "Note",
        "dataBinding": "_Location.Note",
        "validation": "String",
        "required": false,
        "maxLength": "Location.MaxLength.Note",
        "multiline": true,
        "events": ["Validated"],
        "groupBox": "grpNote"
      },
      {
        "name": "chkIsActive",
        "type": "UltraCheckEditor",
        "category": "Details",
        "label": "Is Active",
        "dataBinding": "_Location.IsActive",
        "validation": "Boolean",
        "required": false,
        "events": ["Validated"]
      },
      {
        "name": "cboRiver",
        "type": "UltraCombo",
        "category": "Details",
        "label": "River",
        "dataBinding": "_Location.River",
        "validation": "Object",
        "required": false,
        "populationMethod": "PopulateRiverCombo",
        "events": ["Validated"]
      },
      {
        "name": "txtMile",
        "type": "UltraTextEditor",
        "category": "Details",
        "label": "Mile",
        "dataBinding": "_Location.Mile",
        "validation": "Decimal",
        "required": false,
        "events": ["Validated"]
      }
    ],
    "facilityLocation": [
      {
        "name": "txtBargeExCode",
        "type": "UltraTextEditor",
        "category": "Details",
        "label": "BargeEx code",
        "dataBinding": "_Location.FacilityLocation.BargeExCode",
        "validation": "String",
        "required": false,
        "maxLength": "FacilityLocation.MaxLength.BargeExCode",
        "events": ["Validated"]
      },
      {
        "name": "cboBargeExLocationType",
        "type": "UltraCombo",
        "category": "Details",
        "label": "Facility type",
        "dataBinding": "_Location.FacilityLocation.BargeExLocationType",
        "validation": "ValidationList",
        "validationType": "BargeExLocationType",
        "required": false,
        "populationMethod": "PopulateValidationListCombo",
        "events": ["Validated", "ValueChanged"],
        "conditionalLogic": "Enables/disables Lock/Gauge Location controls"
      },
      {
        "name": "cboBank",
        "type": "UltraCombo",
        "category": "Details",
        "label": "Bank",
        "dataBinding": "_Location.FacilityLocation.Bank",
        "validation": "ValidationList",
        "validationType": "RiverBank",
        "required": false,
        "populationMethod": "PopulateValidationListCombo",
        "events": ["Validated"]
      },
      {
        "name": "txtLockUsaceName",
        "type": "UltraTextEditor",
        "category": "Details",
        "label": "USACE Name",
        "dataBinding": "_Location.FacilityLocation.LockUsaceName",
        "validation": "String",
        "required": false,
        "maxLength": "FacilityLocation.MaxLength.LockUsaceName",
        "conditionalEnabled": "BargeExLocationType = Lock OR GaugeLocation",
        "events": ["Validated"],
        "groupBox": "grpLockGaugeLocation"
      },
      {
        "name": "txtLockFloodStage",
        "type": "UltraTextEditor",
        "category": "Details",
        "label": "Flood Stage",
        "dataBinding": "_Location.FacilityLocation.LockFloodStage",
        "validation": "Decimal",
        "required": false,
        "conditionalEnabled": "BargeExLocationType = Lock OR GaugeLocation",
        "events": ["Validated"],
        "groupBox": "grpLockGaugeLocation"
      },
      {
        "name": "txtLockPoolStage",
        "type": "UltraTextEditor",
        "category": "Details",
        "label": "Pool Stage",
        "dataBinding": "_Location.FacilityLocation.LockPoolStage",
        "validation": "Decimal",
        "required": false,
        "conditionalEnabled": "BargeExLocationType = Lock OR GaugeLocation",
        "events": ["Validated"],
        "groupBox": "grpLockGaugeLocation"
      },
      {
        "name": "txtLockLowWater",
        "type": "UltraTextEditor",
        "category": "Details",
        "label": "Low Water",
        "dataBinding": "_Location.FacilityLocation.LockLowWater",
        "validation": "Decimal",
        "required": false,
        "conditionalEnabled": "BargeExLocationType = Lock OR GaugeLocation",
        "events": ["Validated"],
        "groupBox": "grpLockGaugeLocation"
      },
      {
        "name": "txtLockNormalCurrent",
        "type": "UltraTextEditor",
        "category": "Details",
        "label": "Normal Current",
        "dataBinding": "_Location.FacilityLocation.LockNormalCurrent",
        "validation": "Decimal",
        "required": false,
        "conditionalEnabled": "BargeExLocationType = Lock OR GaugeLocation",
        "events": ["Validated"],
        "groupBox": "grpLockGaugeLocation"
      },
      {
        "name": "txtLockHighFlow",
        "type": "UltraTextEditor",
        "category": "Details",
        "label": "High Flow",
        "dataBinding": "_Location.FacilityLocation.LockHighFlow",
        "validation": "Decimal",
        "required": false,
        "conditionalEnabled": "BargeExLocationType = Lock OR GaugeLocation",
        "events": ["Validated"],
        "groupBox": "grpLockGaugeLocation"
      },
      {
        "name": "txtLockHighWater",
        "type": "UltraTextEditor",
        "category": "Details",
        "label": "High Water",
        "dataBinding": "_Location.FacilityLocation.LockHighWater",
        "validation": "Decimal",
        "required": false,
        "conditionalEnabled": "BargeExLocationType = Lock OR GaugeLocation",
        "events": ["Validated"],
        "groupBox": "grpLockGaugeLocation"
      },
      {
        "name": "txtLockCatastrophicLevel",
        "type": "UltraTextEditor",
        "category": "Details",
        "label": "Catastrophic Level",
        "dataBinding": "_Location.FacilityLocation.LockCatastrophicLevel",
        "validation": "Decimal",
        "required": false,
        "conditionalEnabled": "BargeExLocationType = Lock OR GaugeLocation",
        "events": ["Validated"],
        "groupBox": "grpLockGaugeLocation"
      },
      {
        "name": "txtNdcName",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "NDC Name",
        "dataBinding": "_Location.FacilityLocation.NdcName",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpAddress"
      },
      {
        "name": "txtNdcLocationDescription",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "Location Description",
        "dataBinding": "_Location.FacilityLocation.NdcLocationDescription",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpAddress"
      },
      {
        "name": "txtNdcAddress",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "Address",
        "dataBinding": "_Location.FacilityLocation.NdcAddress",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpAddress"
      },
      {
        "name": "txtNdcCounty",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "County",
        "dataBinding": "_Location.FacilityLocation.NdcCounty",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpAddress"
      },
      {
        "name": "txtNdcCountyFips",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "County FIPS",
        "dataBinding": "_Location.FacilityLocation.NdcCountyFips",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpAddress"
      },
      {
        "name": "txtNdcTown",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "Town",
        "dataBinding": "_Location.FacilityLocation.NdcTown",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpAddress"
      },
      {
        "name": "txtNdcState",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "State",
        "dataBinding": "_Location.FacilityLocation.NdcState",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpAddress"
      },
      {
        "name": "txtNdcWaterway",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "Waterway",
        "dataBinding": "_Location.FacilityLocation.NdcWaterway",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpAddress"
      },
      {
        "name": "txtNdcPort",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "Port",
        "dataBinding": "_Location.FacilityLocation.NdcPort",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpAddress"
      },
      {
        "name": "txtNdcLatitude",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "Latitude",
        "dataBinding": "_Location.FacilityLocation.NdcLatitude",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpAddress"
      },
      {
        "name": "txtNdcLongitude",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "Longitude",
        "dataBinding": "_Location.FacilityLocation.NdcLongitude",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpAddress"
      },
      {
        "name": "txtNdcOperator",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "Operator",
        "dataBinding": "_Location.FacilityLocation.NdcOperator",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpOperator"
      },
      {
        "name": "txtNdcOwner",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "Owner",
        "dataBinding": "_Location.FacilityLocation.NdcOwner",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpOperator"
      },
      {
        "name": "txtNdcPurpose",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "Purpose",
        "dataBinding": "_Location.FacilityLocation.NdcPurpose",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpPurpose"
      },
      {
        "name": "txtNdcRemark",
        "type": "UltraTextEditor",
        "category": "NDC Data",
        "label": "Remark",
        "dataBinding": "_Location.FacilityLocation.NdcRemark",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageNdcData",
        "groupBox": "grpPurpose"
      }
    ],
    "facilityBerth": [
      {
        "name": "txtBerthName",
        "type": "UltraTextEditor",
        "category": "Berths",
        "label": "Berth Name",
        "dataBinding": "_FacilityBerth.Name",
        "validation": "String",
        "required": true,
        "maxLength": "FacilityBerth.MaxLength.Name",
        "events": ["Validated"],
        "tab": "tabPageBertsh",
        "groupBox": "grpBerth"
      },
      {
        "name": "txtShipName",
        "type": "UltraTextEditor",
        "category": "Berths",
        "label": "Current Ship",
        "dataBinding": "_FacilityBerth.ShipName",
        "validation": null,
        "required": false,
        "readonly": true,
        "tab": "tabPageBertsh",
        "groupBox": "grpBerth"
      }
    ],
    "facilityStatus": [
      {
        "name": "dtStartDate",
        "type": "UltraDateTimeEditor",
        "category": "Status",
        "label": "Start Date/Time",
        "dataBinding": "_FacilityStatus.StartDateTime",
        "validation": "DateTime",
        "required": true,
        "events": ["Validated"],
        "tab": "tabPageStatus",
        "groupBox": "grpStatus",
        "pairedControl": "cboStartTime"
      },
      {
        "name": "cboStartTime",
        "type": "UltraCombo",
        "category": "Status",
        "label": "Start Time",
        "dataBinding": "_FacilityStatus.StartDateTime",
        "validation": "Time",
        "required": false,
        "populationMethod": "InfragisticsHelper.PopulateTimeCombo",
        "events": ["Validated"],
        "tab": "tabPageStatus",
        "groupBox": "grpStatus",
        "pairedControl": "dtStartDate"
      },
      {
        "name": "cboFacilityStatus",
        "type": "UltraCombo",
        "category": "Status",
        "label": "Status",
        "dataBinding": "_FacilityStatus.Status",
        "validation": "ValidationList",
        "validationType": "FacilityStatus",
        "required": true,
        "populationMethod": "PopulateValidationListCombo",
        "events": ["Validated"],
        "tab": "tabPageStatus",
        "groupBox": "grpStatus"
      },
      {
        "name": "txtStatusNote",
        "type": "UltraTextEditor",
        "category": "Status",
        "label": "Note",
        "dataBinding": "_FacilityStatus.Note",
        "validation": "String",
        "required": false,
        "maxLength": "FacilityStatus.MaxLength.Note",
        "events": ["Validated", "EditorButtonClick"],
        "hasEditorButton": true,
        "editorButtonAction": "Opens frmTextEditor for multi-line editing",
        "tab": "tabPageStatus",
        "groupBox": "grpStatus"
      },
      {
        "name": "dtEndDate",
        "type": "UltraDateTimeEditor",
        "category": "Status",
        "label": "End Date/Time",
        "dataBinding": "_FacilityStatus.EndDateTime",
        "validation": "DateTime",
        "required": false,
        "events": ["Validated"],
        "tab": "tabPageStatus",
        "groupBox": "grpStatus",
        "pairedControl": "cboEndTime"
      },
      {
        "name": "cboEndTime",
        "type": "UltraCombo",
        "category": "Status",
        "label": "End Time",
        "dataBinding": "_FacilityStatus.EndDateTime",
        "validation": "Time",
        "required": false,
        "populationMethod": "InfragisticsHelper.SetTimeCombo",
        "events": ["Validated"],
        "tab": "tabPageStatus",
        "groupBox": "grpStatus",
        "pairedControl": "dtEndDate"
      }
    ]
  },
  "grids": [
    {
      "name": "grdBerths",
      "type": "UltraGrid",
      "category": "Berths",
      "tab": "tabPageBertsh",
      "uniqueIdentifier": "FacilityBerthID",
      "dataSource": "_Location.FacilityLocation.FacilityBerths",
      "initialSort": {
        "column": "Name",
        "direction": "Ascending"
      },
      "columns": [
        {
          "key": "Name",
          "header": "Berth Name",
          "width": 200,
          "alignment": "Left"
        },
        {
          "key": "ShipName",
          "header": "Current Ship",
          "width": 211,
          "alignment": "Left"
        }
      ],
      "events": [
        "DoubleClick -> ItemModify",
        "AfterSelectChange -> SetToolState"
      ],
      "columnChooserEnabled": false
    },
    {
      "name": "grdFacilityStatus",
      "type": "UltraGrid",
      "category": "Status",
      "tab": "tabPageStatus",
      "uniqueIdentifier": "FacilityStatusID",
      "dataSource": "_Location.FacilityStatuses",
      "initialSort": {
        "column": "StartDateTime",
        "direction": "Descending"
      },
      "autoFitStyle": "ExtendLastColumn",
      "columns": [
        {
          "key": "StartDateTime",
          "header": "Start Date/Time",
          "width": 110,
          "alignment": "Left",
          "customComparer": "DateTimeSortComparer"
        },
        {
          "key": "EndDateTime",
          "header": "End Date/Time",
          "width": 110,
          "alignment": "Left",
          "customComparer": "DateTimeSortComparer"
        },
        {
          "key": "Status",
          "header": "Status",
          "width": 150,
          "alignment": "Left"
        },
        {
          "key": "Note",
          "header": "Note",
          "width": 150,
          "alignment": "Left"
        }
      ],
      "events": [
        "DoubleClick -> ItemModify",
        "AfterSelectChange -> SetToolState"
      ],
      "columnChooserEnabled": false
    }
  ],
  "buttons": [
    {
      "name": "btnSubmit",
      "type": "UltraButton",
      "category": "Main",
      "label": "Submit",
      "buttonType": "Submit",
      "events": ["Click -> btnSubmit_Click"],
      "action": "Saves main form changes, refreshes fleet list and berths"
    },
    {
      "name": "btnCancel",
      "type": "UltraButton",
      "category": "Main",
      "label": "Cancel",
      "buttonType": "Cancel",
      "events": ["Click -> btnCancel_Click"],
      "action": "Cancels form edit mode"
    },
    {
      "name": "btnSetBerth",
      "type": "UltraButton",
      "category": "Berths",
      "label": "Set",
      "buttonType": "Submit",
      "events": ["Click -> btnSetBerth_Click"],
      "action": "Saves berth changes to collection",
      "tab": "tabPageBertsh",
      "groupBox": "grpBerth"
    },
    {
      "name": "btnCancelEditBerth",
      "type": "UltraButton",
      "category": "Berths",
      "label": "Cancel",
      "buttonType": "CancelEdit",
      "events": ["Click -> btnCancelEditBerth_Click"],
      "action": "Cancels berth edit",
      "tab": "tabPageBertsh",
      "groupBox": "grpBerth"
    },
    {
      "name": "btnSetStatus",
      "type": "UltraButton",
      "category": "Status",
      "label": "Set",
      "buttonType": "Submit",
      "events": ["Click -> btnSetStatus_Click"],
      "action": "Saves status changes to collection",
      "tab": "tabPageStatus",
      "groupBox": "grpStatus"
    },
    {
      "name": "btnCancelEditStatus",
      "type": "UltraButton",
      "category": "Status",
      "label": "Cancel",
      "buttonType": "CancelEdit",
      "events": ["Click -> btnCancelEditStatus_Click"],
      "action": "Cancels status edit",
      "tab": "tabPageStatus",
      "groupBox": "grpStatus"
    }
  ],
  "toolbars": [
    {
      "name": "BerthToolbarManager",
      "type": "UltraToolbarsManager",
      "category": "Berths",
      "tab": "tabPageBertsh",
      "tools": [
        {
          "key": "AddBerth",
          "type": "ButtonTool",
          "caption": "Add",
          "buttonType": "Add",
          "icon": "Add",
          "action": "ItemAddBerth",
          "events": ["ToolClick -> BerthToolbarManager_ToolClick"]
        },
        {
          "key": "ModifyBerth",
          "type": "ButtonTool",
          "caption": "Modify",
          "buttonType": "Open",
          "icon": "Edit",
          "action": "ItemModify(grdBerths)",
          "events": ["ToolClick -> BerthToolbarManager_ToolClick"]
        },
        {
          "key": "RemoveBerth",
          "type": "ButtonTool",
          "caption": "Remove",
          "buttonType": "Remove",
          "icon": "Delete",
          "action": "ItemRemoveBerth",
          "events": ["ToolClick -> BerthToolbarManager_ToolClick"]
        }
      ]
    },
    {
      "name": "StatusToolbarsManager",
      "type": "UltraToolbarsManager",
      "category": "Status",
      "tab": "tabPageStatus",
      "tools": [
        {
          "key": "AddStatus",
          "type": "ButtonTool",
          "caption": "Add",
          "buttonType": "Add",
          "icon": "Add",
          "action": "ItemAddStatus",
          "events": ["ToolClick -> StatusToolbarsManager_ToolClick"]
        },
        {
          "key": "ModifyStatus",
          "type": "ButtonTool",
          "caption": "Modify",
          "buttonType": "Open",
          "icon": "Edit",
          "action": "ItemModify(grdFacilityStatus)",
          "events": ["ToolClick -> StatusToolbarsManager_ToolClick"]
        },
        {
          "key": "RemoveStatus",
          "type": "ButtonTool",
          "caption": "Remove",
          "buttonType": "Remove",
          "icon": "Delete",
          "action": "ItemRemoveStatus",
          "events": ["ToolClick -> StatusToolbarsManager_ToolClick"]
        },
        {
          "key": "ExportStatus",
          "type": "ButtonTool",
          "caption": "Export",
          "buttonType": "Open",
          "icon": "Export",
          "action": "Main.ExportGrid(grdFacilityStatus)",
          "events": ["ToolClick -> StatusToolbarsManager_ToolClick"]
        }
      ]
    }
  ],
  "dropdowns": [
    {
      "control": "cboRiver",
      "populationMethod": "PopulateRiverCombo",
      "parameters": ["includeBlank: true", "includeInactive: false", "selectedValue: _Location.River"]
    },
    {
      "control": "cboBargeExLocationType",
      "populationMethod": "PopulateValidationListCombo",
      "validationType": "BargeExLocationType",
      "parameters": ["includeBlank: true", "includeInactive: false", "selectedValue: _Location.FacilityLocation.BargeExLocationType"]
    },
    {
      "control": "cboBank",
      "populationMethod": "PopulateValidationListCombo",
      "validationType": "RiverBank",
      "parameters": ["includeBlank: true", "includeInactive: false", "selectedValue: _Location.FacilityLocation.Bank"]
    },
    {
      "control": "cboStartTime",
      "populationMethod": "InfragisticsHelper.PopulateTimeCombo",
      "parameters": []
    },
    {
      "control": "cboEndTime",
      "populationMethod": "InfragisticsHelper.PopulateTimeCombo",
      "parameters": []
    },
    {
      "control": "cboFacilityStatus",
      "populationMethod": "PopulateValidationListCombo",
      "validationType": "FacilityStatus",
      "parameters": ["includeBlank: true", "includeInactive: false"]
    }
  ],
  "validationRules": {
    "location": [
      {
        "field": "txtName",
        "validationType": "String",
        "required": true,
        "message": "Facility name is required"
      },
      {
        "field": "txtShortName",
        "validationType": "String",
        "required": false
      },
      {
        "field": "txtLocationNote",
        "validationType": "String",
        "required": false
      },
      {
        "field": "txtMile",
        "validationType": "Decimal",
        "required": false
      }
    ],
    "facilityLocation": [
      {
        "field": "txtBargeExCode",
        "validationType": "String",
        "required": false
      },
      {
        "field": "txtLockUsaceName",
        "validationType": "String",
        "required": false
      },
      {
        "field": "txtLockFloodStage",
        "validationType": "Decimal",
        "required": false
      },
      {
        "field": "txtLockPoolStage",
        "validationType": "Decimal",
        "required": false
      },
      {
        "field": "txtLockLowWater",
        "validationType": "Decimal",
        "required": false
      },
      {
        "field": "txtLockNormalCurrent",
        "validationType": "Decimal",
        "required": false
      },
      {
        "field": "txtLockHighFlow",
        "validationType": "Decimal",
        "required": false
      },
      {
        "field": "txtLockHighWater",
        "validationType": "Decimal",
        "required": false
      },
      {
        "field": "txtLockCatastrophicLevel",
        "validationType": "Decimal",
        "required": false
      }
    ],
    "facilityBerth": [
      {
        "field": "txtBerthName",
        "validationType": "String",
        "required": true,
        "message": "Berth name is required"
      }
    ],
    "facilityStatus": [
      {
        "field": "dtStartDate",
        "validationType": "DateTime",
        "required": true,
        "message": "Start date is required"
      },
      {
        "field": "cboStartTime",
        "validationType": "Time",
        "required": false
      },
      {
        "field": "cboFacilityStatus",
        "validationType": "ValidationList",
        "required": true,
        "message": "Status is required"
      },
      {
        "field": "txtStatusNote",
        "validationType": "String",
        "required": false
      },
      {
        "field": "dtEndDate",
        "validationType": "DateTime",
        "required": false
      },
      {
        "field": "cboEndTime",
        "validationType": "Time",
        "required": false
      }
    ]
  },
  "conditionalLogic": [
    {
      "trigger": "cboBargeExLocationType.ValueChanged",
      "action": "EnableDisableLockControls",
      "description": "When BargeExLocationType = 'Lock' OR 'Gauge Location', enable Lock/Gauge fields; otherwise disable and clear them",
      "affectedControls": [
        "txtLockUsaceName",
        "txtLockFloodStage",
        "txtLockPoolStage",
        "txtLockLowWater",
        "txtLockNormalCurrent",
        "txtLockHighFlow",
        "txtLockHighWater",
        "txtLockCatastrophicLevel"
      ]
    },
    {
      "trigger": "btnSubmit.Click",
      "action": "ClearUnusedFields",
      "description": "Before submit, clear Lock fields if BargeExLocationType is not 'Lock' or 'Gauge Location'"
    },
    {
      "trigger": "Tab selection",
      "action": "LoadTabControls",
      "description": "Lazy load grid data when user first navigates to Berths or Status tab"
    },
    {
      "trigger": "IsEditingChild = true",
      "action": "EnableDisableControls",
      "description": "When editing a child object (Berth or Status), disable main form tabs and controls"
    }
  ],
  "eventHandlers": {
    "form": [
      {
        "event": "Load",
        "handler": "frmFacilityDetail_Load",
        "actions": [
          "FormatControls",
          "LoadControlsForLocation",
          "LoadControlsForFacilityLocation",
          "EnableDisableControls",
          "Set focus to txtName"
        ]
      },
      {
        "event": "tabMain.SelectedTabChanged",
        "handler": "tabMain_SelectedTabChanged",
        "actions": [
          "LoadTabControls (lazy load grid data)"
        ]
      }
    ],
    "buttons": [
      {
        "control": "btnSubmit",
        "event": "Click",
        "handler": "btnSubmit_Click",
        "actions": [
          "ClearUnusedFields",
          "SubmitNoRefreshClick",
          "Main.Notifier.UserFleetsChanging",
          "Main.Notifier.BerthsChanging"
        ]
      },
      {
        "control": "btnCancel",
        "event": "Click",
        "handler": "btnCancel_Click",
        "actions": ["CancelClick"]
      },
      {
        "control": "btnSetBerth",
        "event": "Click",
        "handler": "btnSetBerth_Click",
        "actions": ["SetClickListAndDetail(_FacilityBerth)"]
      },
      {
        "control": "btnCancelEditBerth",
        "event": "Click",
        "handler": "btnCancelEditBerth_Click",
        "actions": ["CancelClickListAndDetail(_FacilityBerth)"]
      },
      {
        "control": "btnSetStatus",
        "event": "Click",
        "handler": "btnSetStatus_Click",
        "actions": ["SetClickListAndDetail(_FacilityStatus)"]
      },
      {
        "control": "btnCancelEditStatus",
        "event": "Click",
        "handler": "btnCancelEditStatus_Click",
        "actions": ["CancelClickListAndDetail(_FacilityStatus)"]
      }
    ],
    "toolbars": [
      {
        "manager": "BerthToolbarManager",
        "event": "ToolClick",
        "handler": "BerthToolbarManager_ToolClick",
        "tools": {
          "AddBerth": "ItemAddBerth",
          "ModifyBerth": "ItemModify(grdBerths)",
          "RemoveBerth": "ItemRemoveBerth"
        }
      },
      {
        "manager": "StatusToolbarsManager",
        "event": "ToolClick",
        "handler": "StatusToolbarsManager_ToolClick",
        "tools": {
          "AddStatus": "ItemAddStatus",
          "ModifyStatus": "ItemModify(grdFacilityStatus)",
          "RemoveStatus": "ItemRemoveStatus",
          "ExportStatus": "Main.ExportGrid(grdFacilityStatus)"
        }
      }
    ],
    "textEditors": [
      {
        "control": "txtStatusNote",
        "event": "EditorButtonClick",
        "handler": "txtStatusNote_EditorButtonClick",
        "actions": ["Opens frmTextEditor for multi-line note editing"]
      }
    ]
  },
  "groups": [
    {
      "name": "grpNote",
      "type": "UltraGroupBox",
      "tab": "tabPageDetails",
      "caption": "Note",
      "controls": ["txtLocationNote"]
    },
    {
      "name": "grpLockGaugeLocation",
      "type": "UltraGroupBox",
      "tab": "tabPageDetails",
      "caption": "Lock/Gauge Location Information",
      "controls": [
        "txtLockUsaceName",
        "txtLockFloodStage",
        "txtLockPoolStage",
        "txtLockLowWater",
        "txtLockNormalCurrent",
        "txtLockHighFlow",
        "txtLockHighWater",
        "txtLockCatastrophicLevel"
      ],
      "conditionalEnabled": "BargeExLocationType = Lock OR GaugeLocation"
    },
    {
      "name": "grpAddress",
      "type": "UltraGroupBox",
      "tab": "tabPageNdcData",
      "caption": "Address Information",
      "controls": [
        "txtNdcName",
        "txtNdcLocationDescription",
        "txtNdcAddress",
        "txtNdcTown",
        "txtNdcState",
        "txtNdcCounty",
        "txtNdcCountyFips",
        "txtNdcWaterway",
        "txtNdcPort",
        "txtNdcLatitude",
        "txtNdcLongitude"
      ]
    },
    {
      "name": "grpOperator",
      "type": "UltraGroupBox",
      "tab": "tabPageNdcData",
      "caption": "Operator Information",
      "controls": ["txtNdcOperator", "txtNdcOwner"]
    },
    {
      "name": "grpPurpose",
      "type": "UltraGroupBox",
      "tab": "tabPageNdcData",
      "caption": "Purpose Information",
      "controls": ["txtNdcPurpose", "txtNdcRemark"]
    },
    {
      "name": "grpBerth",
      "type": "UltraGroupBox",
      "tab": "tabPageBertsh",
      "caption": "Berth Edit",
      "controls": ["txtBerthName", "txtShipName", "btnSetBerth", "btnCancelEditBerth"]
    },
    {
      "name": "grpStatus",
      "type": "UltraGroupBox",
      "tab": "tabPageStatus",
      "caption": "Status Edit",
      "controls": [
        "dtStartDate",
        "cboStartTime",
        "cboFacilityStatus",
        "txtStatusNote",
        "dtEndDate",
        "cboEndTime",
        "btnSetStatus",
        "btnCancelEditStatus"
      ]
    }
  ],
  "panels": [
    {
      "name": "pnlFacilityDetail",
      "type": "UltraPanel",
      "dockStyle": "Fill",
      "controls": ["tabMain", "chkIsActive", "btnSubmit", "btnCancel"]
    },
    {
      "name": "pnlDetails",
      "type": "UltraPanel",
      "tab": "tabPageDetails",
      "dockStyle": "Fill"
    },
    {
      "name": "pnlBerths",
      "type": "UltraPanel",
      "tab": "tabPageBertsh",
      "dockStyle": "Fill"
    },
    {
      "name": "pnlStatus",
      "type": "UltraPanel",
      "tab": "tabPageStatus",
      "dockStyle": "Fill"
    },
    {
      "name": "pnlNdcData",
      "type": "UltraPanel",
      "tab": "tabPageNdcData",
      "dockStyle": "Fill"
    }
  ],
  "businessLogic": {
    "childCollectionManagement": {
      "facilityBerths": {
        "addMethod": "ItemAddBerth -> BusinessLogic.FacilityBerths.NewFacilityBerth",
        "modifyMethod": "ItemModify -> _FacilityBerth.BeginEdit()",
        "removeMethod": "ItemRemoveBerth -> _Location.FacilityLocation.FacilityBerths.Remove",
        "saveMethod": "SetClickListAndDetail -> _Location.FacilityLocation.FacilityBerths.Add",
        "cancelMethod": "CancelClickListAndDetail -> _FacilityBerth.CancelEdit()"
      },
      "facilityStatuses": {
        "addMethod": "ItemAddStatus -> BusinessLogic.FacilityStatuses.NewFacilityStatus",
        "modifyMethod": "ItemModify -> _FacilityStatus.BeginEdit()",
        "removeMethod": "ItemRemoveStatus -> _Location.FacilityStatuses.Remove",
        "saveMethod": "SetClickListAndDetail -> _Location.FacilityStatuses.Add",
        "cancelMethod": "CancelClickListAndDetail -> _FacilityStatus.CancelEdit()"
      }
    },
    "initializationParameters": {
      "standard": "Initialize(businessObject As BusinessLogicBase)",
      "withPresets": "Initialize(businessObject, facilityName, bargeExCode)",
      "description": "Optional parameters allow pre-filling Name and BargeEx Code (used when opened from frmBargeExVendorDocInboxSearch)"
    },
    "notifications": [
      "Main.Notifier.UserFleetsChanging() - Refresh fleet list combo",
      "Main.Notifier.BerthsChanging() - Update Barge Positions form"
    ]
  },
  "notes": {
    "architecture": "Master-Detail-Edit pattern with child collections (Berths, Statuses)",
    "lazyLoading": "Grid data for Berths and Status tabs loaded only when user first visits tab",
    "securityIntegration": "Uses ControlAuthorization for button types and functional area access",
    "validatorExtender": "Uses ValidatorExtender for client-side validation with DisplayControl = staStatus",
    "ndcDataReadonly": "All NDC (National Data Center) fields are read-only reference data",
    "conditionalFields": "Lock/Gauge fields only enabled when BargeExLocationType is 'Lock' or 'Gauge Location'",
    "dateTimePairing": "Start/End dates paired with time combos using InfragisticsHelper.SetCombinedDateTimeProp",
    "gridSorting": "Custom DateTimeSortComparer for StartDateTime/EndDateTime columns",
    "multilineEditor": "txtStatusNote has EditorButton that opens frmTextEditor for extended text entry"
  }
}
