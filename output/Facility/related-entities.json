{
  "entity": "Facility",
  "mainEntity": "Location",
  "childEntities": [
    {
      "name": "FacilityBerth",
      "collectionName": "FacilityBerths",
      "parentEntity": "FacilityLocation",
      "relationshipPath": "Location.FacilityLocation.FacilityBerths",
      "parentKey": "FacilityLocationID",
      "childKey": "FacilityBerthID",
      "properties": [
        {
          "name": "Name",
          "type": "String",
          "displayName": "Berth Name",
          "validationType": "String",
          "hasMaxLength": true
        },
        {
          "name": "ShipName",
          "type": "String",
          "displayName": "Current Ship",
          "isReadOnly": true
        }
      ],
      "crudMethods": {
        "add": {
          "methodName": "ItemAddBerth",
          "location": "frmFacilityDetail.vb:600",
          "buttonKey": "AddBerth",
          "implementation": "Creates new FacilityBerth via BusinessLogic.FacilityBerths.NewFacilityBerth"
        },
        "modify": {
          "methodName": "ItemModify",
          "location": "frmFacilityDetail.vb:465",
          "buttonKey": "ModifyBerth",
          "implementation": "Gets selected FacilityBerth from grid, calls BeginEdit"
        },
        "remove": {
          "methodName": "ItemRemoveBerth",
          "location": "frmFacilityDetail.vb:626",
          "buttonKey": "RemoveBerth",
          "implementation": "Removes FacilityBerth from _Location.FacilityLocation.FacilityBerths collection"
        },
        "save": {
          "methodName": "SetClickListAndDetail",
          "location": "frmFacilityDetail.vb:363",
          "buttonName": "btnSetBerth",
          "implementation": "Adds to collection if new, refreshes grid, clears controls"
        },
        "cancel": {
          "methodName": "CancelClickListAndDetail",
          "location": "frmFacilityDetail.vb:404",
          "buttonName": "btnCancelEditBerth",
          "implementation": "Cancels changes, clears controls, refreshes grid"
        }
      },
      "grid": {
        "name": "grdBerths",
        "uniqueIdentifier": "FacilityBerthID",
        "columns": [
          {
            "propertyName": "Name",
            "header": "Berth Name",
            "width": 200,
            "alignment": "Left"
          },
          {
            "propertyName": "ShipName",
            "header": "Current Ship",
            "width": 211,
            "alignment": "Left"
          }
        ],
        "sortOrder": [
          {
            "column": "Name",
            "direction": "Ascending"
          }
        ]
      },
      "tab": "Berths",
      "toolbar": "BerthToolbarManager"
    },
    {
      "name": "FacilityStatus",
      "collectionName": "FacilityStatuses",
      "parentEntity": "Location",
      "relationshipPath": "Location.FacilityStatuses",
      "parentKey": "FacilityLocationID",
      "childKey": "FacilityStatusID",
      "properties": [
        {
          "name": "StartDateTime",
          "type": "DateTime",
          "displayName": "Start Date/Time",
          "validationType": "DateTime",
          "uiControls": ["dtStartDate", "cboStartTime"]
        },
        {
          "name": "EndDateTime",
          "type": "DateTime",
          "displayName": "End Date/Time",
          "validationType": "DateTime",
          "uiControls": ["dtEndDate", "cboEndTime"]
        },
        {
          "name": "Status",
          "type": "ValidationList",
          "displayName": "Status",
          "validationListType": "FacilityStatus",
          "uiControl": "cboFacilityStatus"
        },
        {
          "name": "Note",
          "type": "String",
          "displayName": "Note",
          "validationType": "String",
          "hasMaxLength": true,
          "hasEditor": true
        }
      ],
      "crudMethods": {
        "add": {
          "methodName": "ItemAddStatus",
          "location": "frmFacilityDetail.vb:613",
          "buttonKey": "AddStatus",
          "implementation": "Creates new FacilityStatus via BusinessLogic.FacilityStatuses.NewFacilityStatus"
        },
        "modify": {
          "methodName": "ItemModify",
          "location": "frmFacilityDetail.vb:465",
          "buttonKey": "ModifyStatus",
          "implementation": "Gets selected FacilityStatus from grid, calls BeginEdit"
        },
        "remove": {
          "methodName": "ItemRemoveStatus",
          "location": "frmFacilityDetail.vb:638",
          "buttonKey": "RemoveStatus",
          "implementation": "Removes FacilityStatus from _Location.FacilityStatuses collection"
        },
        "save": {
          "methodName": "SetClickListAndDetail",
          "location": "frmFacilityDetail.vb:363",
          "buttonName": "btnSetStatus",
          "implementation": "Adds to collection if new, refreshes grid, clears controls"
        },
        "cancel": {
          "methodName": "CancelClickListAndDetail",
          "location": "frmFacilityDetail.vb:404",
          "buttonName": "btnCancelEditStatus",
          "implementation": "Cancels changes, clears controls, refreshes grid"
        },
        "export": {
          "methodName": "Main.ExportGrid",
          "location": "frmFacilityDetail.vb:280",
          "buttonKey": "ExportStatus",
          "implementation": "Exports grid to file"
        }
      },
      "grid": {
        "name": "grdFacilityStatus",
        "uniqueIdentifier": "FacilityStatusID",
        "columns": [
          {
            "propertyName": "StartDateTime",
            "header": "Start Date/Time",
            "width": 110,
            "alignment": "Left",
            "hasCustomComparer": true,
            "comparerType": "DateTimeSortComparer"
          },
          {
            "propertyName": "EndDateTime",
            "header": "End Date/Time",
            "width": 110,
            "alignment": "Left",
            "hasCustomComparer": true,
            "comparerType": "DateTimeSortComparer"
          },
          {
            "propertyName": "Status",
            "header": "Status",
            "width": 150,
            "alignment": "Left"
          },
          {
            "propertyName": "Note",
            "header": "Note",
            "width": 150,
            "alignment": "Left"
          }
        ],
        "sortOrder": [
          {
            "column": "StartDateTime",
            "direction": "Descending"
          }
        ],
        "autoFitStyle": "ExtendLastColumn"
      },
      "tab": "Status",
      "toolbar": "StatusToolbarsManager"
    }
  ],
  "relatedEntities": [
    {
      "name": "FacilityLocation",
      "relationship": "OneToOne",
      "parentEntity": "Location",
      "path": "Location.FacilityLocation",
      "description": "Contains facility-specific location data including BargeEx codes, lock data, and NDC data",
      "properties": [
        {
          "name": "BargeExCode",
          "type": "String",
          "displayName": "BargeEx Code",
          "hasMaxLength": true
        },
        {
          "name": "Bank",
          "type": "ValidationList",
          "displayName": "Bank",
          "validationListType": "RiverBank"
        },
        {
          "name": "BargeExLocationType",
          "type": "ValidationList",
          "displayName": "BargeEx Location Type",
          "validationListType": "BargeExLocationType"
        },
        {
          "name": "LockUsaceName",
          "type": "String",
          "displayName": "Lock USACE Name",
          "hasMaxLength": true,
          "conditionalEnable": "BargeExLocationType = Lock or GaugeLocation"
        },
        {
          "name": "LockFloodStage",
          "type": "Decimal",
          "displayName": "Lock Flood Stage",
          "validationType": "Decimal",
          "conditionalEnable": "BargeExLocationType = Lock or GaugeLocation"
        },
        {
          "name": "LockPoolStage",
          "type": "Decimal",
          "displayName": "Lock Pool Stage",
          "validationType": "Decimal",
          "conditionalEnable": "BargeExLocationType = Lock or GaugeLocation"
        },
        {
          "name": "LockLowWater",
          "type": "Decimal",
          "displayName": "Lock Low Water",
          "validationType": "Decimal",
          "conditionalEnable": "BargeExLocationType = Lock or GaugeLocation"
        },
        {
          "name": "LockNormalCurrent",
          "type": "Decimal",
          "displayName": "Lock Normal Current",
          "validationType": "Decimal",
          "conditionalEnable": "BargeExLocationType = Lock or GaugeLocation"
        },
        {
          "name": "LockHighFlow",
          "type": "Decimal",
          "displayName": "Lock High Flow",
          "validationType": "Decimal",
          "conditionalEnable": "BargeExLocationType = Lock or GaugeLocation"
        },
        {
          "name": "LockHighWater",
          "type": "Decimal",
          "displayName": "Lock High Water",
          "validationType": "Decimal",
          "conditionalEnable": "BargeExLocationType = Lock or GaugeLocation"
        },
        {
          "name": "LockCatastrophicLevel",
          "type": "Decimal",
          "displayName": "Lock Catastrophic Level",
          "validationType": "Decimal",
          "conditionalEnable": "BargeExLocationType = Lock or GaugeLocation"
        },
        {
          "name": "NdcName",
          "type": "String",
          "displayName": "NDC Name",
          "isReadOnly": true
        },
        {
          "name": "NdcLocationDescription",
          "type": "String",
          "displayName": "NDC Location Description",
          "isReadOnly": true
        },
        {
          "name": "NdcAddress",
          "type": "String",
          "displayName": "NDC Address",
          "isReadOnly": true
        },
        {
          "name": "NdcCounty",
          "type": "String",
          "displayName": "NDC County",
          "isReadOnly": true
        },
        {
          "name": "NdcCountyFips",
          "type": "String",
          "displayName": "NDC County FIPS",
          "isReadOnly": true
        },
        {
          "name": "NdcTown",
          "type": "String",
          "displayName": "NDC Town",
          "isReadOnly": true
        },
        {
          "name": "NdcState",
          "type": "String",
          "displayName": "NDC State",
          "isReadOnly": true
        },
        {
          "name": "NdcWaterway",
          "type": "String",
          "displayName": "NDC Waterway",
          "isReadOnly": true
        },
        {
          "name": "NdcPort",
          "type": "String",
          "displayName": "NDC Port",
          "isReadOnly": true
        },
        {
          "name": "NdcLatitude",
          "type": "String",
          "displayName": "NDC Latitude",
          "isReadOnly": true
        },
        {
          "name": "NdcLongitude",
          "type": "String",
          "displayName": "NDC Longitude",
          "isReadOnly": true
        },
        {
          "name": "NdcOperator",
          "type": "String",
          "displayName": "NDC Operator",
          "isReadOnly": true
        },
        {
          "name": "NdcOwner",
          "type": "String",
          "displayName": "NDC Owner",
          "isReadOnly": true
        },
        {
          "name": "NdcPurpose",
          "type": "String",
          "displayName": "NDC Purpose",
          "isReadOnly": true
        },
        {
          "name": "NdcRemark",
          "type": "String",
          "displayName": "NDC Remark",
          "isReadOnly": true
        }
      ],
      "tabs": ["Details", "NDC Data"]
    },
    {
      "name": "Location",
      "relationship": "Parent",
      "description": "Main location entity with basic location information",
      "properties": [
        {
          "name": "Name",
          "type": "String",
          "displayName": "Name",
          "validationType": "String",
          "hasMaxLength": true
        },
        {
          "name": "ShortName",
          "type": "String",
          "displayName": "Short Name",
          "validationType": "String",
          "hasMaxLength": true
        },
        {
          "name": "Note",
          "type": "String",
          "displayName": "Note",
          "validationType": "String",
          "hasMaxLength": true
        },
        {
          "name": "IsActive",
          "type": "Boolean",
          "displayName": "Is Active"
        },
        {
          "name": "River",
          "type": "Object",
          "displayName": "River",
          "isNavigationProperty": true
        },
        {
          "name": "Mile",
          "type": "Decimal",
          "displayName": "Mile",
          "validationType": "Decimal"
        }
      ],
      "tab": "Details"
    }
  ],
  "tabs": [
    {
      "name": "Details",
      "key": "Details",
      "enabled": "Not editing child entities",
      "entities": ["Location", "FacilityLocation"]
    },
    {
      "name": "Status",
      "key": "Status",
      "enabled": "Not editing or editing FacilityStatus",
      "childEntity": "FacilityStatus",
      "lazyLoad": true
    },
    {
      "name": "Berths",
      "key": "Berths",
      "enabled": "Not editing or editing FacilityBerth",
      "childEntity": "FacilityBerth",
      "lazyLoad": true
    },
    {
      "name": "NDC Data",
      "key": "NdcData",
      "enabled": "Not editing child entities",
      "entity": "FacilityLocation",
      "readOnly": true
    }
  ],
  "formFeatures": {
    "hasLazyLoadedTabs": true,
    "hasInlineEditing": true,
    "hasConditionalFields": true,
    "hasValidation": true,
    "hasExport": true,
    "hasTextEditor": true
  },
  "notes": [
    "Facility is represented by the Location entity with a FacilityLocation child object",
    "FacilityBerths are children of FacilityLocation, not directly of Location",
    "FacilityStatuses are children of Location (via FacilityLocation reference)",
    "Lock-related fields are conditionally enabled based on BargeExLocationType",
    "NDC (National Data Center) fields are read-only reference data",
    "Tabs are lazy-loaded on first access to improve performance",
    "Form uses detail-edit pattern with separate Save/Cancel buttons for child entities"
  ]
}
