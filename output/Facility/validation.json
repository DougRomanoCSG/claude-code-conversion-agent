{
  "entity": "Facility",
  "module": "FacilityLocation",
  "description": "Comprehensive validation rules extracted from Facility forms and business logic",
  "legacyForms": ["frmFacilitySearch", "frmFacilityDetail"],
  "validationSources": {
    "formValidation": "frmFacilitySearch.AreFieldsValid()",
    "fieldValidation": "ValidatorExtender settings in frmFacilityDetail",
    "businessRules": "Implicit rules from form logic and conditional field clearing"
  },
  "searchFormValidation": {
    "form": "frmFacilitySearch",
    "method": "AreFieldsValid",
    "location": "frmFacilitySearch.vb:274-297",
    "rules": [
      {
        "ruleId": "SEARCH-001",
        "type": "ConditionalRequired",
        "field": "cboRiver",
        "condition": "txtStartMile OR txtEndMile has value",
        "errorMessage": "A beginning or ending mile was specified, but no river was selected.",
        "sourceCode": "If (String.IsNullOrEmpty(cboRiver.Text.Trim) AndAlso (Not String.IsNullOrEmpty(txtStartMile.Text.Trim) OrElse Not String.IsNullOrEmpty(txtEndMile.Text.Trim)))",
        "severity": "Error",
        "trigger": "OnFindButtonClick",
        "modernValidation": {
          "clientSide": "jQuery Validation custom rule",
          "serverSide": "ModelState validation in controller",
          "implementation": "if ((model.StartMile.HasValue || model.EndMile.HasValue) && !model.RiverId.HasValue) { ModelState.AddModelError(\"RiverId\", \"A beginning or ending mile was specified, but no river was selected.\"); }"
        }
      },
      {
        "ruleId": "SEARCH-002",
        "type": "RangeComparison",
        "field": "txtEndMile",
        "relatedField": "txtStartMile",
        "condition": "Both txtStartMile AND txtEndMile have values",
        "validation": "txtEndMile >= txtStartMile",
        "errorMessage": "The ending mile is less than the beginning mile.",
        "sourceCode": "If (Not String.IsNullOrEmpty(txtStartMile.Text.Trim) AndAlso Not String.IsNullOrEmpty(txtEndMile.Text.Trim) AndAlso (CDec(txtEndMile.Text.Trim) < CDec(txtStartMile.Text.Trim)))",
        "severity": "Error",
        "trigger": "OnFindButtonClick",
        "modernValidation": {
          "clientSide": "jQuery Validation compare rule",
          "serverSide": "ModelState validation in controller",
          "implementation": "if (model.StartMile.HasValue && model.EndMile.HasValue && model.EndMile < model.StartMile) { ModelState.AddModelError(\"EndMile\", \"The ending mile is less than the beginning mile.\"); }"
        }
      }
    ]
  },
  "detailFormValidation": {
    "form": "frmFacilityDetail",
    "entities": {
      "location": {
        "entityName": "Location",
        "fields": [
          {
            "fieldId": "LOC-001",
            "field": "Name",
            "control": "txtName",
            "validationType": "String",
            "required": true,
            "maxLength": "Location.MaxLength.Name",
            "sourceLocation": "frmFacilityDetail.vb:990",
            "validatorExtender": "frmFacilityDetail.vb:976",
            "modernValidation": {
              "dataAnnotations": "[Required(ErrorMessage = \"Facility Name is required\"), StringLength(100)]",
              "clientSide": "required: true, maxlength: 100",
              "htmlAttributes": "required maxlength=\"100\""
            }
          },
          {
            "fieldId": "LOC-002",
            "field": "ShortName",
            "control": "txtShortName",
            "validationType": "String",
            "required": false,
            "maxLength": "Location.MaxLength.ShortName",
            "sourceLocation": "frmFacilityDetail.vb:991",
            "validatorExtender": "frmFacilityDetail.vb:977",
            "modernValidation": {
              "dataAnnotations": "[StringLength(50)]",
              "clientSide": "maxlength: 50",
              "htmlAttributes": "maxlength=\"50\""
            }
          },
          {
            "fieldId": "LOC-003",
            "field": "Note",
            "control": "txtLocationNote",
            "validationType": "String",
            "required": false,
            "maxLength": "Location.MaxLength.Note",
            "sourceLocation": "frmFacilityDetail.vb:992",
            "validatorExtender": "frmFacilityDetail.vb:978",
            "modernValidation": {
              "dataAnnotations": "[StringLength(500)]",
              "clientSide": "maxlength: 500",
              "htmlAttributes": "maxlength=\"500\""
            }
          },
          {
            "fieldId": "LOC-004",
            "field": "Mile",
            "control": "txtMile",
            "validationType": "Decimal",
            "required": false,
            "dataType": "decimal",
            "sourceLocation": "frmFacilityDetail.vb:979",
            "businessRule": "If specified, River (cboRiver) must also be selected",
            "modernValidation": {
              "dataAnnotations": "[Range(0.00, 9999.99, ErrorMessage = \"Mile must be between 0 and 9999.99\")]",
              "clientSide": "number: true, min: 0, max: 9999.99",
              "htmlAttributes": "type=\"number\" step=\"0.01\" min=\"0\" max=\"9999.99\""
            }
          },
          {
            "fieldId": "LOC-005",
            "field": "River",
            "control": "cboRiver",
            "validationType": "Object",
            "required": false,
            "conditionalRequired": "Required when Mile is specified",
            "dataType": "int (RiverID)",
            "modernValidation": {
              "dataAnnotations": "Custom validation attribute or FluentValidation",
              "clientSide": "Custom jQuery validation rule",
              "implementation": "RuleFor(x => x.RiverId).NotEmpty().When(x => x.Mile.HasValue).WithMessage(\"River is required when Mile is specified\")"
            }
          },
          {
            "fieldId": "LOC-006",
            "field": "IsActive",
            "control": "chkIsActive",
            "validationType": "Boolean",
            "required": true,
            "defaultValue": true,
            "dataType": "bool",
            "modernValidation": {
              "dataAnnotations": "[Required]",
              "clientSide": "No validation needed (checkbox defaults to false)",
              "htmlAttributes": "type=\"checkbox\""
            }
          }
        ]
      },
      "facilityLocation": {
        "entityName": "FacilityLocation",
        "fields": [
          {
            "fieldId": "FLOC-001",
            "field": "BargeExCode",
            "control": "txtBargeExCode",
            "validationType": "String",
            "required": false,
            "maxLength": "FacilityLocation.MaxLength.BargeExCode",
            "sourceLocation": "frmFacilityDetail.vb:1298",
            "validatorExtender": "frmFacilityDetail.vb:1279",
            "modernValidation": {
              "dataAnnotations": "[StringLength(20)]",
              "clientSide": "maxlength: 20",
              "htmlAttributes": "maxlength=\"20\""
            }
          },
          {
            "fieldId": "FLOC-002",
            "field": "Bank",
            "control": "cboBank",
            "validationType": "Object",
            "required": false,
            "dataType": "ValidationList (RiverBank)",
            "validationListType": "vl.ValidationTypes.RiverBank",
            "sourceLocation": "frmFacilityDetail.vb:567",
            "modernValidation": {
              "dataAnnotations": "No annotation needed (nullable foreign key)",
              "clientSide": "No validation needed",
              "htmlAttributes": ""
            }
          },
          {
            "fieldId": "FLOC-003",
            "field": "BargeExLocationType",
            "control": "cboBargeExLocationType",
            "validationType": "Object",
            "required": false,
            "dataType": "ValidationList (BargeExLocationType)",
            "validationListType": "vl.ValidationTypes.BargeExLocationType",
            "sourceLocation": "frmFacilityDetail.vb:565-566",
            "changeEventTrigger": "EnableDisableLockControls",
            "businessRule": "When changed, shows/hides Lock and Gauge fields based on selection",
            "modernValidation": {
              "dataAnnotations": "No annotation if optional",
              "clientSide": "Custom change event handler",
              "htmlAttributes": "",
              "eventHandler": "onFacilityTypeChange() - shows/hides lock gauge panel"
            }
          },
          {
            "fieldId": "FLOC-004",
            "field": "LockUsaceName",
            "control": "txtLockUsaceName",
            "validationType": "String",
            "required": false,
            "conditionalEnabled": "Only enabled when BargeExLocationType is 'Lock' or 'Gauge Location'",
            "maxLength": "FacilityLocation.MaxLength.LockUsaceName",
            "sourceLocation": "frmFacilityDetail.vb:1299",
            "validatorExtender": "frmFacilityDetail.vb:1280",
            "businessRule": "Cleared on submit if facility type is not Lock or Gauge Location",
            "clearLogic": "frmFacilityDetail.vb:742-765",
            "modernValidation": {
              "dataAnnotations": "[StringLength(100)]",
              "clientSide": "maxlength: 100",
              "htmlAttributes": "maxlength=\"100\"",
              "conditionalDisplay": "JavaScript toggles visibility based on facility type"
            }
          },
          {
            "fieldId": "FLOC-005",
            "field": "LockFloodStage",
            "control": "txtLockFloodStage",
            "validationType": "Decimal",
            "required": false,
            "conditionalEnabled": "Only enabled when BargeExLocationType is 'Lock' or 'Gauge Location'",
            "dataType": "decimal",
            "sourceLocation": "frmFacilityDetail.vb:1281",
            "businessRule": "Cleared on submit if facility type is not Lock or Gauge Location",
            "clearLogic": "frmFacilityDetail.vb:751-752",
            "modernValidation": {
              "dataAnnotations": "[Range(0, 9999.99)]",
              "clientSide": "number: true",
              "htmlAttributes": "type=\"number\" step=\"0.01\"",
              "conditionalDisplay": "JavaScript toggles visibility based on facility type"
            }
          },
          {
            "fieldId": "FLOC-006",
            "field": "LockPoolStage",
            "control": "txtLockPoolStage",
            "validationType": "Decimal",
            "required": false,
            "conditionalEnabled": "Only enabled when BargeExLocationType is 'Lock' or 'Gauge Location'",
            "dataType": "decimal",
            "sourceLocation": "frmFacilityDetail.vb:1282",
            "businessRule": "Cleared on submit if facility type is not Lock or Gauge Location",
            "clearLogic": "frmFacilityDetail.vb:753-754",
            "modernValidation": {
              "dataAnnotations": "[Range(0, 9999.99)]",
              "clientSide": "number: true",
              "htmlAttributes": "type=\"number\" step=\"0.01\"",
              "conditionalDisplay": "JavaScript toggles visibility based on facility type"
            }
          },
          {
            "fieldId": "FLOC-007",
            "field": "LockLowWater",
            "control": "txtLockLowWater",
            "validationType": "Decimal",
            "required": false,
            "conditionalEnabled": "Only enabled when BargeExLocationType is 'Lock' or 'Gauge Location'",
            "dataType": "decimal",
            "sourceLocation": "frmFacilityDetail.vb:1283",
            "businessRule": "Cleared on submit if facility type is not Lock or Gauge Location",
            "clearLogic": "frmFacilityDetail.vb:755-756",
            "modernValidation": {
              "dataAnnotations": "[Range(0, 9999.99)]",
              "clientSide": "number: true",
              "htmlAttributes": "type=\"number\" step=\"0.01\"",
              "conditionalDisplay": "JavaScript toggles visibility based on facility type"
            }
          },
          {
            "fieldId": "FLOC-008",
            "field": "LockNormalCurrent",
            "control": "txtLockNormalCurrent",
            "validationType": "Decimal",
            "required": false,
            "conditionalEnabled": "Only enabled when BargeExLocationType is 'Lock' or 'Gauge Location'",
            "dataType": "decimal",
            "sourceLocation": "frmFacilityDetail.vb:1284",
            "businessRule": "Cleared on submit if facility type is not Lock or Gauge Location",
            "clearLogic": "frmFacilityDetail.vb:757-758",
            "modernValidation": {
              "dataAnnotations": "[Range(0, 9999.99)]",
              "clientSide": "number: true",
              "htmlAttributes": "type=\"number\" step=\"0.01\"",
              "conditionalDisplay": "JavaScript toggles visibility based on facility type"
            }
          },
          {
            "fieldId": "FLOC-009",
            "field": "LockHighFlow",
            "control": "txtLockHighFlow",
            "validationType": "Decimal",
            "required": false,
            "conditionalEnabled": "Only enabled when BargeExLocationType is 'Lock' or 'Gauge Location'",
            "dataType": "decimal",
            "sourceLocation": "frmFacilityDetail.vb:1285",
            "businessRule": "Cleared on submit if facility type is not Lock or Gauge Location",
            "clearLogic": "frmFacilityDetail.vb:759-760",
            "modernValidation": {
              "dataAnnotations": "[Range(0, 9999.99)]",
              "clientSide": "number: true",
              "htmlAttributes": "type=\"number\" step=\"0.01\"",
              "conditionalDisplay": "JavaScript toggles visibility based on facility type"
            }
          },
          {
            "fieldId": "FLOC-010",
            "field": "LockHighWater",
            "control": "txtLockHighWater",
            "validationType": "Decimal",
            "required": false,
            "conditionalEnabled": "Only enabled when BargeExLocationType is 'Lock' or 'Gauge Location'",
            "dataType": "decimal",
            "sourceLocation": "frmFacilityDetail.vb:1286",
            "businessRule": "Cleared on submit if facility type is not Lock or Gauge Location",
            "clearLogic": "frmFacilityDetail.vb:761-762",
            "modernValidation": {
              "dataAnnotations": "[Range(0, 9999.99)]",
              "clientSide": "number: true",
              "htmlAttributes": "type=\"number\" step=\"0.01\"",
              "conditionalDisplay": "JavaScript toggles visibility based on facility type"
            }
          },
          {
            "fieldId": "FLOC-011",
            "field": "LockCatastrophicLevel",
            "control": "txtLockCatastrophicLevel",
            "validationType": "Decimal",
            "required": false,
            "conditionalEnabled": "Only enabled when BargeExLocationType is 'Lock' or 'Gauge Location'",
            "dataType": "decimal",
            "sourceLocation": "frmFacilityDetail.vb:1287",
            "businessRule": "Cleared on submit if facility type is not Lock or Gauge Location",
            "clearLogic": "frmFacilityDetail.vb:763-764",
            "modernValidation": {
              "dataAnnotations": "[Range(0, 9999.99)]",
              "clientSide": "number: true",
              "htmlAttributes": "type=\"number\" step=\"0.01\"",
              "conditionalDisplay": "JavaScript toggles visibility based on facility type"
            }
          }
        ]
      },
      "facilityBerth": {
        "entityName": "FacilityBerth",
        "fields": [
          {
            "fieldId": "BERTH-001",
            "field": "Name",
            "control": "txtBerthName",
            "validationType": "String",
            "required": true,
            "maxLength": "FacilityBerth.MaxLength.Name",
            "sourceLocation": "frmFacilityDetail.vb:1390",
            "validatorExtender": "frmFacilityDetail.vb:1379",
            "modernValidation": {
              "dataAnnotations": "[Required(ErrorMessage = \"Berth Name is required\"), StringLength(100)]",
              "clientSide": "required: true, maxlength: 100",
              "htmlAttributes": "required maxlength=\"100\""
            }
          },
          {
            "fieldId": "BERTH-002",
            "field": "ShipName",
            "control": "txtShipName",
            "validationType": "String",
            "required": false,
            "readOnly": true,
            "description": "Current ship at berth (display only)",
            "sourceLocation": "frmFacilityDetail.vb:666, 1402",
            "modernValidation": {
              "dataAnnotations": "Not editable - display only",
              "clientSide": "readonly",
              "htmlAttributes": "readonly"
            }
          }
        ]
      },
      "facilityStatus": {
        "entityName": "FacilityStatus",
        "fields": [
          {
            "fieldId": "STATUS-001",
            "field": "StartDateTime",
            "control": "dtStartDate + cboStartTime",
            "validationType": "DateTime",
            "required": true,
            "compositeField": true,
            "components": ["dtStartDate", "cboStartTime"],
            "sourceLocation": "frmFacilityDetail.vb:1414-1451",
            "validatorExtender": "frmFacilityDetail.vb:1546",
            "modernValidation": {
              "dataAnnotations": "[Required(ErrorMessage = \"Start Date/Time is required\")]",
              "clientSide": "required: true",
              "htmlAttributes": "required",
              "implementation": "Separate date picker and time dropdown or datetime-local input"
            }
          },
          {
            "fieldId": "STATUS-002",
            "field": "Status",
            "control": "cboFacilityStatus",
            "validationType": "Object",
            "required": true,
            "dataType": "ValidationList (FacilityStatus)",
            "validationListType": "vl.ValidationTypes.FacilityStatus",
            "sourceLocation": "frmFacilityDetail.vb:570, 1454-1472",
            "modernValidation": {
              "dataAnnotations": "[Required(ErrorMessage = \"Status is required\")]",
              "clientSide": "required: true",
              "htmlAttributes": "required"
            }
          },
          {
            "fieldId": "STATUS-003",
            "field": "Note",
            "control": "txtStatusNote",
            "validationType": "String",
            "required": false,
            "maxLength": "FacilityStatus.MaxLength.Note",
            "hasEditorButton": true,
            "editorButtonAction": "Opens frmTextEditor for expanded text entry",
            "sourceLocation": "frmFacilityDetail.vb:293-321, 1474-1493, 1559",
            "validatorExtender": "frmFacilityDetail.vb:1547",
            "modernValidation": {
              "dataAnnotations": "[StringLength(5000)]",
              "clientSide": "maxlength: 5000",
              "htmlAttributes": "maxlength=\"5000\"",
              "implementation": "Textarea with modal editor for large text"
            }
          },
          {
            "fieldId": "STATUS-004",
            "field": "EndDateTime",
            "control": "dtEndDate + cboEndTime",
            "validationType": "DateTime",
            "required": false,
            "compositeField": true,
            "components": ["dtEndDate", "cboEndTime"],
            "sourceLocation": "frmFacilityDetail.vb:1495-1533",
            "validatorExtender": "frmFacilityDetail.vb:1548",
            "businessRule": "EndDateTime must be >= StartDateTime if specified",
            "modernValidation": {
              "dataAnnotations": "[GreaterThanOrEqual(\"StartDateTime\", ErrorMessage = \"End Date/Time must be after Start Date/Time\")]",
              "clientSide": "Custom compare validation",
              "htmlAttributes": "",
              "implementation": "Custom validation to compare with StartDateTime"
            }
          }
        ]
      }
    }
  },
  "businessRules": {
    "conditionalFieldClearing": {
      "ruleId": "BR-001",
      "description": "Lock and Gauge fields must be cleared when facility type is not Lock or Gauge Location",
      "trigger": "On Submit (btnSubmit_Click)",
      "method": "ClearUnusedFields",
      "sourceLocation": "frmFacilityDetail.vb:742-767",
      "condition": "cboBargeExLocationType.Text != 'Lock' AND != 'Gauge Location'",
      "fieldsAffected": [
        "LockUsaceName",
        "LockFloodStage",
        "LockPoolStage",
        "LockLowWater",
        "LockNormalCurrent",
        "LockHighFlow",
        "LockHighWater",
        "LockCatastrophicLevel"
      ],
      "action": "Set all lock/gauge fields to empty string",
      "modernImplementation": "Server-side: Clear fields in controller before save. Client-side: Disable/hide fields and clear values on facility type change"
    },
    "conditionalFieldEnabling": {
      "ruleId": "BR-002",
      "description": "Lock and Gauge fields are only enabled when facility type is Lock or Gauge Location",
      "trigger": "On form load, on facility type change",
      "method": "EnableDisableLockControls",
      "sourceLocation": "frmFacilityDetail.vb:687-716",
      "condition": "cboBargeExLocationType.Text == 'Lock' OR == 'Gauge Location'",
      "fieldsAffected": [
        "txtLockUsaceName",
        "txtLockFloodStage",
        "txtLockPoolStage",
        "txtLockLowWater",
        "txtLockNormalCurrent",
        "txtLockHighFlow",
        "txtLockHighWater",
        "txtLockCatastrophicLevel"
      ],
      "action": "Enable fields when condition is true, disable when false",
      "modernImplementation": "JavaScript show/hide panel based on facility type selection. Use CSS classes to toggle visibility"
    },
    "parentChildRelationship": {
      "ruleId": "BR-003",
      "description": "FacilityBerth and FacilityStatus require parent Location to be saved first",
      "trigger": "Tab access, Add operations",
      "sourceLocation": "frmFacilityDetail.vb:653-656",
      "condition": "Location.IsNew == true",
      "fieldsAffected": ["Status tab", "Berths tab"],
      "action": "Disable tabs until parent is saved",
      "modernImplementation": "Disable tabs and show message: 'Save the facility before adding berths or status records'"
    },
    "childObjectValidation": {
      "ruleId": "BR-004",
      "description": "Child objects (Berth, Status) validated through SetClickListAndDetail",
      "trigger": "btnSetBerth_Click, btnSetStatus_Click",
      "method": "SetClickListAndDetail",
      "sourceLocation": "frmFacilityDetail.vb:363-402",
      "validation": "Calls MyBase.SetClickListAndDetail which validates the child business object",
      "modernImplementation": "Validate child objects using FluentValidation or DataAnnotations in modal save handler"
    }
  },
  "validationTriggers": {
    "searchFormTriggers": [
      {
        "trigger": "btnFind.Click",
        "method": "RefreshList",
        "validation": "Calls AreFieldsValid() before executing search",
        "sourceLocation": "frmFacilitySearch.vb:84-104",
        "errorHandling": "Displays message box with error description if validation fails"
      }
    ],
    "detailFormTriggers": [
      {
        "trigger": "Field.Validated event",
        "description": "Each field has a Validated event handler that sets the business object property",
        "examples": [
          "txtName.Validated -> _Location.Name = .Text",
          "cboRiver.Validated -> InfragisticsHelper.SetObjectProperty(_Location.River, cboRiver)"
        ],
        "sourceLocation": "frmFacilityDetail.vb:842-1533"
      },
      {
        "trigger": "btnSubmit.Click",
        "method": "SubmitNoRefreshClick",
        "preValidation": "ClearUnusedFields() - clears lock/gauge fields if not applicable",
        "validation": "Inherited validation from base form (IsValid check)",
        "sourceLocation": "frmFacilityDetail.vb:133-157"
      },
      {
        "trigger": "btnSetBerth.Click / btnSetStatus.Click",
        "method": "SetClickListAndDetail",
        "validation": "Validates child business object before adding to collection",
        "sourceLocation": "frmFacilityDetail.vb:175-221"
      }
    ]
  },
  "errorMessages": {
    "searchValidation": [
      {
        "code": "ERR-SEARCH-001",
        "message": "A beginning or ending mile was specified, but no river was selected.",
        "sourceLocation": "frmFacilitySearch.vb:286"
      },
      {
        "code": "ERR-SEARCH-002",
        "message": "The ending mile is less than the beginning mile.",
        "sourceLocation": "frmFacilitySearch.vb:292"
      }
    ],
    "detailValidation": [
      {
        "code": "ERR-DETAIL-001",
        "message": "Facility Name is required",
        "field": "Name",
        "validation": "Required field"
      },
      {
        "code": "ERR-DETAIL-002",
        "message": "River is required when Mile is specified",
        "field": "River",
        "validation": "Conditional required"
      },
      {
        "code": "ERR-DETAIL-003",
        "message": "Berth Name is required",
        "field": "BerthName",
        "validation": "Required field"
      },
      {
        "code": "ERR-DETAIL-004",
        "message": "Start Date/Time is required",
        "field": "StartDateTime",
        "validation": "Required field"
      },
      {
        "code": "ERR-DETAIL-005",
        "message": "Status is required",
        "field": "Status",
        "validation": "Required field"
      },
      {
        "code": "ERR-DETAIL-006",
        "message": "End Date/Time must be after Start Date/Time",
        "field": "EndDateTime",
        "validation": "Date comparison"
      }
    ]
  },
  "validatorExtenderMapping": {
    "description": "Legacy ValidatorExtender control settings mapped to modern validation",
    "validationTypes": {
      "String": {
        "legacyConstant": "ValidationTypeConstants.String",
        "modernEquivalent": "StringLength data annotation",
        "clientValidation": "jQuery Validation string rules"
      },
      "Decimal": {
        "legacyConstant": "ValidationTypeConstants.Decimal",
        "modernEquivalent": "Range data annotation with decimal type",
        "clientValidation": "jQuery Validation number rules"
      },
      "DateTime": {
        "legacyConstant": "ValidationTypeConstants.DateTime",
        "modernEquivalent": "DataType(DataType.DateTime) annotation",
        "clientValidation": "jQuery Validation date rules"
      },
      "TimeCombo": {
        "legacyMethod": "Main.SetTimeValidatorExtender(ValidatorExtender, cboStartTime)",
        "description": "Custom time combo validation",
        "modernEquivalent": "Custom validation for time dropdown or HTML5 time input",
        "sourceLocation": "frmFacilityDetail.vb:1546, 1548"
      }
    }
  },
  "modernValidationStrategy": {
    "serverSide": {
      "framework": "ASP.NET Core with FluentValidation or DataAnnotations",
      "viewModels": [
        "FacilitySearchViewModel - with search validation rules",
        "FacilityEditViewModel - with detail validation rules",
        "FacilityBerthDto - with berth validation rules",
        "FacilityStatusDto - with status validation rules"
      ],
      "validators": [
        "FacilitySearchValidator.cs - FluentValidation rules for search",
        "FacilityEditValidator.cs - FluentValidation rules for edit",
        "FacilityBerthValidator.cs - FluentValidation rules for berth",
        "FacilityStatusValidator.cs - FluentValidation rules for status"
      ],
      "controllerValidation": "Check ModelState.IsValid in controller actions before processing"
    },
    "clientSide": {
      "framework": "jQuery Validation with unobtrusive validation",
      "implementation": [
        "Use data annotations that generate data-val-* attributes",
        "Add jQuery.validate and jQuery.validate.unobtrusive",
        "Implement custom validation rules for complex scenarios",
        "Use Bootstrap validation styling (is-invalid, invalid-feedback)"
      ],
      "customRules": [
        "conditionalRequired - River required when Mile specified",
        "compareGreaterThan - EndMile >= StartMile",
        "compareDateGreaterThan - EndDateTime >= StartDateTime"
      ]
    }
  },
  "migrationNotes": {
    "validatorExtenderReplacement": [
      "Replace ValidatorExtender with DataAnnotations on ViewModels",
      "Use FluentValidation for complex conditional validation",
      "Implement client-side validation with jQuery Validation",
      "Add validation summary and field-level error display in views"
    ],
    "conditionalValidation": [
      "Use FluentValidation's When() for conditional rules",
      "Implement custom validation attributes for complex scenarios",
      "Use JavaScript to show/hide fields and adjust validation dynamically"
    ],
    "compositeFields": [
      "StartDateTime and EndDateTime are composite (date + time)",
      "Consider using HTML5 datetime-local input or separate date/time pickers",
      "Combine values in controller before passing to service layer"
    ],
    "businessRuleEnforcement": [
      "Enforce conditional field clearing in controller before save",
      "Validate parent-child relationships (facility must be saved before berths/status)",
      "Clear lock/gauge fields server-side if facility type changes"
    ]
  }
}
