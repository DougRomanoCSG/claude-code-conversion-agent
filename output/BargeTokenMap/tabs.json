{
  "formName": "frmBargeTokenMap",
  "formTitle": "Status - Map Field Values to Pictures",
  "formType": "DetailEditList",
  "inheritsFrom": "frmBaseDetailEditList",
  "hasTabs": false,
  "layoutType": "MasterDetail",
  "description": "Form for mapping field values to visual representations (pictures, symbols, or colors) for barge token status display",
  "sections": [
    {
      "name": "Grid Section",
      "location": "Top",
      "controls": [
        {
          "name": "grdBargeTokenMap",
          "type": "UltraGrid",
          "purpose": "Display list of existing token map entries",
          "dock": "Fill",
          "columns": [
            {
              "key": "Picture",
              "header": "Picture",
              "type": "Image",
              "width": 46,
              "visibleWhen": "DisplayType == 'picture'"
            },
            {
              "key": "FieldValue",
              "header": "Value",
              "type": "String",
              "width": 100,
              "visibleWhen": "Always"
            },
            {
              "key": "SymbolValue",
              "header": "Symbol",
              "type": "String",
              "width": 46,
              "visibleWhen": "DisplayType == 'symbol'"
            },
            {
              "key": "ColorName",
              "header": "Color Name",
              "type": "String",
              "width": 86,
              "visibleWhen": "DisplayType == 'color'"
            },
            {
              "key": "TextColor",
              "header": "Text Color",
              "type": "String",
              "width": 80,
              "visibleWhen": "DisplayType == 'color'"
            },
            {
              "key": "BackColor",
              "header": "Back Color",
              "type": "String",
              "width": 80,
              "visibleWhen": "DisplayType == 'color'"
            }
          ],
          "operations": ["Add", "Modify", "Remove", "Export"]
        }
      ]
    },
    {
      "name": "Detail Section",
      "location": "Bottom",
      "groupBox": "grpDetail",
      "groupBoxText": "Detail",
      "dock": "Bottom",
      "purpose": "Edit individual token map entry",
      "controls": [
        {
          "name": "lblType",
          "type": "UltraLabel",
          "label": "Type:",
          "tabIndex": 0
        },
        {
          "name": "cboFieldName",
          "type": "UltraCombo",
          "label": "Type",
          "purpose": "Select location type for location-based mappings",
          "tabIndex": 1,
          "required": false,
          "visibleWhen": "IsLocationMap(FieldName)",
          "options": ["Boat", "Consign Facility", "Facility", "Ship"],
          "validation": {
            "type": "String"
          }
        },
        {
          "name": "txtFieldName",
          "type": "UltraTextEditor",
          "label": "Type",
          "purpose": "Display field name for non-location mappings",
          "tabIndex": 2,
          "required": false,
          "readOnly": true,
          "visibleWhen": "NOT IsLocationMap(FieldName)",
          "validation": {
            "type": "String"
          }
        },
        {
          "name": "UltraLabel1",
          "type": "UltraLabel",
          "label": "Value:",
          "tabIndex": 3
        },
        {
          "name": "cboFieldValue",
          "type": "UltraCombo",
          "label": "Value",
          "purpose": "Select field value to map",
          "tabIndex": 4,
          "required": true,
          "dataSource": "BargeTokenMapFieldValueList",
          "displayMember": "FieldValue",
          "valueMember": "FieldValue"
        },
        {
          "name": "lblMap",
          "type": "UltraLabel",
          "label": "Picture:",
          "tabIndex": 5,
          "dynamicText": "DisplayType + ':'"
        },
        {
          "name": "cboPictureID",
          "type": "UltraCombo",
          "label": "Picture",
          "purpose": "Select picture to map to field value",
          "tabIndex": 6,
          "required": false,
          "visibleWhen": "DisplayType == 'picture'",
          "dataSource": "PictureList",
          "displayMember": "Picture",
          "valueMember": "PictureID",
          "hasImageList": true,
          "imageList": "ImageList1"
        },
        {
          "name": "txtSymbolValue",
          "type": "UltraTextEditor",
          "label": "Symbol",
          "purpose": "Enter symbol character to map to field value",
          "tabIndex": 7,
          "required": false,
          "visibleWhen": "DisplayType == 'symbol'",
          "maxLength": "BargeTokenMap.MaxLength.SymbolValue",
          "validation": {
            "type": "String"
          }
        },
        {
          "name": "cboColorPairID",
          "type": "UltraCombo",
          "label": "Color",
          "purpose": "Select color pair to map to field value",
          "tabIndex": 8,
          "required": false,
          "visibleWhen": "DisplayType == 'color'",
          "dataSource": "ColorPairList",
          "displayMember": "Name",
          "valueMember": "ColorPairID"
        },
        {
          "name": "btnSubmit",
          "type": "UltraButton",
          "text": "&Submit",
          "tabIndex": 9,
          "buttonType": "Submit",
          "anchor": "BottomRight"
        },
        {
          "name": "btnCancel",
          "type": "UltraButton",
          "text": "Ca&ncel",
          "tabIndex": 10,
          "buttonType": "CancelEdit",
          "anchor": "BottomRight",
          "causesValidation": false
        }
      ]
    },
    {
      "name": "Close Section",
      "location": "Bottom",
      "groupBox": "grpClose",
      "dock": "Bottom",
      "purpose": "Close the form",
      "controls": [
        {
          "name": "btnClose",
          "type": "UltraButton",
          "text": "&Close",
          "tabIndex": 0,
          "buttonType": "Cancel",
          "anchor": "TopRight",
          "causesValidation": false
        }
      ]
    }
  ],
  "toolbar": {
    "name": "toolbarBargeTokenMap",
    "type": "UltraToolbarsManager",
    "style": "Office2003",
    "dockPosition": "Top",
    "allowCustomize": false,
    "allowDocking": false,
    "allowFloating": false,
    "allowHiding": false,
    "grabHandleStyle": "None",
    "tools": [
      {
        "key": "Add",
        "caption": "&Add",
        "type": "ButtonTool",
        "displayStyle": "ImageAndText",
        "image": "Resources.Add",
        "buttonType": "Add",
        "enabledWhen": "NOT IsEditingChild AND HasAddPermission"
      },
      {
        "key": "Modify",
        "caption": "&Modify",
        "type": "ButtonTool",
        "displayStyle": "ImageAndText",
        "image": "Resources.Modify",
        "buttonType": "Open",
        "enabledWhen": "ItemSelected AND NOT IsEditingChild AND HasOpenPermission"
      },
      {
        "key": "Remove",
        "caption": "&Remove",
        "type": "ButtonTool",
        "displayStyle": "ImageAndText",
        "image": "Resources.Remove",
        "buttonType": "Remove",
        "enabledWhen": "ItemSelected AND NOT IsEditingChild AND HasRemovePermission"
      },
      {
        "key": "Export",
        "caption": "Export",
        "type": "ButtonTool",
        "displayStyle": "ImageAndText",
        "image": "Resources.ExportResults",
        "buttonType": "Open",
        "isFirstInGroup": true,
        "enabledWhen": "AtLeastOneRow AND NOT IsEditingChild AND HasOpenPermission"
      }
    ]
  },
  "sharedControls": {
    "location": "Bottom of form",
    "controls": [
      {
        "name": "staStatus",
        "type": "UltraStatusBar",
        "dock": "Bottom",
        "purpose": "Display validation messages and status information"
      }
    ]
  },
  "formLogic": {
    "initializationParameters": {
      "fieldName": "String - The field name being mapped (e.g., 'Status', 'Location')",
      "displayType": "String - The type of mapping: 'picture', 'symbol', or 'color'",
      "fleetID": "Integer - The fleet context for the mappings"
    },
    "conditionalVisibility": [
      {
        "controls": ["cboFieldName"],
        "condition": "IsLocationMap(FieldName)",
        "reason": "Location-type fields can map to different location types"
      },
      {
        "controls": ["txtFieldName"],
        "condition": "NOT IsLocationMap(FieldName)",
        "reason": "Non-location fields show static field name"
      },
      {
        "controls": ["cboPictureID"],
        "condition": "DisplayType == 'picture'",
        "reason": "Picture selection only for picture display type"
      },
      {
        "controls": ["txtSymbolValue"],
        "condition": "DisplayType == 'symbol'",
        "reason": "Symbol entry only for symbol display type"
      },
      {
        "controls": ["cboColorPairID"],
        "condition": "DisplayType == 'color'",
        "reason": "Color selection only for color display type"
      }
    ],
    "conditionalEnabling": [
      {
        "controls": ["cboFieldValue", "cboPictureID", "txtSymbolValue", "cboColorPairID"],
        "condition": "IsLocationMap(FieldName) AND cboFieldName.Text != String.Empty",
        "reason": "For location maps, location type must be selected first"
      }
    ],
    "dynamicFormTitle": {
      "pattern": "[FieldName] - Map Field Values to [DisplayType]s",
      "example": "Status - Map Field Values to Pictures"
    },
    "gridColumnVisibility": {
      "picture": ["Picture", "FieldValue"],
      "symbol": ["FieldValue", "SymbolValue"],
      "color": ["FieldValue", "ColorName", "TextColor", "BackColor"]
    },
    "locationMapFields": ["Location", "Consign To", "On Order To"],
    "locationTypes": {
      "Location": ["Boat", "Consign Facility", "Facility", "Ship"],
      "ConsignTo": ["Facility", "Ship"],
      "OnOrderTo": ["Facility", "Ship"]
    }
  },
  "validationRules": [
    {
      "control": "cboFieldValue",
      "required": true,
      "message": "Field value must be selected"
    },
    {
      "control": "cboPictureID",
      "requiredWhen": "DisplayType == 'picture' AND NOT IsNew",
      "message": "Picture must be selected"
    },
    {
      "control": "txtSymbolValue",
      "requiredWhen": "DisplayType == 'symbol' AND NOT IsNew",
      "validationType": "String",
      "maxLength": "BargeTokenMap.MaxLength.SymbolValue"
    },
    {
      "control": "cboColorPairID",
      "requiredWhen": "DisplayType == 'color' AND NOT IsNew",
      "message": "Color pair must be selected"
    }
  ],
  "businessObject": {
    "name": "BargeTokenMap",
    "namespace": "BargeOps.Onshore.BusinessLogic",
    "primaryKey": "BargeTokenMapID",
    "properties": [
      "BargeTokenMapID",
      "FleetID",
      "FieldName",
      "LocationType",
      "FieldValue",
      "DisplayType",
      "PictureID",
      "SymbolValue",
      "ColorPairID"
    ]
  },
  "dataOperations": {
    "load": "BargeTokenMap.GetBargeTokenMap(BargeTokenMapID)",
    "new": "BargeTokenMap.NewBargeTokenMap()",
    "delete": "BargeTokenMap.DeleteBargeTokenMap(BargeTokenMapID)",
    "list": "BargeTokenMapList.GetList(FieldName, DisplayType, FleetID)"
  },
  "modernImplementationNotes": {
    "layoutPattern": "Master-Detail with toolbar",
    "responsiveDesign": "Grid on top, detail panel on bottom, both responsive",
    "conditionalUI": "Extensive conditional control visibility based on field type and display type",
    "validation": "ValidatorExtender for inline validation",
    "security": "Control authorization based on button types",
    "gridFeatures": ["Sorting", "Column sizing", "Export to Excel"],
    "dependencies": [
      "PictureList - for available pictures",
      "ColorPairList - for available color pairs",
      "BargeTokenMapFieldValueList - for valid field values"
    ]
  }
}
