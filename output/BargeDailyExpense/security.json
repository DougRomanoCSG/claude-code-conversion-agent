{
  "entity": "BargeDailyExpense",
  "legacy": {
    "searchForm": "frmBargeDailyExpenseSearch",
    "detailForm": "frmBargeDailyExpenseDetail",
    "subsystem": "frmBargeDailyExpenseSearch",
    "subsystemGroup": "GroupGlobalAdmin",
    "securityButtons": [
      {
        "form": "frmBargeDailyExpenseSearch",
        "button": "btnFind",
        "type": "Open",
        "legacyPermission": "CanOpen",
        "description": "Execute search for barge daily expense dates",
        "sourceFile": "frmBargeDailyExpenseSearch.vb",
        "sourceLine": 99
      },
      {
        "form": "frmBargeDailyExpenseSearch",
        "button": "btnReset",
        "type": "Open",
        "legacyPermission": "CanOpen",
        "description": "Reset search criteria to defaults",
        "sourceFile": "frmBargeDailyExpenseSearch.vb",
        "sourceLine": 100
      },
      {
        "form": "frmBargeDailyExpenseDetail",
        "button": "btnSubmit",
        "type": "Submit",
        "legacyPermission": "CanModify",
        "description": "Save barge daily expense date and all expense entries",
        "sourceFile": "frmBargeDailyExpenseDetail.vb",
        "sourceLine": 77
      },
      {
        "form": "frmBargeDailyExpenseDetail",
        "button": "btnCancel",
        "type": "Cancel",
        "legacyPermission": "CanOpen",
        "description": "Cancel changes to barge daily expense date",
        "sourceFile": "frmBargeDailyExpenseDetail.vb",
        "sourceLine": 78
      },
      {
        "form": "frmBargeDailyExpenseDetail",
        "toolbar": "ToolbarsManager",
        "button": "Add",
        "type": "Add",
        "legacyPermission": "CanCreate",
        "description": "Add new barge daily expense entry to the grid",
        "sourceFile": "frmBargeDailyExpenseDetail.vb",
        "sourceLine": 90
      },
      {
        "form": "frmBargeDailyExpenseDetail",
        "toolbar": "ToolbarsManager",
        "button": "Remove",
        "type": "Remove",
        "legacyPermission": "CanDelete",
        "description": "Remove selected barge daily expense entry from the grid",
        "sourceFile": "frmBargeDailyExpenseDetail.vb",
        "sourceLine": 92
      }
    ],
    "interfaceMethods": {
      "IBaseSearch": [
        "ItemAdd - Creates new barge daily expense date (requires CanCreate)",
        "ItemModify - Modifies existing barge daily expense date (requires CanModify)",
        "ItemRemove - Deletes barge daily expense date (requires CanDelete)"
      ],
      "IBaseDetailEdit": [
        "Initialize - Initializes form with business object and security settings",
        "SetButtonTypes - Configures button security types for authorization"
      ]
    },
    "inGridEditing": {
      "enabled": true,
      "description": "This form uses in-grid editing for child BargeDailyExpense entries. Users edit cells directly in the grid without separate detail forms.",
      "editableColumns": [
        "SizeCategory",
        "CoverType",
        "CoverSubTypeID",
        "IsCharteredIn",
        "DailyExpense"
      ],
      "boundToUnboundPattern": "Grid uses unbound columns for editing with data transfer to bound business object properties",
      "validationLists": [
        "BargeSizeCategory",
        "CoverType",
        "CoverSubType (filtered by CoverType)"
      ]
    }
  },
  "modern": {
    "api": {
      "authentication": "ApiKey",
      "attributePattern": "[ApiKey]",
      "endpoints": [
        {
          "method": "GET",
          "route": "api/BargeDailyExpense",
          "action": "GetList",
          "requiredAuth": "ApiKey",
          "futurePermission": "BargeDailyExpenseView",
          "description": "Retrieve list of barge daily expense dates with optional effective date filter"
        },
        {
          "method": "GET",
          "route": "api/BargeDailyExpense/{id}",
          "action": "Get",
          "requiredAuth": "ApiKey",
          "futurePermission": "BargeDailyExpenseView",
          "description": "Retrieve single barge daily expense date by ID with all expense entries"
        },
        {
          "method": "POST",
          "route": "api/BargeDailyExpense",
          "action": "Create",
          "requiredAuth": "ApiKey",
          "futurePermission": "BargeDailyExpenseModify",
          "description": "Create new barge daily expense date with expense entries"
        },
        {
          "method": "PUT",
          "route": "api/BargeDailyExpense/{id}",
          "action": "Update",
          "requiredAuth": "ApiKey",
          "futurePermission": "BargeDailyExpenseModify",
          "description": "Update existing barge daily expense date and its expense entries"
        },
        {
          "method": "DELETE",
          "route": "api/BargeDailyExpense/{id}",
          "action": "Delete",
          "requiredAuth": "ApiKey",
          "futurePermission": "BargeDailyExpenseModify",
          "description": "Delete barge daily expense date (hard delete)"
        },
        {
          "method": "DELETE",
          "route": "api/BargeDailyExpense/{parentId}/expense/{id}",
          "action": "DeleteExpense",
          "requiredAuth": "ApiKey",
          "futurePermission": "BargeDailyExpenseModify",
          "description": "Delete individual barge daily expense entry"
        }
      ]
    },
    "ui": {
      "authentication": "OIDC",
      "developmentAuth": "DevelopmentAutoSignInMiddleware",
      "attributePattern": "[Authorize]",
      "permissions": [
        {
          "name": "BargeDailyExpenseView",
          "enumValue": "AuthPermissions.BargeDailyExpenseView",
          "description": "View barge daily expense dates and expense entries",
          "granularity": "ReadOnly",
          "requiredFor": [
            "Index",
            "Search",
            "Details"
          ]
        },
        {
          "name": "BargeDailyExpenseModify",
          "enumValue": "AuthPermissions.BargeDailyExpenseModify",
          "description": "Create, update, and delete barge daily expense dates and expense entries",
          "granularity": "Modify",
          "requiredFor": [
            "Create",
            "Edit",
            "Delete",
            "AddExpense",
            "RemoveExpense",
            "UpdateExpense"
          ]
        }
      ],
      "gridEditingPermissions": {
        "description": "In-grid editing requires BargeDailyExpenseModify permission",
        "editActions": [
          "Edit cell values in SizeCategory, CoverType, CoverSubTypeID, IsCharteredIn, DailyExpense columns",
          "Add new expense entries via toolbar Add button",
          "Remove expense entries via toolbar Remove button"
        ]
      }
    },
    "permissionEnum": {
      "file": "Enums/AuthPermissions.cs",
      "entries": [
        {
          "name": "BargeDailyExpenseView",
          "description": "View barge daily expense dates"
        },
        {
          "name": "BargeDailyExpenseModify",
          "description": "Modify barge daily expense dates"
        }
      ]
    }
  },
  "businessLogic": {
    "parentEntity": "BargeDailyExpenseDate",
    "childEntity": "BargeDailyExpense",
    "childCollection": "BargeDailyExpenses",
    "primaryKey": "BargeDailyExpenseDateID",
    "childKey": "BargeDailyExpenseID",
    "effectiveDateTracking": true,
    "description": "Parent-child relationship where BargeDailyExpenseDate (effective date) contains multiple BargeDailyExpense entries (one per size/cover/charter combination)"
  },
  "dataModel": {
    "BargeDailyExpenseDate": {
      "properties": [
        {
          "name": "BargeDailyExpenseDateID",
          "type": "Integer",
          "description": "Primary key"
        },
        {
          "name": "EffectiveDate",
          "type": "Date",
          "description": "Date when these daily expense rates become effective",
          "required": true,
          "validation": "Must be valid date"
        }
      ]
    },
    "BargeDailyExpense": {
      "properties": [
        {
          "name": "BargeDailyExpenseID",
          "type": "Integer",
          "description": "Primary key"
        },
        {
          "name": "BargeDailyExpenseDateID",
          "type": "Integer",
          "description": "Foreign key to parent BargeDailyExpenseDate"
        },
        {
          "name": "SizeCategory",
          "type": "String",
          "description": "Barge size category (e.g., Jumbo, Standard)",
          "required": true,
          "validationList": "BargeSizeCategory"
        },
        {
          "name": "CoverType",
          "type": "String",
          "description": "Cover type (e.g., Open, Covered, Raked)",
          "required": true,
          "validationList": "CoverType"
        },
        {
          "name": "CoverSubTypeID",
          "type": "String",
          "description": "Cover sub-type, filtered by CoverType",
          "required": false,
          "validationList": "CoverSubType",
          "cascadingFilter": "Depends on CoverType selection"
        },
        {
          "name": "IsCharteredIn",
          "type": "Boolean",
          "description": "Whether barge is chartered-in or fleet-owned",
          "required": true
        },
        {
          "name": "DailyExpense",
          "type": "Decimal",
          "description": "Daily expense amount for this barge configuration",
          "required": true,
          "format": "Currency",
          "validation": "Must be valid decimal"
        }
      ]
    }
  },
  "notes": {
    "hardDelete": "BargeDailyExpenseDate uses hard delete (not soft delete), so Delete permission is separate concern",
    "subsystemIdentifier": "frmBargeDailyExpenseSearch - used for CSG Authorization subsystem mapping",
    "subsystemGroup": "GroupGlobalAdmin - part of Global Admin navigation group",
    "searchPermissions": "Search form buttons (Find, Reset) use ButtonType.Open which maps to read-only access",
    "modifyPermissions": "Detail form Submit button uses ButtonType.Submit which requires modify permission",
    "parentChildRelationship": "Two-level entity structure: BargeDailyExpenseDate (parent) contains BargeDailyExpenses collection (children)",
    "inGridEditing": "Unique pattern: Detail form uses in-grid editing for child objects instead of separate detail forms. No Modify button on toolbar.",
    "unboundColumns": "Grid uses unbound columns for editing with data transfer pattern: bound hidden columns -> unbound visible columns for editing -> back to business object properties",
    "toolbarButtonSecurity": "Toolbar buttons (Add, Remove) use _ToolbarButtonTypes hashtable pattern and ControlAuthorization.ToolbarButtonCanBeEnabled method",
    "validationLists": "SizeCategory and CoverType use validation lists; CoverSubTypeID is cascading based on CoverType",
    "cascadingLogic": "When CoverType changes, CoverSubTypeID is cleared and combo is repopulated with filtered values",
    "cellValidation": "DailyExpense column has data type validation (must be decimal) with BeforeExitEditMode validation",
    "gridSettings": "User grid settings (column widths, sort order) are saved/restored via MyAppSettingHelper",
    "noRowReselection": "Form deliberately avoids setting GridControlUniqueIdentifier to prevent row reselection interfering with cell editing",
    "editModeKeyboard": "Custom keyboard navigation: arrow keys move between cells while staying in edit mode",
    "effectiveDateSearch": "Search uses effective date parameter to filter historical daily expense rates"
  }
}
