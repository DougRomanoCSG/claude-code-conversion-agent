{
  "entity": "BargeCondition",
  "softDelete": false,
  "hasIsActive": false,
  "hasHardDelete": true,
  "description": "Tracks barge condition reports with associated photos and email notifications. Parent entity for BargeConditionPhoto child collection.",
  "storedProcedures": [
    {
      "name": "BargeConditionSelect",
      "operation": "GetById",
      "targetSqlFile": "BargeCondition_GetById.sql",
      "description": "Fetch single BargeCondition by BargeConditionID with child BargeConditionPhotoes",
      "parameters": [
        {
          "name": "@BargeConditionID",
          "type": "int",
          "sqlDbType": "SqlDbType.Int",
          "required": true,
          "direction": "Input",
          "description": "Primary key for BargeCondition"
        }
      ],
      "resultColumns": [
        {
          "column": "BargeConditionID",
          "property": "BargeConditionID",
          "type": "int",
          "sqlDbType": "SqlDbType.Int",
          "nullable": false,
          "isPrimaryKey": true
        },
        {
          "column": "BargeID",
          "property": "BargeID",
          "type": "int",
          "sqlDbType": "SqlDbType.Int",
          "nullable": false,
          "isForeignKey": true,
          "references": "Barge.BargeID"
        },
        {
          "column": "Note",
          "property": "Note",
          "type": "string",
          "sqlDbType": "SqlDbType.VarChar",
          "maxLength": 500,
          "nullable": false,
          "description": "Condition report note/description"
        },
        {
          "column": "EmailSentDateTime",
          "property": "EmailSentDateTime",
          "type": "DateTime?",
          "sqlDbType": "SqlDbType.DateTime",
          "nullable": true,
          "formatString": "SmartDateTimeFormat",
          "description": "Timestamp when condition report email was sent"
        },
        {
          "column": "CreateDateTime",
          "property": "CreateDateTime",
          "type": "DateTime",
          "sqlDbType": "SqlDbType.DateTime",
          "nullable": false,
          "isAuditField": true
        },
        {
          "column": "CreateUser",
          "property": "CreateUser",
          "type": "string",
          "sqlDbType": "SqlDbType.VarChar",
          "nullable": false,
          "isAuditField": true
        },
        {
          "column": "ModifyDateTime",
          "property": "ModifyDateTime",
          "type": "DateTime",
          "sqlDbType": "SqlDbType.DateTime",
          "nullable": false,
          "isAuditField": true
        },
        {
          "column": "ModifyUser",
          "property": "ModifyUser",
          "type": "string",
          "sqlDbType": "SqlDbType.VarChar",
          "nullable": false,
          "isAuditField": true
        }
      ],
      "childResultSets": [
        {
          "resultSetIndex": 1,
          "entity": "BargeConditionPhoto",
          "description": "Child photos for this condition report",
          "loadedVia": "LoadChildObjects with NextResult()"
        }
      ]
    },
    {
      "name": "BargeConditionList",
      "operation": "ListByParentId",
      "targetSqlFile": "BargeCondition_GetByBargeId.sql",
      "description": "List all BargeConditions for a specific Barge",
      "parameters": [
        {
          "name": "@BargeID",
          "type": "int",
          "sqlDbType": "SqlDbType.Int",
          "required": true,
          "direction": "Input",
          "description": "Foreign key to filter by Barge"
        }
      ],
      "resultColumns": [
        {
          "column": "BargeConditionID",
          "property": "BargeConditionID",
          "type": "int",
          "isPrimaryKey": true
        },
        {
          "column": "Note",
          "property": "Note",
          "type": "string"
        },
        {
          "column": "EmailSentDateTime",
          "property": "EmailSentDateTime",
          "type": "DateTime?",
          "formatString": "SmartDateTimeFormat"
        },
        {
          "column": "CreateDateTime",
          "property": "CreateDateTime",
          "type": "DateTime",
          "formatString": "SmartDateTimeFormat"
        },
        {
          "column": "CreateUser",
          "property": "CreateUser",
          "type": "string"
        }
      ],
      "listQueryFields": {
        "filterable": ["Note", "CreateUser", "CreateDateTime", "EmailSentDateTime"],
        "sortable": ["BargeConditionID", "CreateDateTime", "EmailSentDateTime"],
        "defaultSort": "CreateDateTime DESC"
      }
    },
    {
      "name": "BargeConditionUnsentList",
      "operation": "ListUnsent",
      "targetSqlFile": "BargeCondition_GetUnsent.sql",
      "description": "List BargeConditions where EmailSentDateTime IS NULL",
      "parameters": [],
      "resultColumns": [
        {
          "column": "BargeConditionID",
          "property": "BargeConditionID",
          "type": "int",
          "isPrimaryKey": true
        },
        {
          "column": "BargeNum",
          "property": "BargeNum",
          "type": "string",
          "description": "Barge number from joined Barge table"
        }
      ]
    },
    {
      "name": "BargeConditionInsert",
      "operation": "Insert",
      "targetSqlFile": "BargeCondition_Insert.sql",
      "description": "Create new BargeCondition record",
      "parameters": [
        {
          "name": "@BargeConditionID",
          "type": "int",
          "sqlDbType": "SqlDbType.Int",
          "required": true,
          "direction": "InputOutput",
          "description": "Primary key returned via OUTPUT parameter"
        },
        {
          "name": "@BargeID",
          "type": "int",
          "sqlDbType": "SqlDbType.Int",
          "required": true,
          "direction": "Input"
        },
        {
          "name": "@Note",
          "type": "string",
          "sqlDbType": "SqlDbType.VarChar",
          "maxLength": 500,
          "required": true,
          "direction": "Input"
        },
        {
          "name": "@EmailSentDateTime",
          "type": "DateTime?",
          "sqlDbType": "SqlDbType.DateTime",
          "required": false,
          "direction": "Input"
        },
        {
          "name": "@CreateDateTime",
          "type": "DateTime",
          "sqlDbType": "SqlDbType.DateTime",
          "required": true,
          "direction": "Input",
          "isAuditField": true
        },
        {
          "name": "@CreateUser",
          "type": "string",
          "sqlDbType": "SqlDbType.VarChar",
          "required": true,
          "direction": "Input",
          "isAuditField": true
        },
        {
          "name": "@ModifyDateTime",
          "type": "DateTime",
          "sqlDbType": "SqlDbType.DateTime",
          "required": true,
          "direction": "Input",
          "isAuditField": true
        },
        {
          "name": "@ModifyUser",
          "type": "string",
          "sqlDbType": "SqlDbType.VarChar",
          "required": true,
          "direction": "Input",
          "isAuditField": true
        }
      ],
      "outputParameters": [
        {
          "name": "@BargeConditionID",
          "description": "Returns newly created primary key via @@IDENTITY or SCOPE_IDENTITY()"
        }
      ]
    },
    {
      "name": "BargeConditionUpdate",
      "operation": "Update",
      "targetSqlFile": "BargeCondition_Update.sql",
      "description": "Update existing BargeCondition record",
      "parameters": [
        {
          "name": "@BargeConditionID",
          "type": "int",
          "sqlDbType": "SqlDbType.Int",
          "required": true,
          "direction": "Input",
          "description": "Primary key for WHERE clause"
        },
        {
          "name": "@BargeID",
          "type": "int",
          "sqlDbType": "SqlDbType.Int",
          "required": true,
          "direction": "Input"
        },
        {
          "name": "@Note",
          "type": "string",
          "sqlDbType": "SqlDbType.VarChar",
          "maxLength": 500,
          "required": true,
          "direction": "Input"
        },
        {
          "name": "@EmailSentDateTime",
          "type": "DateTime?",
          "sqlDbType": "SqlDbType.DateTime",
          "required": false,
          "direction": "Input"
        },
        {
          "name": "@ModifyDateTime",
          "type": "DateTime",
          "sqlDbType": "SqlDbType.DateTime",
          "required": true,
          "direction": "Input",
          "isAuditField": true
        },
        {
          "name": "@ModifyUser",
          "type": "string",
          "sqlDbType": "SqlDbType.VarChar",
          "required": true,
          "direction": "Input",
          "isAuditField": true
        }
      ]
    },
    {
      "name": "BargeConditionDelete",
      "operation": "Delete",
      "targetSqlFile": "BargeCondition_Delete.sql",
      "description": "Hard delete BargeCondition record (not soft delete). Custom override deletes associated photos from server.",
      "parameters": [
        {
          "name": "@BargeConditionID",
          "type": "int",
          "sqlDbType": "SqlDbType.Int",
          "required": true,
          "direction": "Input",
          "description": "Primary key for WHERE clause"
        }
      ],
      "customLogic": {
        "location": "BargeCondition.SaveNoRefresh() override",
        "description": "Before delete, collects photo filenames, then after DB delete calls Document.DeleteFileFromServer() for each photo"
      }
    }
  ],
  "childEntities": [
    {
      "entity": "BargeConditionPhoto",
      "relationshipType": "OneToMany",
      "parentKey": "BargeConditionID",
      "foreignKey": "BargeConditionID",
      "collectionProperty": "BargeConditionPhotoes",
      "description": "Photos attached to condition report",
      "storedProcedures": [
        {
          "name": "BargeConditionPhotoSelect",
          "operation": "GetById",
          "targetSqlFile": "BargeConditionPhoto_GetById.sql"
        },
        {
          "name": "BargeConditionPhotoesSelect",
          "operation": "ListByParentId",
          "targetSqlFile": "BargeConditionPhoto_GetByBargeConditionId.sql",
          "parameters": [
            {
              "name": "@BargeConditionID",
              "type": "int",
              "required": true
            }
          ]
        },
        {
          "name": "BargeConditionPhotoInsert",
          "operation": "Insert",
          "targetSqlFile": "BargeConditionPhoto_Insert.sql"
        },
        {
          "name": "BargeConditionPhotoUpdate",
          "operation": "Update",
          "targetSqlFile": "BargeConditionPhoto_Update.sql"
        },
        {
          "name": "BargeConditionPhotoDelete",
          "operation": "Delete",
          "targetSqlFile": "BargeConditionPhoto_Delete.sql"
        }
      ],
      "properties": [
        {
          "column": "BargeConditionPhotoID",
          "property": "BargeConditionPhotoID",
          "type": "int",
          "isPrimaryKey": true
        },
        {
          "column": "BargeConditionID",
          "property": "BargeConditionID",
          "type": "int",
          "isForeignKey": true
        },
        {
          "column": "DocumentID",
          "property": "DocumentID",
          "type": "int",
          "isForeignKey": true,
          "references": "Document.DocumentID"
        }
      ]
    }
  ],
  "sqlFiles": [
    {
      "fileName": "BargeCondition_GetById.sql",
      "operation": "GetById",
      "description": "Fetch single record by BargeConditionID with child photos via NEXT RESULT SET",
      "embeddedResource": true,
      "loadMethod": "SqlText.GetSqlText(\"BargeCondition_GetById\")",
      "location": "src/BargeOps.API/src/Admin.Infrastructure/DataAccess/Sql/BargeCondition/"
    },
    {
      "fileName": "BargeCondition_GetByBargeId.sql",
      "operation": "ListByParentId",
      "description": "List all conditions for a specific Barge (replaces BargeConditionList SP)",
      "embeddedResource": true,
      "loadMethod": "SqlText.GetSqlText(\"BargeCondition_GetByBargeId\")",
      "location": "src/BargeOps.API/src/Admin.Infrastructure/DataAccess/Sql/BargeCondition/"
    },
    {
      "fileName": "BargeCondition_GetUnsent.sql",
      "operation": "ListUnsent",
      "description": "List conditions where EmailSentDateTime IS NULL with Barge join",
      "embeddedResource": true,
      "loadMethod": "SqlText.GetSqlText(\"BargeCondition_GetUnsent\")",
      "location": "src/BargeOps.API/src/Admin.Infrastructure/DataAccess/Sql/BargeCondition/"
    },
    {
      "fileName": "BargeCondition_Insert.sql",
      "operation": "Insert",
      "description": "Create new record, return BargeConditionID via SCOPE_IDENTITY()",
      "embeddedResource": true,
      "loadMethod": "SqlText.GetSqlText(\"BargeCondition_Insert\")",
      "location": "src/BargeOps.API/src/Admin.Infrastructure/DataAccess/Sql/BargeCondition/"
    },
    {
      "fileName": "BargeCondition_Update.sql",
      "operation": "Update",
      "description": "Update existing record by BargeConditionID",
      "embeddedResource": true,
      "loadMethod": "SqlText.GetSqlText(\"BargeCondition_Update\")",
      "location": "src/BargeOps.API/src/Admin.Infrastructure/DataAccess/Sql/BargeCondition/"
    },
    {
      "fileName": "BargeCondition_Delete.sql",
      "operation": "Delete",
      "description": "Hard delete record (CASCADE to child photos or handle in transaction)",
      "embeddedResource": true,
      "loadMethod": "SqlText.GetSqlText(\"BargeCondition_Delete\")",
      "location": "src/BargeOps.API/src/Admin.Infrastructure/DataAccess/Sql/BargeCondition/"
    },
    {
      "fileName": "BargeConditionPhoto_GetById.sql",
      "operation": "GetById",
      "description": "Fetch single photo by BargeConditionPhotoID",
      "embeddedResource": true,
      "loadMethod": "SqlText.GetSqlText(\"BargeConditionPhoto_GetById\")",
      "location": "src/BargeOps.API/src/Admin.Infrastructure/DataAccess/Sql/BargeCondition/"
    },
    {
      "fileName": "BargeConditionPhoto_GetByBargeConditionId.sql",
      "operation": "ListByParentId",
      "description": "List all photos for a BargeCondition",
      "embeddedResource": true,
      "loadMethod": "SqlText.GetSqlText(\"BargeConditionPhoto_GetByBargeConditionId\")",
      "location": "src/BargeOps.API/src/Admin.Infrastructure/DataAccess/Sql/BargeCondition/"
    },
    {
      "fileName": "BargeConditionPhoto_Insert.sql",
      "operation": "Insert",
      "description": "Create photo record",
      "embeddedResource": true,
      "loadMethod": "SqlText.GetSqlText(\"BargeConditionPhoto_Insert\")",
      "location": "src/BargeOps.API/src/Admin.Infrastructure/DataAccess/Sql/BargeCondition/"
    },
    {
      "fileName": "BargeConditionPhoto_Update.sql",
      "operation": "Update",
      "description": "Update photo record",
      "embeddedResource": true,
      "loadMethod": "SqlText.GetSqlText(\"BargeConditionPhoto_Update\")",
      "location": "src/BargeOps.API/src/Admin.Infrastructure/DataAccess/Sql/BargeCondition/"
    },
    {
      "fileName": "BargeConditionPhoto_Delete.sql",
      "operation": "Delete",
      "description": "Delete photo record",
      "embeddedResource": true,
      "loadMethod": "SqlText.GetSqlText(\"BargeConditionPhoto_Delete\")",
      "location": "src/BargeOps.API/src/Admin.Infrastructure/DataAccess/Sql/BargeCondition/"
    }
  ],
  "repositoryInterface": {
    "name": "IBargeConditionRepository",
    "namespace": "Admin.Infrastructure.Abstractions",
    "location": "src/BargeOps.API/src/Admin.Infrastructure/Abstractions/IBargeConditionRepository.cs",
    "methods": [
      {
        "name": "GetByIdAsync",
        "returnType": "Task<BargeConditionDto>",
        "parameters": ["int bargeConditionId", "CancellationToken cancellationToken = default"],
        "description": "Fetch single condition with child photos"
      },
      {
        "name": "GetByBargeIdAsync",
        "returnType": "Task<IEnumerable<BargeConditionDto>>",
        "parameters": ["int bargeId", "CancellationToken cancellationToken = default"],
        "description": "List all conditions for a Barge"
      },
      {
        "name": "GetUnsentAsync",
        "returnType": "Task<IEnumerable<BargeConditionUnsentDto>>",
        "parameters": ["CancellationToken cancellationToken = default"],
        "description": "List unsent conditions (EmailSentDateTime IS NULL)"
      },
      {
        "name": "InsertAsync",
        "returnType": "Task<int>",
        "parameters": ["BargeConditionDto bargeCondition", "CancellationToken cancellationToken = default"],
        "description": "Create new condition, return BargeConditionID"
      },
      {
        "name": "UpdateAsync",
        "returnType": "Task",
        "parameters": ["BargeConditionDto bargeCondition", "CancellationToken cancellationToken = default"],
        "description": "Update existing condition"
      },
      {
        "name": "DeleteAsync",
        "returnType": "Task<bool>",
        "parameters": ["int bargeConditionId", "CancellationToken cancellationToken = default"],
        "description": "Hard delete condition and cascade to photos"
      },
      {
        "name": "GetPhotosAsync",
        "returnType": "Task<IEnumerable<BargeConditionPhotoDto>>",
        "parameters": ["int bargeConditionId", "CancellationToken cancellationToken = default"],
        "description": "Fetch all photos for a condition"
      },
      {
        "name": "InsertPhotoAsync",
        "returnType": "Task<int>",
        "parameters": ["BargeConditionPhotoDto photo", "CancellationToken cancellationToken = default"],
        "description": "Add photo to condition"
      },
      {
        "name": "DeletePhotoAsync",
        "returnType": "Task<bool>",
        "parameters": ["int bargeConditionPhotoId", "CancellationToken cancellationToken = default"],
        "description": "Delete photo record (consider also deleting physical file)"
      }
    ]
  },
  "repositoryImplementation": {
    "name": "BargeConditionRepository",
    "namespace": "Admin.Infrastructure.Repositories",
    "location": "src/BargeOps.API/src/Admin.Infrastructure/Repositories/BargeConditionRepository.cs",
    "dependencies": [
      "IDbConnectionFactory",
      "IDbHelper (if using ListQuery)"
    ],
    "pattern": "Dapper with embedded SQL resources loaded via SqlText.GetSqlText()",
    "notes": [
      "Use SqlConnection for connection management",
      "Use QuerySingleOrDefaultAsync for GetById",
      "Use QueryAsync for list operations",
      "Use ExecuteScalarAsync<int> for Insert to get ID",
      "Use ExecuteAsync for Update/Delete",
      "Handle transactions for parent-child operations",
      "Consider file deletion logic in DeleteAsync for photos"
    ]
  },
  "dtos": {
    "namespace": "BargeOps.Shared.Dto",
    "location": "src/BargeOps.Shared/BargeOps.Shared/Dto/",
    "classes": [
      {
        "name": "BargeConditionDto",
        "properties": [
          {
            "name": "BargeConditionID",
            "type": "int",
            "nullable": false
          },
          {
            "name": "BargeID",
            "type": "int",
            "nullable": false
          },
          {
            "name": "Note",
            "type": "string",
            "nullable": false,
            "maxLength": 500
          },
          {
            "name": "EmailSentDateTime",
            "type": "DateTime?",
            "nullable": true
          },
          {
            "name": "CreateDateTime",
            "type": "DateTime",
            "nullable": false
          },
          {
            "name": "CreateUser",
            "type": "string",
            "nullable": false
          },
          {
            "name": "ModifyDateTime",
            "type": "DateTime",
            "nullable": false
          },
          {
            "name": "ModifyUser",
            "type": "string",
            "nullable": false
          },
          {
            "name": "Photos",
            "type": "List<BargeConditionPhotoDto>",
            "nullable": true,
            "description": "Child collection of photos"
          }
        ]
      },
      {
        "name": "BargeConditionUnsentDto",
        "description": "Lightweight DTO for unsent conditions list",
        "properties": [
          {
            "name": "BargeConditionID",
            "type": "int",
            "nullable": false
          },
          {
            "name": "BargeNum",
            "type": "string",
            "nullable": false,
            "description": "Denormalized from Barge table"
          }
        ]
      },
      {
        "name": "BargeConditionPhotoDto",
        "properties": [
          {
            "name": "BargeConditionPhotoID",
            "type": "int",
            "nullable": false
          },
          {
            "name": "BargeConditionID",
            "type": "int",
            "nullable": false
          },
          {
            "name": "DocumentID",
            "type": "int",
            "nullable": false
          },
          {
            "name": "Filename",
            "type": "string",
            "nullable": true,
            "description": "Denormalized from Document table for convenience"
          }
        ]
      }
    ]
  },
  "dataTransformations": [
    {
      "field": "EmailSentDateTime",
      "type": "DateTime",
      "transformation": "SmartDate with SmartDateTimeFormat (military time HH:mm)",
      "handling": "GetSmartDate(column, formatString)"
    },
    {
      "field": "CreateDateTime",
      "type": "DateTime",
      "transformation": "SmartDate with SmartDateTimeFormat",
      "handling": "GetSmartDate(column, formatString)"
    }
  ],
  "businessRules": [
    {
      "field": "Note",
      "rule": "Required",
      "message": "Note is required",
      "validation": "String.IsNullOrEmpty(p_Note)"
    },
    {
      "field": "Note",
      "rule": "MaxLength",
      "maxLength": 500,
      "message": "Note exceeds maximum length of 500.",
      "validation": "p_Note.Length > MaxLength.Note"
    }
  ],
  "auditFields": {
    "tracked": true,
    "fields": ["BargeConditionID", "BargeID", "Note", "EmailSentDateTime"],
    "implementation": "FieldAudit method called on property setters",
    "storage": "AuditFieldEvent collection updated in UpdateChildObjects"
  },
  "csprojConfiguration": {
    "location": "src/BargeOps.API/src/Admin.Infrastructure/Admin.Infrastructure.csproj",
    "itemGroup": [
      "<EmbeddedResource Include=\"DataAccess\\Sql\\BargeCondition\\BargeCondition_GetById.sql\" />",
      "<EmbeddedResource Include=\"DataAccess\\Sql\\BargeCondition\\BargeCondition_GetByBargeId.sql\" />",
      "<EmbeddedResource Include=\"DataAccess\\Sql\\BargeCondition\\BargeCondition_GetUnsent.sql\" />",
      "<EmbeddedResource Include=\"DataAccess\\Sql\\BargeCondition\\BargeCondition_Insert.sql\" />",
      "<EmbeddedResource Include=\"DataAccess\\Sql\\BargeCondition\\BargeCondition_Update.sql\" />",
      "<EmbeddedResource Include=\"DataAccess\\Sql\\BargeCondition\\BargeCondition_Delete.sql\" />",
      "<EmbeddedResource Include=\"DataAccess\\Sql\\BargeCondition\\BargeConditionPhoto_GetById.sql\" />",
      "<EmbeddedResource Include=\"DataAccess\\Sql\\BargeCondition\\BargeConditionPhoto_GetByBargeConditionId.sql\" />",
      "<EmbeddedResource Include=\"DataAccess\\Sql\\BargeCondition\\BargeConditionPhoto_Insert.sql\" />",
      "<EmbeddedResource Include=\"DataAccess\\Sql\\BargeCondition\\BargeConditionPhoto_Update.sql\" />",
      "<EmbeddedResource Include=\"DataAccess\\Sql\\BargeCondition\\BargeConditionPhoto_Delete.sql\" />"
    ],
    "note": "All SQL files MUST be marked as embedded resources"
  },
  "sqlTextConfiguration": {
    "location": "src/BargeOps.API/src/Admin.Infrastructure/DataAccess/SqlText.cs",
    "additions": [
      "// BargeCondition",
      "public static string GetBargeConditionById => Get(\"BargeCondition.BargeCondition_GetById\");",
      "public static string GetBargeConditionByBargeId => Get(\"BargeCondition.BargeCondition_GetByBargeId\");",
      "public static string GetBargeConditionUnsent => Get(\"BargeCondition.BargeCondition_GetUnsent\");",
      "public static string InsertBargeCondition => Get(\"BargeCondition.BargeCondition_Insert\");",
      "public static string UpdateBargeCondition => Get(\"BargeCondition.BargeCondition_Update\");",
      "public static string DeleteBargeCondition => Get(\"BargeCondition.BargeCondition_Delete\");",
      "",
      "// BargeConditionPhoto",
      "public static string GetBargeConditionPhotoById => Get(\"BargeCondition.BargeConditionPhoto_GetById\");",
      "public static string GetBargeConditionPhotoByBargeConditionId => Get(\"BargeCondition.BargeConditionPhoto_GetByBargeConditionId\");",
      "public static string InsertBargeConditionPhoto => Get(\"BargeCondition.BargeConditionPhoto_Insert\");",
      "public static string UpdateBargeConditionPhoto => Get(\"BargeCondition.BargeConditionPhoto_Update\");",
      "public static string DeleteBargeConditionPhoto => Get(\"BargeCondition.BargeConditionPhoto_Delete\");"
    ]
  },
  "specialConsiderations": [
    {
      "area": "File Management",
      "description": "Delete operation requires special handling to remove physical photo files from server",
      "implementation": "SaveNoRefresh override in legacy code collects photo filenames before delete, then calls Document.DeleteFileFromServer()",
      "modernApproach": "Repository DeleteAsync should handle file deletion or trigger event for file cleanup service"
    },
    {
      "area": "Child Collection Loading",
      "description": "Photos loaded as second result set via NextResult() pattern",
      "modernApproach": "Use Dapper multi-mapping or separate query for photos, populate Photos collection on parent DTO"
    },
    {
      "area": "Email Notification",
      "description": "EmailSentDateTime tracks when condition report was emailed",
      "modernApproach": "Consider separate notification service/endpoint to update this field"
    },
    {
      "area": "Hard Delete",
      "description": "This entity uses hard delete (no IsActive field), which is uncommon",
      "recommendation": "Confirm business requirement for hard delete vs soft delete during implementation"
    }
  ],
  "legacyReferences": {
    "listClass": "C:\\Dev\\BargeOps.Admin.Mono\\OnShore\\apps\\Onshore.BusinessLogic\\Lists\\BargeConditionList.vb",
    "unsentListClass": "C:\\Dev\\BargeOps.Admin.Mono\\OnShore\\apps\\Onshore.BusinessLogic\\Lists\\BargeConditionUnsentList.vb",
    "businessObjectBase": "C:\\Dev\\BargeOps.Admin.Mono\\OnShore\\apps\\Onshore.BusinessLogic\\Business Objects\\Base Classes\\BargeConditionBase.vb",
    "businessObject": "C:\\Dev\\BargeOps.Admin.Mono\\OnShore\\apps\\Onshore.BusinessLogic\\Business Objects\\BargeCondition.vb",
    "childPhotoBase": "C:\\Dev\\BargeOps.Admin.Mono\\OnShore\\apps\\Onshore.BusinessLogic\\Business Objects\\Base Classes\\BargeConditionPhotoBase.vb"
  },
  "implementationNotes": [
    "CRITICAL: All SQL files MUST be embedded resources in .csproj",
    "CRITICAL: Use SqlText.GetSqlText() to load SQL, NEVER inline SQL strings",
    "No soft delete - this entity uses hard delete with cascade to child photos",
    "EmailSentDateTime is nullable - indicates if notification was sent",
    "Note field is required with 500 character limit",
    "Child photos loaded via second result set or separate query",
    "Audit trail tracking enabled for field changes",
    "Special file deletion logic required for photos on delete",
    "Consider transaction handling for parent-child operations",
    "Modern pattern: DTOs returned directly from Dapper queries"
  ]
}
