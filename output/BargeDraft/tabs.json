{
  "formName": "frmBargeDraft",
  "formTitle": "Barge Draft Detail",
  "formType": "Detail (No Tabs - Vertical Sections)",
  "usesTabControl": false,
  "layout": "Vertical group boxes in panel",
  "sections": [
    {
      "sectionName": "grpBow",
      "sectionText": "Bow",
      "order": 1,
      "dockStyle": "Top",
      "purpose": "Capture bow draft measurements for port and starboard",
      "controls": [
        {
          "name": "lblDraftPortBow",
          "type": "UltraLabel",
          "label": "Port (ft/in):",
          "section": "Bow Measurements"
        },
        {
          "name": "txtDraftPortBowFeet",
          "type": "UltraTextEditor",
          "label": "Port Bow Feet",
          "required": false,
          "validationType": "Int32",
          "defaultValue": "0",
          "businessProperty": "DraftPortBowFeet",
          "section": "Bow Measurements"
        },
        {
          "name": "txtDraftPortBowInches",
          "type": "UltraTextEditor",
          "label": "Port Bow Inches",
          "required": false,
          "validationType": "Int32",
          "defaultValue": "0",
          "businessProperty": "DraftPortBowInches",
          "section": "Bow Measurements"
        },
        {
          "name": "lblDraftBowStarboard",
          "type": "UltraLabel",
          "label": "Starboard (ft/in):",
          "section": "Bow Measurements"
        },
        {
          "name": "txtDraftStarboardBowFeet",
          "type": "UltraTextEditor",
          "label": "Starboard Bow Feet",
          "required": false,
          "validationType": "Int32",
          "defaultValue": "0",
          "businessProperty": "DraftStarboardBowFeet",
          "section": "Bow Measurements"
        },
        {
          "name": "txtDraftStarboardBowInches",
          "type": "UltraTextEditor",
          "label": "Starboard Bow Inches",
          "required": false,
          "validationType": "Int32",
          "defaultValue": "0",
          "businessProperty": "DraftStarboardBowInches",
          "section": "Bow Measurements"
        }
      ]
    },
    {
      "sectionName": "grpStern",
      "sectionText": "Stern",
      "order": 2,
      "dockStyle": "Top",
      "purpose": "Capture stern draft measurements for port and starboard",
      "controls": [
        {
          "name": "lblDraftPortStern",
          "type": "UltraLabel",
          "label": "Port (ft/in):",
          "section": "Stern Measurements"
        },
        {
          "name": "txtDraftPortSternFeet",
          "type": "UltraTextEditor",
          "label": "Port Stern Feet",
          "required": false,
          "validationType": "Int32",
          "defaultValue": "0",
          "businessProperty": "DraftPortSternFeet",
          "section": "Stern Measurements"
        },
        {
          "name": "txtDraftPortSternInches",
          "type": "UltraTextEditor",
          "label": "Port Stern Inches",
          "required": false,
          "validationType": "Int32",
          "defaultValue": "0",
          "businessProperty": "DraftPortSternInches",
          "section": "Stern Measurements"
        },
        {
          "name": "lblDraftPortStarboard",
          "type": "UltraLabel",
          "label": "Starboard (ft/in):",
          "section": "Stern Measurements"
        },
        {
          "name": "txtDraftStarboardSternFeet",
          "type": "UltraTextEditor",
          "label": "Starboard Stern Feet",
          "required": false,
          "validationType": "Int32",
          "defaultValue": "0",
          "businessProperty": "DraftStarboardSternFeet",
          "section": "Stern Measurements"
        },
        {
          "name": "txtDraftStarboardSternInches",
          "type": "UltraTextEditor",
          "label": "Starboard Stern Inches",
          "required": false,
          "validationType": "Int32",
          "defaultValue": "0",
          "businessProperty": "DraftStarboardSternInches",
          "section": "Stern Measurements"
        }
      ]
    },
    {
      "sectionName": "grpOverall",
      "sectionText": "Overall",
      "order": 3,
      "dockStyle": "Top",
      "purpose": "Display overall draft calculations (deepest and average)",
      "controls": [
        {
          "name": "lblDraft",
          "type": "UltraLabel",
          "label": "Deepest (ft/in):",
          "section": "Overall Calculations"
        },
        {
          "name": "txtDraftFeet",
          "type": "UltraTextEditor",
          "label": "Deepest Draft Feet",
          "required": false,
          "validationType": "Int32",
          "defaultValue": "0",
          "businessProperty": "DraftFeet",
          "section": "Overall Calculations",
          "calculatedFrom": "Four corner drafts"
        },
        {
          "name": "txtDraftInches",
          "type": "UltraTextEditor",
          "label": "Deepest Draft Inches",
          "required": false,
          "validationType": "Int32",
          "defaultValue": "0",
          "businessProperty": "DraftInches",
          "section": "Overall Calculations",
          "calculatedFrom": "Four corner drafts"
        },
        {
          "name": "lblDraftAverage",
          "type": "UltraLabel",
          "label": "Average (ft/in):",
          "section": "Overall Calculations"
        },
        {
          "name": "txtDraftAverageFeet",
          "type": "UltraTextEditor",
          "label": "Average Draft Feet",
          "required": false,
          "validationType": "Int32",
          "defaultValue": "0",
          "businessProperty": "DraftAverageFeet",
          "section": "Overall Calculations",
          "calculatedFrom": "Four corner drafts",
          "conditionalVisibility": "Hidden when EventType != DraftSurvey"
        },
        {
          "name": "txtDraftAverageInches",
          "type": "UltraTextEditor",
          "label": "Average Draft Inches",
          "required": false,
          "validationType": "Int32",
          "defaultValue": "0",
          "businessProperty": "DraftAverageInches",
          "section": "Overall Calculations",
          "calculatedFrom": "Four corner drafts",
          "conditionalVisibility": "Hidden when EventType != DraftSurvey"
        }
      ]
    },
    {
      "sectionName": "grpTonnage",
      "sectionText": "Quantity",
      "order": 4,
      "dockStyle": "Top",
      "purpose": "Calculate and display tonnage quantities for draft survey",
      "conditionalVisibility": "Visible only when EventType == DraftSurvey",
      "controls": [
        {
          "name": "lblEstCargoDeadweight",
          "type": "UltraLabel",
          "label": "Est. cargo deadweight:",
          "section": "Tonnage Calculation"
        },
        {
          "name": "txtEstimatedCargoDeadweight",
          "type": "UltraTextEditor",
          "label": "Estimated Cargo Deadweight",
          "required": false,
          "validationType": "Decimal",
          "defaultValue": "9,999.99",
          "businessProperty": "EstimatedCargoDeadweight",
          "readOnly": true,
          "calculatedFrom": "Average draft",
          "section": "Tonnage Calculation"
        },
        {
          "name": "lblEstCargoDeadweightBasedOn",
          "type": "UltraLabel",
          "label": "(based on average draft)",
          "section": "Tonnage Calculation",
          "dynamicText": "Changes based on LoadStatus"
        },
        {
          "name": "lblMinus",
          "type": "UltraLabel",
          "label": "-",
          "section": "Tonnage Calculation"
        },
        {
          "name": "lblLightshipCorrection",
          "type": "UltraLabel",
          "label": "Lightship correction:",
          "section": "Tonnage Calculation"
        },
        {
          "name": "txtLightshipCorrection",
          "type": "UltraTextEditor",
          "label": "Lightship Correction",
          "required": false,
          "validationType": "Decimal",
          "defaultValue": "0.00",
          "businessProperty": "LightshipCorrection",
          "readOnly": true,
          "calculatedFrom": "Draft when empty",
          "section": "Tonnage Calculation"
        },
        {
          "name": "lblLightshipCorrectionBasedOn",
          "type": "UltraLabel",
          "label": "(based on draft when empty)",
          "section": "Tonnage Calculation",
          "dynamicText": "Changes based on LoadStatus"
        },
        {
          "name": "lblPlus",
          "type": "UltraLabel",
          "label": "+",
          "section": "Tonnage Calculation"
        },
        {
          "name": "lblAdjustmentTons",
          "type": "UltraLabel",
          "label": "Adjustment:",
          "section": "Tonnage Calculation"
        },
        {
          "name": "txtAdjustmentTons",
          "type": "UltraTextEditor",
          "label": "Adjustment Tons",
          "required": false,
          "validationType": "Decimal",
          "defaultValue": "0.00",
          "businessProperty": "AdjustmentTons",
          "section": "Tonnage Calculation"
        },
        {
          "name": "lblEquals",
          "type": "UltraLabel",
          "label": "=",
          "section": "Tonnage Calculation"
        },
        {
          "name": "lblLoadUnloadTons",
          "type": "UltraLabel",
          "label": "Calculated quantity:",
          "section": "Tonnage Calculation"
        },
        {
          "name": "txtLoadUnloadTons",
          "type": "UltraTextEditor",
          "label": "Load/Unload Tons",
          "required": false,
          "validationType": "Decimal",
          "defaultValue": "9,999.99",
          "businessProperty": "LoadUnloadTons",
          "readOnly": true,
          "calculatedFrom": "EstimatedCargoDeadweight - LightshipCorrection + AdjustmentTons",
          "section": "Tonnage Calculation"
        }
      ]
    }
  ],
  "sharedControls": {
    "location": "Bottom of form (in pnlBargeDraftDetail)",
    "controls": [
      {
        "name": "btnSet",
        "type": "UltraButton",
        "text": "&Set",
        "action": "Submit",
        "buttonType": "Submit",
        "behavior": "Validates Draft object, applies changes to Barge or BargeEvent",
        "tabIndex": 4
      },
      {
        "name": "btnCancel",
        "type": "UltraButton",
        "text": "&Cancel",
        "action": "Cancel",
        "buttonType": "Cancel",
        "behavior": "Cancels edit and closes form",
        "tabIndex": 5,
        "dynamicText": "Changes to '&Close' when voided"
      },
      {
        "name": "btnClearAll",
        "type": "UltraButton",
        "text": "C&lear All",
        "action": "Clear",
        "buttonType": "Action",
        "behavior": "Clears all draft fields",
        "tabIndex": 6
      },
      {
        "name": "staStatus",
        "type": "UltraStatusBar",
        "purpose": "Display validation messages from ValidatorExtender"
      }
    ]
  },
  "businessLogic": {
    "primaryEntity": "Draft",
    "supportedModes": [
      "Barge (standalone draft entry)",
      "BargeEvent (draft for specific event)"
    ],
    "calculations": [
      {
        "description": "Overall draft (deepest) calculated from four corner drafts",
        "triggers": [
          "txtDraftPortBowFeet",
          "txtDraftPortBowInches",
          "txtDraftStarboardBowFeet",
          "txtDraftStarboardBowInches",
          "txtDraftPortSternFeet",
          "txtDraftPortSternInches",
          "txtDraftStarboardSternFeet",
          "txtDraftStarboardSternInches"
        ],
        "updates": [
          "txtDraftFeet",
          "txtDraftInches"
        ]
      },
      {
        "description": "Average draft calculated from four corner drafts",
        "triggers": [
          "txtDraftPortBowFeet",
          "txtDraftPortBowInches",
          "txtDraftStarboardBowFeet",
          "txtDraftStarboardBowInches",
          "txtDraftPortSternFeet",
          "txtDraftPortSternInches",
          "txtDraftStarboardSternFeet",
          "txtDraftStarboardSternInches",
          "txtDraftFeet",
          "txtDraftInches"
        ],
        "updates": [
          "txtDraftAverageFeet",
          "txtDraftAverageInches"
        ]
      },
      {
        "description": "Tonnage calculations for draft survey",
        "triggers": [
          "txtDraftAverageFeet",
          "txtDraftAverageInches",
          "txtAdjustmentTons"
        ],
        "updates": [
          "txtEstimatedCargoDeadweight",
          "txtLightshipCorrection",
          "txtLoadUnloadTons"
        ],
        "formula": "LoadUnloadTons = EstimatedCargoDeadweight - LightshipCorrection + AdjustmentTons"
      }
    ],
    "conditionalLogic": [
      {
        "condition": "EventTypeEnumVal != Lists.EventTypeList.EventTypes.DraftSurvey",
        "action": "Hide lblDraftAverage, txtDraftAverageFeet, txtDraftAverageInches, grpTonnage"
      },
      {
        "condition": "_Draft.IsVoidOnLoad = True",
        "action": "Set all input fields to ReadOnly, disable btnSet and btnClearAll, change btnCancel text to '&Close'"
      },
      {
        "condition": "LoadStatusEnumVal = Empty",
        "action": "lblEstCargoDeadweightBasedOn = '(based on draft when loaded)', lblLightshipCorrectionBasedOn = '(based on average draft)'"
      },
      {
        "condition": "LoadStatusEnumVal = Load or PartLoad",
        "action": "lblEstCargoDeadweightBasedOn = '(based on average draft)', lblLightshipCorrectionBasedOn = '(based on draft when empty)'"
      }
    ],
    "validationExtender": {
      "displayControl": "staStatus",
      "validationRules": [
        {
          "control": "txtDraftFeet",
          "validationType": "Int32"
        },
        {
          "control": "txtDraftInches",
          "validationType": "Int32"
        },
        {
          "control": "txtDraftPortBowFeet",
          "validationType": "Int32"
        },
        {
          "control": "txtDraftPortBowInches",
          "validationType": "Int32"
        },
        {
          "control": "txtDraftStarboardBowFeet",
          "validationType": "Int32"
        },
        {
          "control": "txtDraftStarboardBowInches",
          "validationType": "Int32"
        },
        {
          "control": "txtDraftPortSternFeet",
          "validationType": "Int32"
        },
        {
          "control": "txtDraftPortSternInches",
          "validationType": "Int32"
        },
        {
          "control": "txtDraftStarboardSternFeet",
          "validationType": "Int32"
        },
        {
          "control": "txtDraftStarboardSternInches",
          "validationType": "Int32"
        },
        {
          "control": "txtDraftAverageFeet",
          "validationType": "Int32"
        },
        {
          "control": "txtDraftAverageInches",
          "validationType": "Int32"
        },
        {
          "control": "txtEstimatedCargoDeadweight",
          "validationType": "Decimal"
        },
        {
          "control": "txtLightshipCorrection",
          "validationType": "Decimal"
        },
        {
          "control": "txtAdjustmentTons",
          "validationType": "Decimal"
        },
        {
          "control": "txtLoadUnloadTons",
          "validationType": "Decimal"
        }
      ]
    }
  },
  "modernImplementation": {
    "note": "This form uses group boxes instead of tabs. Modern implementation should use Bootstrap Cards or Accordions",
    "recommendedApproach": "Bootstrap Cards with header styling",
    "sections": [
      {
        "cardTitle": "Bow",
        "cardBody": "Port and Starboard bow draft fields (feet/inches)"
      },
      {
        "cardTitle": "Stern",
        "cardBody": "Port and Starboard stern draft fields (feet/inches)"
      },
      {
        "cardTitle": "Overall",
        "cardBody": "Deepest and Average draft calculations"
      },
      {
        "cardTitle": "Quantity",
        "cardBody": "Tonnage calculations (conditional visibility)"
      }
    ]
  }
}
