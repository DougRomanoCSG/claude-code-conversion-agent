{
  "formName": "frmBargePositions",
  "formType": "workspace-based",
  "hasTraditionalTabs": false,
  "description": "Barge fleet positioning system with dual-grid workspace and mode-based views",
  "mainGrids": [
    {
      "name": "ctlWorkspace",
      "type": "CsgContainerGrid",
      "purpose": "Primary workspace for barge positioning and tow diagrams",
      "dockStyle": "Top",
      "properties": {
        "allowDrop": true,
        "autoScroll": true,
        "cellSize": "90x24",
        "dimensions": "3x3",
        "dragMode": "Move",
        "multiSelectMode": "Single",
        "showHeaders": false
      },
      "supportedModes": [
        "In Fleet",
        "At Facility/Ship",
        "Midstream-In Update",
        "Midstream-Out Update",
        "Tow Diagram"
      ]
    },
    {
      "name": "ctlTierGroup",
      "type": "CsgContainerGrid",
      "purpose": "Tier group visualization for facility/berth barges",
      "dockStyle": "Fill",
      "properties": {
        "allowDrop": true,
        "autoScroll": true,
        "cellSize": "90x24",
        "dimensions": "4x4",
        "dragMode": "Move",
        "multiSelectMode": "Single",
        "origin": "Bottom"
      },
      "associatedToolbar": "TierGroupToolbarManager"
    }
  ],
  "toolbarManagers": [
    {
      "name": "MainToolbarManager",
      "purpose": "Main form operations and mode selection",
      "toolbars": [
        {
          "name": "UltraToolbar1",
          "dockedRow": 0,
          "tools": [
            {
              "key": "Mode Combo",
              "type": "ComboBoxTool",
              "caption": "Mode:",
              "width": 196,
              "values": [
                {
                  "value": "In Fleet",
                  "text": "In Fleet"
                },
                {
                  "value": "At Facility/Ship",
                  "text": "At Facility/Ship"
                },
                {
                  "value": "Midstream-In Update",
                  "text": "Midstream-In Update"
                },
                {
                  "value": "Midstream-Out Update",
                  "text": "Midstream-Out Update"
                },
                {
                  "value": "Tow Diagram",
                  "text": "Tow Diagram"
                }
              ],
              "purpose": "Switch between different operational modes"
            },
            {
              "key": "Boat Combo",
              "type": "ComboBoxTool",
              "caption": "Boat:",
              "width": 160,
              "visible": false,
              "purpose": "Select boat for boat-specific operations"
            },
            {
              "key": "Facility Combo",
              "type": "ComboBoxTool",
              "caption": "Facility:",
              "width": 160,
              "visible": false,
              "purpose": "Select facility for facility operations"
            },
            {
              "key": "Refresh",
              "type": "ButtonTool",
              "caption": "Re&fresh",
              "displayStyle": "ImageAndText",
              "isFirstInGroup": true,
              "purpose": "Refresh workspace data"
            },
            {
              "key": "History",
              "type": "ButtonTool",
              "caption": "&History",
              "displayStyle": "ImageAndText",
              "purpose": "View barge position history"
            },
            {
              "key": "Define Color Legend",
              "type": "ButtonTool",
              "caption": "D&efine Color Legend",
              "displayStyle": "ImageAndText",
              "isFirstInGroup": true,
              "purpose": "Define color coding legend for barges"
            },
            {
              "key": "Close",
              "type": "ButtonTool",
              "caption": "&Close",
              "displayStyle": "ImageAndText",
              "isFirstInGroup": true,
              "purpose": "Close the form"
            }
          ]
        },
        {
          "name": "UltraToolbar2",
          "dockedRow": 1,
          "tools": [
            {
              "key": "Servicing Boat Combo",
              "type": "ComboBoxTool",
              "caption": "Servicing Boat:",
              "displayStyle": "ImageAndText",
              "purpose": "Select servicing boat for operations"
            },
            {
              "key": "Flip Barge",
              "type": "ButtonTool",
              "caption": "Flip &Barge",
              "displayStyle": "ImageAndText",
              "isFirstInGroup": true,
              "purpose": "Flip a barge horizontally"
            },
            {
              "key": "Show Tow Diagram",
              "type": "StateButtonTool",
              "caption": "Show T&ow Diagram",
              "displayStyle": "ImageAndText",
              "isFirstInGroup": true,
              "purpose": "Toggle tow diagram display"
            },
            {
              "key": "Flip Tow",
              "type": "ButtonTool",
              "caption": "&Flip Tow",
              "displayStyle": "ImageAndText",
              "purpose": "Flip entire tow configuration"
            },
            {
              "key": "Drop Tow",
              "type": "StateButtonTool",
              "caption": "&Drop Tow",
              "displayStyle": "ImageAndText",
              "purpose": "Drop tow at current position"
            },
            {
              "key": "Set Color",
              "type": "PopupMenuTool",
              "caption": "Set Co&lor",
              "displayStyle": "ImageAndText",
              "purpose": "Set color for selected barges",
              "note": "Dynamically populated based on fleet"
            },
            {
              "key": "Set Note",
              "type": "ButtonTool",
              "caption": "Set &Note",
              "displayStyle": "ImageAndText",
              "purpose": "Add note to selected barge"
            }
          ]
        }
      ]
    },
    {
      "name": "TierGroupToolbarManager",
      "purpose": "Tier group specific operations",
      "dockWithinContainer": "pnlTierGroup",
      "toolbars": [
        {
          "name": "TierGroupToolbar",
          "dockedRow": 0,
          "tools": [
            {
              "key": "Tier Group Combo",
              "type": "ComboBoxTool",
              "caption": "Tier Group:",
              "width": 234,
              "visible": false,
              "sortStyle": "Ascending",
              "purpose": "Select tier group to display"
            },
            {
              "key": "Berth Combo",
              "type": "ComboBoxTool",
              "caption": "Berth:",
              "width": 234,
              "visible": false,
              "sortStyle": "Ascending",
              "purpose": "Select berth within facility"
            },
            {
              "key": "Arrive/Depart Ship",
              "type": "ButtonTool",
              "caption": "Arrive Ship",
              "displayStyle": "ImageAndText",
              "visible": false,
              "purpose": "Record ship arrival/departure"
            },
            {
              "key": "Flip Barge",
              "type": "ButtonTool",
              "caption": "Flip &Barge",
              "displayStyle": "ImageAndText",
              "isFirstInGroup": true,
              "purpose": "Flip a barge in tier group"
            },
            {
              "key": "Send Tow Diagram",
              "type": "ButtonTool",
              "caption": "Send &Tow Diagram",
              "displayStyle": "ImageAndText",
              "purpose": "Send tow diagram for selected barges"
            },
            {
              "key": "Set Anchor Wire",
              "type": "ButtonTool",
              "caption": "&Set Anchor Wire",
              "displayStyle": "ImageAndText",
              "purpose": "Set or clear anchor wire for rake barges"
            },
            {
              "key": "View Conflicts",
              "type": "ButtonTool",
              "caption": "&View Conflicts",
              "displayStyle": "ImageAndText",
              "foreColor": "Red",
              "bold": true,
              "purpose": "View barges with conflicting locations"
            },
            {
              "key": "Set Color",
              "type": "PopupMenuTool",
              "caption": "Set Co&lor",
              "displayStyle": "ImageAndText",
              "purpose": "Set color for selected barges",
              "note": "Dynamically populated based on fleet"
            },
            {
              "key": "Set Note",
              "type": "ButtonTool",
              "caption": "Set &Note",
              "displayStyle": "ImageAndText",
              "purpose": "Add note to selected barge"
            }
          ]
        }
      ]
    }
  ],
  "sharedControls": {
    "location": "Bottom of form in grpSubmitCancel",
    "visibleInEventMode": true,
    "controls": [
      {
        "name": "btnRefresh",
        "type": "UltraButton",
        "text": "&Refresh",
        "action": "Refresh workspace data"
      },
      {
        "name": "btnSet",
        "type": "UltraButton",
        "text": "&Set",
        "action": "Save barge position changes"
      },
      {
        "name": "btnClose",
        "type": "UltraButton",
        "text": "&Close",
        "action": "Close form or cancel operation"
      }
    ]
  },
  "additionalControls": [
    {
      "name": "staStatus",
      "type": "UltraStatusBar",
      "location": "Bottom",
      "purpose": "Display status information and messages"
    },
    {
      "name": "splGridSplitter",
      "type": "UltraSplitter",
      "purpose": "Resize workspace and tier group grids"
    },
    {
      "name": "tmrBargePositions",
      "type": "Timer",
      "interval": "Based on GlobalSettingList.BargePositionsIntervalMinutes",
      "purpose": "Auto-refresh workspace data"
    },
    {
      "name": "tmrBargeConflicts",
      "type": "Timer",
      "interval": 1800000,
      "purpose": "Check for barge location conflicts every 30 minutes"
    },
    {
      "name": "bckRetrieveBarges",
      "type": "BackgroundWorker",
      "purpose": "Asynchronously retrieve barge data"
    },
    {
      "name": "bckRetrieveWorkspace",
      "type": "BackgroundWorker",
      "purpose": "Asynchronously retrieve workspace data"
    }
  ],
  "operationalModes": [
    {
      "mode": "In Fleet",
      "description": "View barges currently in the fleet",
      "mainGrid": "ctlWorkspace",
      "tierGridVisible": true
    },
    {
      "mode": "At Facility/Ship",
      "description": "View barges at facilities or ships",
      "mainGrid": "ctlWorkspace",
      "tierGridVisible": true,
      "toolbarControls": ["Facility Combo", "Berth Combo", "Tier Group Combo"]
    },
    {
      "mode": "Midstream-In Update",
      "description": "Update barges moving into midstream position",
      "mainGrid": "ctlWorkspace",
      "tierGridVisible": true,
      "restricted": "Limited barge movement"
    },
    {
      "mode": "Midstream-Out Update",
      "description": "Update barges moving out of midstream position",
      "mainGrid": "ctlWorkspace",
      "tierGridVisible": true,
      "restricted": "Limited barge movement"
    },
    {
      "mode": "Tow Diagram",
      "description": "View and edit tow diagrams",
      "mainGrid": "ctlWorkspace",
      "tierGridVisible": false,
      "toolbarControls": ["Servicing Boat Combo", "Show Tow Diagram", "Drop Tow", "Flip Tow"]
    }
  ],
  "eventModes": {
    "description": "Form can be opened modally from frmBargeEvent or frmBargeDetail",
    "eventMode": true,
    "features": [
      "Deferred save - movements not saved until form closed",
      "MainToolbar UltraToolbar1 hidden in event mode",
      "grpSubmitCancel visible only in event mode",
      "Auto-refresh disabled in event mode"
    ]
  },
  "dragAndDrop": {
    "enabled": true,
    "source": "Both grids support drag and drop",
    "modes": {
      "interGrid": "Move barges between workspace and tier group",
      "intraGrid": "Reposition barges within same grid"
    },
    "restrictions": [
      "NoDropBarges - barges that cannot be moved",
      "Mode-specific restrictions apply",
      "Conflict validation on drop"
    ]
  },
  "colorCoding": {
    "enabled": true,
    "dynamicLegend": true,
    "defaultForeColor": "Black",
    "defaultBackColor": "White",
    "fleetBased": "Color options dynamically loaded per fleet"
  },
  "modernImplementationNotes": {
    "layoutType": "Two-panel workspace with dynamic mode switching",
    "recommendedApproach": "Use tabs or accordion for mode selection instead of dropdown",
    "gridReplacement": "Consider using interactive canvas or grid component with drag-drop",
    "toolbarReplacement": "Convert to Bootstrap button groups and dropdowns",
    "modeManagement": "Implement as separate views/components with route-based navigation or tab switching"
  }
}
