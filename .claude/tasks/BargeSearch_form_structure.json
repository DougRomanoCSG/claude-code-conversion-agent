{
  "formName": "frmBargeSearch",
  "formType": "Search",
  "implements": ["IBaseSearch"],
  "inherits": "frmBaseSearch",
  "description": "Comprehensive barge search form with expandable advanced search options, multi-criteria filtering, and DataTables grid for results display",
  "modernEquivalent": {
    "controller": "BargeSearchController",
    "indexView": "BargeSearch/Index.cshtml",
    "viewModel": "BargeSearchViewModel",
    "dataTableEndpoint": "/BargeSearch/BargeTable",
    "editView": "BargeSearch/Edit.cshtml",
    "detailsView": "BargeSearch/Details.cshtml"
  },
  "controls": [
    {
      "name": "txtBargeNum",
      "type": "UltraTextEditor",
      "category": "SearchCriteria",
      "section": "Basic",
      "label": "Barge",
      "dataBinding": null,
      "validation": [
        {
          "type": "String",
          "required": false
        }
      ],
      "searchBehavior": "StartsWithSearch",
      "tooltip": "Starts with search",
      "modernEquivalent": {
        "type": "text",
        "id": "txtBargeNum",
        "class": "form-control",
        "placeholder": "Enter barge number..."
      },
      "events": [],
      "tabIndex": 1
    },
    {
      "name": "cboHullType",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Basic",
      "label": "Hull type",
      "dataBinding": null,
      "populationMethod": "PopulateValidationListCombo",
      "dataSource": "Lists.ValidationList.ValidationTypes.HullType",
      "valueField": "Value",
      "displayField": "Text",
      "allowEmpty": true,
      "validation": [],
      "modernEquivalent": {
        "type": "select",
        "id": "cboHullType",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [],
      "tabIndex": 7
    },
    {
      "name": "cboOperatorID",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Basic",
      "label": "Operator",
      "dataBinding": null,
      "populationMethod": "PopulateListCombo",
      "dataSource": "Lists.CustomerList.GetList",
      "valueField": "CustomerID",
      "displayField": "CustomerName",
      "allowEmpty": true,
      "validation": [],
      "modernEquivalent": {
        "type": "select",
        "id": "cboOperatorID",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [],
      "tabIndex": 3
    },
    {
      "name": "cboCustomerID",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Basic",
      "label": "Customer",
      "dataBinding": null,
      "populationMethod": "PopulateListCombo",
      "dataSource": "Lists.CustomerList.GetList",
      "valueField": "CustomerID",
      "displayField": "CustomerName",
      "allowEmpty": true,
      "validation": [],
      "modernEquivalent": {
        "type": "select",
        "id": "cboCustomerID",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [],
      "tabIndex": 12
    },
    {
      "name": "txtTicketID",
      "type": "UltraTextEditor",
      "category": "SearchCriteria",
      "section": "Basic",
      "label": "Ticket",
      "dataBinding": null,
      "validation": [
        {
          "type": "Int32",
          "required": false
        }
      ],
      "searchBehavior": "ExactMatch",
      "tooltip": "Exact match search",
      "modernEquivalent": {
        "type": "number",
        "id": "txtTicketID",
        "class": "form-control"
      },
      "events": [],
      "tabIndex": 10
    },
    {
      "name": "cboLoadStatus",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Basic",
      "label": "Load status",
      "dataBinding": null,
      "populationMethod": "PopulateValidationListCombo",
      "dataSource": "Lists.ValidationList.ValidationTypes.LoadStatus",
      "valueField": "Value",
      "displayField": "Text",
      "allowEmpty": true,
      "validation": [],
      "modernEquivalent": {
        "type": "select",
        "id": "cboLoadStatus",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [],
      "tabIndex": 14
    },
    {
      "name": "cboStatus",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Basic",
      "label": "Status",
      "dataBinding": null,
      "populationMethod": "PopulateValidationListCombo",
      "dataSource": "Lists.ValidationList.ValidationTypes.BargeStatus",
      "valueField": "Value",
      "displayField": "Text",
      "allowEmpty": true,
      "validation": [],
      "modernEquivalent": {
        "type": "select",
        "id": "cboStatus",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [],
      "tabIndex": 5
    },
    {
      "name": "cboCoverType",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Basic",
      "label": "Cover type",
      "dataBinding": null,
      "populationMethod": "PopulateValidationListCombo",
      "dataSource": "Lists.ValidationList.ValidationTypes.CoverType",
      "valueField": "Value",
      "displayField": "Text",
      "allowEmpty": true,
      "validation": [],
      "modernEquivalent": {
        "type": "select",
        "id": "cboCoverType",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [],
      "tabIndex": 16
    },
    {
      "name": "chkOpenTicketsOnly",
      "type": "UltraCheckEditor",
      "category": "SearchCriteria",
      "section": "Basic",
      "label": "Open tickets",
      "dataBinding": null,
      "defaultValue": true,
      "validation": [],
      "modernEquivalent": {
        "type": "checkbox",
        "id": "chkOpenTicketsOnly",
        "class": "form-check-input"
      },
      "events": [],
      "tabIndex": 8
    },
    {
      "name": "chkActiveOnly",
      "type": "UltraCheckEditor",
      "category": "SearchCriteria",
      "section": "Basic",
      "label": "Active only",
      "dataBinding": null,
      "defaultValue": true,
      "validation": [],
      "modernEquivalent": {
        "type": "checkbox",
        "id": "chkActiveOnly",
        "class": "form-check-input"
      },
      "events": [],
      "tabIndex": 17
    },
    {
      "name": "cboBoatSearchType",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Advanced",
      "label": "Boat",
      "dataBinding": null,
      "populationMethod": "PopulateValidationListCombo",
      "dataSource": "Lists.ValidationList.ValidationTypes.BoatSearchType",
      "valueField": "Value",
      "displayField": "Text",
      "allowEmpty": true,
      "validation": [],
      "enablesControl": "cboBoatLocationID",
      "modernEquivalent": {
        "type": "select",
        "id": "cboBoatSearchType",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [
        {
          "name": "ValueChanged",
          "handler": "cboBoatSearchType_ValueChanged",
          "purpose": "Enable/disable boat location combo based on selection"
        }
      ],
      "tabIndex": 1
    },
    {
      "name": "cboBoatLocationID",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Advanced",
      "label": "Boat Location",
      "dataBinding": null,
      "populationMethod": "PopulateListCombo",
      "dataSource": "Lists.BoatLocationList.GetList()",
      "valueField": "LocationID",
      "displayField": "BoatName",
      "allowEmpty": true,
      "validation": [],
      "initialState": "Disabled",
      "modernEquivalent": {
        "type": "select",
        "id": "cboBoatLocationID",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [],
      "tabIndex": 2
    },
    {
      "name": "cboFacilitySearchType",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Advanced",
      "label": "Facility",
      "dataBinding": null,
      "populationMethod": "PopulateValidationListCombo",
      "dataSource": "Lists.ValidationList.ValidationTypes.FacilitySearchType",
      "valueField": "Value",
      "displayField": "Text",
      "allowEmpty": true,
      "validation": [],
      "enablesControl": "cboFacilityLocationID",
      "modernEquivalent": {
        "type": "select",
        "id": "cboFacilitySearchType",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [
        {
          "name": "ValueChanged",
          "handler": "cboFacilitySearchType_ValueChanged",
          "purpose": "Enable/disable facility location combo based on selection"
        }
      ],
      "tabIndex": 6
    },
    {
      "name": "cboFacilityLocationID",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Advanced",
      "label": "Facility Location",
      "dataBinding": null,
      "populationMethod": "PopulateExpandableFacilityCombo",
      "dataSource": "FacilityListMode.ConsignFacilities or AllFacilities",
      "valueField": "LocationID",
      "displayField": "FacilityName",
      "allowEmpty": true,
      "validation": [],
      "initialState": "Disabled",
      "specialBehavior": "Expandable combo - header click toggles between ConsignFacilities and AllFacilities modes",
      "modernEquivalent": {
        "type": "select",
        "id": "cboFacilityLocationID",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [
        {
          "name": "AfterSortChange",
          "handler": "cboFacilityLocationID_AfterSortChange",
          "purpose": "Repopulate with alternate list when header clicked"
        }
      ],
      "tabIndex": 7
    },
    {
      "name": "cboShipSearchType",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Advanced",
      "label": "Ship",
      "dataBinding": null,
      "populationMethod": "PopulateValidationListCombo",
      "dataSource": "Lists.ValidationList.ValidationTypes.ShipSearchType",
      "valueField": "Value",
      "displayField": "Text",
      "allowEmpty": true,
      "validation": [],
      "enablesControl": "cboShipLocationID",
      "modernEquivalent": {
        "type": "select",
        "id": "cboShipSearchType",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [
        {
          "name": "ValueChanged",
          "handler": "cboShipSearchType_ValueChanged",
          "purpose": "Enable/disable ship location combo based on selection"
        }
      ],
      "tabIndex": 11
    },
    {
      "name": "cboShipLocationID",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Advanced",
      "label": "Ship Location",
      "dataBinding": null,
      "populationMethod": "PopulateListCombo",
      "dataSource": "Lists.ShipLocationList.GetList",
      "valueField": "LocationID",
      "displayField": "ShipName",
      "allowEmpty": true,
      "validation": [],
      "initialState": "Disabled",
      "modernEquivalent": {
        "type": "select",
        "id": "cboShipLocationID",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [],
      "tabIndex": 12
    },
    {
      "name": "cboEquipmentType",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Advanced",
      "label": "Equipment type",
      "dataBinding": null,
      "populationMethod": "PopulateValidationListCombo",
      "dataSource": "Lists.ValidationList.ValidationTypes.BargeEquipmentType",
      "valueField": "Value",
      "displayField": "Text",
      "allowEmpty": true,
      "validation": [],
      "modernEquivalent": {
        "type": "select",
        "id": "cboEquipmentType",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [
        {
          "name": "ValueChanged",
          "handler": "cboEquipmentType_ValueChanged",
          "purpose": "Auto-uncheck 'Open tickets only' when 'Fleet-owned' is selected"
        }
      ],
      "tabIndex": 4
    },
    {
      "name": "txtCoastGuardNum",
      "type": "UltraTextEditor",
      "category": "SearchCriteria",
      "section": "Advanced",
      "label": "Barge USCG #",
      "dataBinding": null,
      "validation": [
        {
          "type": "String",
          "required": false
        }
      ],
      "searchBehavior": "ExactMatch",
      "tooltip": "Exact match search",
      "modernEquivalent": {
        "type": "text",
        "id": "txtCoastGuardNum",
        "class": "form-control"
      },
      "events": [],
      "tabIndex": 9
    },
    {
      "name": "cboSizeCategory",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Advanced",
      "label": "Barge size",
      "dataBinding": null,
      "populationMethod": "PopulateValidationListCombo",
      "dataSource": "Lists.ValidationList.ValidationTypes.BargeSizeCategory",
      "valueField": "Value",
      "displayField": "Text",
      "allowEmpty": true,
      "validation": [],
      "modernEquivalent": {
        "type": "select",
        "id": "cboSizeCategory",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [],
      "tabIndex": 14
    },
    {
      "name": "cboRiver",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Advanced",
      "label": "River",
      "dataBinding": null,
      "populationMethod": "PopulateListCombo",
      "dataSource": "Lists.RiverList.GetList",
      "valueField": "RiverID",
      "displayField": "RiverName",
      "allowEmpty": true,
      "validation": [],
      "modernEquivalent": {
        "type": "select",
        "id": "cboRiver",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [],
      "tabIndex": 16
    },
    {
      "name": "txtStartMile",
      "type": "UltraTextEditor",
      "category": "SearchCriteria",
      "section": "Advanced",
      "label": "Mile",
      "dataBinding": null,
      "validation": [
        {
          "type": "Decimal",
          "required": false
        }
      ],
      "searchBehavior": "GreaterThanOrEqual",
      "tooltip": "Miles greater than or equal to search",
      "modernEquivalent": {
        "type": "number",
        "id": "txtStartMile",
        "class": "form-control",
        "step": "0.1"
      },
      "events": [],
      "tabIndex": 18
    },
    {
      "name": "txtEndMile",
      "type": "UltraTextEditor",
      "category": "SearchCriteria",
      "section": "Advanced",
      "label": "to",
      "dataBinding": null,
      "validation": [
        {
          "type": "Decimal",
          "required": false
        }
      ],
      "searchBehavior": "LessThanOrEqual",
      "tooltip": "Miles less than or equal to search",
      "modernEquivalent": {
        "type": "number",
        "id": "txtEndMile",
        "class": "form-control",
        "step": "0.1"
      },
      "events": [],
      "tabIndex": 20
    },
    {
      "name": "txtContractNumber",
      "type": "UltraTextEditor",
      "category": "SearchCriteria",
      "section": "Advanced",
      "label": "Contract #",
      "dataBinding": null,
      "validation": [
        {
          "type": "String",
          "required": false
        }
      ],
      "searchBehavior": "Contains",
      "tooltip": "Contains search",
      "visibilityCondition": "Visible only if Freight license is active",
      "modernEquivalent": {
        "type": "text",
        "id": "txtContractNumber",
        "class": "form-control"
      },
      "events": [],
      "tabIndex": 24
    },
    {
      "name": "cboCommodityID",
      "type": "UltraCombo",
      "category": "SearchCriteria",
      "section": "Advanced",
      "label": "Commodity",
      "dataBinding": null,
      "populationMethod": "PopulateListCombo",
      "dataSource": "Lists.CommodityList.GetList",
      "valueField": "CommodityID",
      "displayField": "CommodityName",
      "allowEmpty": true,
      "validation": [],
      "modernEquivalent": {
        "type": "select",
        "id": "cboCommodityID",
        "class": "form-select",
        "useSelect2": true
      },
      "events": [],
      "tabIndex": 22
    }
  ],
  "grids": [
    {
      "name": "grdBargeSearch",
      "type": "UltraGrid",
      "uniqueIdentifier": "BargeID",
      "selectionMode": "Extended",
      "description": "Main search results grid with extensive column set including location, freight, terminal, and cargo details",
      "defaultSortColumn": "BargeNum",
      "defaultSortDirection": "Ascending",
      "modernEquivalent": {
        "type": "DataTable",
        "serverSide": true,
        "ajax": "/BargeSearch/BargeTable",
        "dom": "Bfrtip",
        "buttons": ["copy", "csv", "excel", "pdf", "print", "colvis"]
      },
      "columns": [
        {
          "key": "BargeID",
          "header": "ID",
          "dataType": "Int32",
          "width": 0,
          "visible": false,
          "sortable": false,
          "filterable": false,
          "purpose": "Unique identifier for row selection"
        },
        {
          "key": "BargeNum",
          "header": "Barge",
          "dataType": "String",
          "width": 70,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 0
        },
        {
          "key": "HullType",
          "header": "Hull",
          "dataType": "String",
          "width": 43,
          "align": "Center",
          "sortable": true,
          "filterable": true,
          "position": 1
        },
        {
          "key": "Status",
          "header": "Status",
          "dataType": "String",
          "width": 57,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 2
        },
        {
          "key": "LocationName",
          "header": "Location",
          "dataType": "String",
          "width": 100,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 3
        },
        {
          "key": "LocationRiver",
          "header": "River",
          "dataType": "String",
          "width": 45,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 4
        },
        {
          "key": "LocationMile",
          "header": "Mile",
          "dataType": "Decimal",
          "width": 47,
          "align": "Right",
          "sortable": true,
          "filterable": true,
          "customComparer": "NumericSortComparer",
          "position": 5
        },
        {
          "key": "TierName",
          "header": "Tier",
          "dataType": "String",
          "width": 96,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 6
        },
        {
          "key": "TierXY",
          "header": "Tier Pos",
          "dataType": "String",
          "width": 60,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 7
        },
        {
          "key": "FreightCustomer",
          "header": "Freight Customer",
          "dataType": "String",
          "width": 100,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Freight license is active",
          "position": 8
        },
        {
          "key": "ContractNumber",
          "header": "Contract #",
          "dataType": "String",
          "width": 100,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Freight license is active",
          "position": 9
        },
        {
          "key": "PurchaseOrderNum",
          "header": "PO #",
          "dataType": "String",
          "width": 80,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Freight license is active",
          "position": 10
        },
        {
          "key": "FreightStatus",
          "header": "Freight Status",
          "dataType": "String",
          "width": 84,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Freight license is active",
          "position": 11
        },
        {
          "key": "FreightOrigin",
          "header": "Freight Origin",
          "dataType": "String",
          "width": 95,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Freight license is active",
          "position": 12
        },
        {
          "key": "FreightDestination",
          "header": "Freight Destination",
          "dataType": "String",
          "width": 120,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Freight license is active",
          "position": 13
        },
        {
          "key": "Destination",
          "header": "Destination",
          "dataType": "String",
          "width": 100,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 14
        },
        {
          "key": "ConsignLocation",
          "header": "Consigned To",
          "dataType": "String",
          "width": 100,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 15
        },
        {
          "key": "ConsignedShip",
          "header": "Consigned Ship",
          "dataType": "String",
          "width": 100,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 16
        },
        {
          "key": "ShipHold",
          "header": "Ship Hold",
          "dataType": "String",
          "width": 65,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 17
        },
        {
          "key": "IsOnOrder",
          "header": "On Order",
          "dataType": "Boolean",
          "width": 65,
          "align": "Center",
          "sortable": true,
          "filterable": true,
          "position": 18
        },
        {
          "key": "OnOrderScheduleDateTime",
          "header": "On Order Schedule",
          "dataType": "DateTime",
          "width": 113,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "defaultVisible": false,
          "excludeFromColumnChooser": false,
          "position": 19
        },
        {
          "key": "OnOrderTripNumber",
          "header": "Trip #",
          "dataType": "String",
          "width": 50,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "customComparer": "NumericSortComparer",
          "position": 20
        },
        {
          "key": "IsAwaitingPickup",
          "header": "Pickup",
          "dataType": "Boolean",
          "width": 52,
          "align": "Center",
          "sortable": true,
          "filterable": true,
          "position": 21
        },
        {
          "key": "AwaitingPickupReadyDateTime",
          "header": "Pickup Schedule",
          "dataType": "DateTime",
          "width": 113,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "defaultVisible": false,
          "excludeFromColumnChooser": false,
          "position": 22
        },
        {
          "key": "SizeCategory",
          "header": "Size",
          "dataType": "String",
          "width": 60,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 23
        },
        {
          "key": "BargeDimensions",
          "header": "Dimensions",
          "dataType": "String",
          "width": 85,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 24
        },
        {
          "key": "BargeType",
          "header": "Barge Type",
          "dataType": "String",
          "width": 85,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 25
        },
        {
          "key": "CoverType",
          "header": "Cover Type",
          "dataType": "String",
          "width": 70,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 26
        },
        {
          "key": "CoverConfig",
          "header": "Cover",
          "dataType": "String",
          "width": 50,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 27
        },
        {
          "key": "LoadStatus",
          "header": "Load Status",
          "dataType": "String",
          "width": 77,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 28
        },
        {
          "key": "IsDefaultTons",
          "header": "DQ - Default Quantity",
          "dataType": "Boolean",
          "width": 25,
          "align": "Center",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Freight license active AND EnableUseOfDefaultTonnage is true",
          "position": 29
        },
        {
          "key": "SurveyTons",
          "header": "Quantity",
          "dataType": "Decimal",
          "width": 66,
          "align": "Right",
          "sortable": true,
          "filterable": true,
          "customComparer": "NumericSortComparer",
          "visibleWhen": "CommodityInfoCustomization is active",
          "alternateHeader": "Tonnage",
          "alternateVisibleWhen": "Terminal license is active",
          "position": 30
        },
        {
          "key": "CargoHandlingStatus",
          "header": "Cargo Status",
          "dataType": "String",
          "width": 113,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Terminal license is active",
          "position": 31
        },
        {
          "key": "Cargo",
          "header": "Cargo",
          "dataType": "String",
          "width": 113,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Terminal license is active",
          "position": 32
        },
        {
          "key": "CargoCustomer",
          "header": "Cargo Customer",
          "dataType": "String",
          "width": 113,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Terminal license is active",
          "position": 33
        },
        {
          "key": "IsHeadBarge",
          "header": "HB - Head Barge",
          "dataType": "Boolean",
          "width": 27,
          "align": "Center",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Terminal license is active",
          "position": 34
        },
        {
          "key": "HasWaterInCargoBox",
          "header": "WA - Water",
          "dataType": "Boolean",
          "width": 27,
          "align": "Center",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Terminal license is active",
          "position": 35
        },
        {
          "key": "IsRakeDown",
          "header": "RD - Rake Down",
          "dataType": "Boolean",
          "width": 27,
          "align": "Center",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Terminal license is active",
          "position": 36
        },
        {
          "key": "IsHeavy",
          "header": "HE - Heavy",
          "dataType": "Boolean",
          "width": 27,
          "align": "Center",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Terminal license is active",
          "position": 37
        },
        {
          "key": "Commodity",
          "header": "Commodity",
          "dataType": "String",
          "width": 75,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 38
        },
        {
          "key": "DamageLevel",
          "header": "Damage Level",
          "dataType": "String",
          "width": 90,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "specialFormatting": "Color-coded based on BargeTokenMapList damage level colors",
          "position": 39
        },
        {
          "key": "CleanStatus",
          "header": "Clean Status",
          "dataType": "String",
          "width": 83,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "defaultVisible": false,
          "excludeFromColumnChooser": false,
          "position": 40
        },
        {
          "key": "RepairStatus",
          "header": "Repair Status",
          "dataType": "String",
          "width": 85,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "defaultVisible": false,
          "excludeFromColumnChooser": false,
          "position": 41
        },
        {
          "key": "IsLeaker",
          "header": "Leaker",
          "dataType": "Boolean",
          "width": 53,
          "align": "Center",
          "sortable": true,
          "filterable": true,
          "defaultVisible": false,
          "excludeFromColumnChooser": false,
          "position": 42
        },
        {
          "key": "IsOnHold",
          "header": "Hold",
          "dataType": "Boolean",
          "width": 45,
          "align": "Center",
          "sortable": true,
          "filterable": true,
          "defaultVisible": false,
          "excludeFromColumnChooser": false,
          "position": 43
        },
        {
          "key": "ScheduleInLoc",
          "header": "Scheduled In",
          "dataType": "String",
          "width": 100,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 44
        },
        {
          "key": "EstimatedArrivalDateTime",
          "header": "Schedule In ETA",
          "dataType": "DateTime",
          "width": 113,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Terminal license is active",
          "position": 45
        },
        {
          "key": "PositionUpdatedDateTime",
          "header": "Position Updated",
          "dataType": "DateTime",
          "width": 113,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "visibleWhen": "Terminal license is active",
          "position": 46
        },
        {
          "key": "ScheduleOutLoc",
          "header": "Scheduled Out",
          "dataType": "String",
          "width": 100,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 47
        },
        {
          "key": "Customer",
          "header": "Operator",
          "dataType": "String",
          "width": 100,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 48
        },
        {
          "key": "TicketCustomer",
          "header": "Ticket Customer",
          "dataType": "String",
          "width": 100,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 49
        },
        {
          "key": "Instructions",
          "header": "Instructions",
          "dataType": "String",
          "width": 100,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 50
        },
        {
          "key": "CustomerComment",
          "header": "Customer Comment",
          "dataType": "String",
          "width": 120,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 51
        },
        {
          "key": "TicketID",
          "header": "Ticket",
          "dataType": "String",
          "width": 60,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "customComparer": "NumericSortComparer",
          "position": 52
        },
        {
          "key": "TicketStatus",
          "header": "Ticket Status",
          "dataType": "String",
          "width": 84,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "defaultVisible": false,
          "excludeFromColumnChooser": false,
          "position": 53
        },
        {
          "key": "LastEventDateTime",
          "header": "Last Event",
          "dataType": "DateTime",
          "width": 113,
          "align": "Left",
          "sortable": true,
          "filterable": true,
          "position": 54
        },
        {
          "key": "CrossCharterCode",
          "header": "Cross Charter Code",
          "dataType": "String",
          "width": 0,
          "visible": false,
          "sortable": false,
          "filterable": false,
          "purpose": "Used for row background color formatting"
        },
        {
          "key": "NewCargoTransferPossible",
          "header": "New Cargo Transfer Possible",
          "dataType": "Boolean",
          "width": 0,
          "visible": false,
          "sortable": false,
          "filterable": false,
          "purpose": "Used to enable/disable New Cargo Transfer button in main form"
        }
      ],
      "events": [
        {
          "name": "DoubleClick",
          "handler": "Inherited from base - opens detail form (ItemModify)",
          "purpose": "Opens frmBargeDetail for selected barge"
        },
        {
          "name": "AfterSelectChange",
          "handler": "Inherited from base - enables/disables action buttons",
          "purpose": "Enable Edit/Delete buttons based on selection"
        },
        {
          "name": "InitializeRow",
          "handler": "grdBargeSearch_InitializeRow",
          "purpose": "Apply cross-charter background colors and damage level colors to rows"
        }
      ],
      "rowFormatting": [
        {
          "condition": "CrossCharterCode = CTC",
          "backgroundColor": "GlobalSetting.CrossCharterBargeBackColorCTC",
          "purpose": "Highlight cross-chartered barges (CTC)"
        },
        {
          "condition": "CrossCharterCode = RTD",
          "backgroundColor": "GlobalSetting.CrossCharterBargeBackColorRTD",
          "purpose": "Highlight cross-chartered barges (RTD)"
        },
        {
          "condition": "DamageLevel has value",
          "cellFormatting": "DamageLevel column",
          "foreColor": "BargeTokenMapList color mapping - TextColor",
          "backgroundColor": "BargeTokenMapList color mapping - BackColor",
          "purpose": "Color-code damage level severity"
        }
      ]
    }
  ],
  "buttons": [
    {
      "name": "btnFind",
      "text": "Find",
      "type": "Search",
      "buttonType": "Open",
      "enabled": true,
      "visible": true,
      "isAcceptButton": true,
      "handler": "btnFind_Click",
      "purpose": "Execute search using current criteria",
      "modernEquivalent": {
        "type": "button",
        "id": "btnFind",
        "class": "btn btn-primary"
      },
      "tabIndex": 18
    },
    {
      "name": "btnReset",
      "text": "Reset",
      "type": "Reset",
      "buttonType": "Open",
      "enabled": true,
      "visible": true,
      "causesValidation": false,
      "handler": "btnReset_Click",
      "purpose": "Clear all search criteria and restore defaults",
      "modernEquivalent": {
        "type": "button",
        "id": "btnReset",
        "class": "btn btn-secondary"
      },
      "tabIndex": 19
    }
  ],
  "panels": [
    {
      "name": "pnlBargeSearch",
      "type": "UltraPanel",
      "description": "Root panel for entire search form",
      "dock": "Fill",
      "controls": ["pnlContextTitle", "pnlCriteria", "grdBargeSearch"]
    },
    {
      "name": "pnlContextTitle",
      "type": "UltraPanel",
      "description": "Title bar panel",
      "dock": "Top",
      "controls": ["lblContextTitle"]
    },
    {
      "name": "pnlCriteria",
      "type": "UltraPanel",
      "description": "Search criteria container panel",
      "dock": "Top",
      "controls": ["pnlCriteriaNonExpandable", "grpMoreSearchOptions"]
    },
    {
      "name": "pnlCriteriaNonExpandable",
      "type": "UltraPanel",
      "description": "Basic search criteria (always visible)",
      "dock": "Top",
      "controls": [
        "lblBargeNum", "txtBargeNum",
        "lblOperatorID", "cboOperatorID",
        "lblStatus", "cboStatus",
        "lblHullType", "cboHullType",
        "chkOpenTicketsOnly",
        "lblTicketID", "txtTicketID",
        "lblCustomerID", "cboCustomerID",
        "lblLoadStatus", "cboLoadStatus",
        "lblCoverType", "cboCoverType",
        "chkActiveOnly",
        "btnFind", "btnReset"
      ]
    },
    {
      "name": "grpMoreSearchOptions",
      "type": "UltraExpandableGroupBox",
      "description": "Collapsible advanced search options",
      "dock": "Bottom",
      "expandedText": "Hide search options",
      "collapsedText": "Show search options",
      "defaultState": "Collapsed",
      "controls": ["pnlExpandableSearchOptions"],
      "events": [
        {
          "name": "ExpandedStateChanged",
          "handler": "grpMoreSearchOptions_ExpandedStateChanged",
          "purpose": "Adjust panel heights when expanded/collapsed"
        }
      ]
    },
    {
      "name": "pnlExpandableSearchOptions",
      "type": "UltraExpandableGroupBoxPanel",
      "description": "Container for expandable options",
      "controls": ["pnl"]
    },
    {
      "name": "pnl",
      "type": "UltraPanel",
      "description": "Advanced search criteria fields",
      "dock": "Fill",
      "controls": [
        "lblBoatID", "cboBoatSearchType", "cboBoatLocationID",
        "lblFacilitySearchType", "cboFacilitySearchType", "cboFacilityLocationID",
        "lblShipSearchType", "cboShipSearchType", "cboShipLocationID",
        "lblType", "cboEquipmentType",
        "lblCoastGuardNum", "txtCoastGuardNum",
        "lblSizeCategory", "cboSizeCategory",
        "lblRiver", "cboRiver",
        "lblMile", "txtStartMile", "lblMileTo", "txtEndMile",
        "lblCommodityID", "cboCommodityID",
        "lblContractNumber", "txtContractNumber"
      ]
    }
  ],
  "labels": [
    {
      "name": "lblContextTitle",
      "text": "Barges",
      "style": "SearchCaption",
      "appearance": "Blue background with white text",
      "font": "Arial, 12pt, Bold"
    }
  ],
  "validation": {
    "extender": "ValidatorExtender",
    "rules": [
      {
        "control": "txtTicketID",
        "type": "Int32",
        "required": false
      },
      {
        "control": "txtStartMile",
        "type": "Decimal",
        "required": false
      },
      {
        "control": "txtEndMile",
        "type": "Decimal",
        "required": false
      }
    ],
    "displayMode": "StatusBar",
    "eventHandler": "ValidatorExtender_MessageSet"
  },
  "eventHandlers": {
    "pnlBargeSearch_HandleCreated": "Initialize form, format controls, restore grid settings",
    "pnlBargeSearch_HandleDestroyed": "Save grid settings to database",
    "btnFind_Click": "Execute search with current criteria, select first row",
    "btnReset_Click": "Clear all search fields and restore defaults",
    "cboBoatSearchType_ValueChanged": "Enable/disable cboBoatLocationID based on selection",
    "cboFacilitySearchType_ValueChanged": "Enable/disable cboFacilityLocationID based on selection",
    "cboShipSearchType_ValueChanged": "Enable/disable cboShipLocationID based on selection",
    "cboEquipmentType_ValueChanged": "Auto-uncheck chkOpenTicketsOnly if 'Fleet-owned' selected",
    "cboFacilityLocationID_AfterSortChange": "Toggle between ConsignFacilities and AllFacilities modes",
    "grpMoreSearchOptions_ExpandedStateChanged": "Adjust panel heights dynamically",
    "grdBargeSearch_InitializeRow": "Apply cross-charter and damage level row formatting",
    "ValidatorExtender_MessageSet": "Display validation messages in main form status bar"
  },
  "businessLogicMethods": {
    "RefreshList": {
      "purpose": "Execute search and populate grid",
      "dataSource": "BusinessLogic.Lists.BargeSearch.GetList",
      "parameters": [
        "_SelectedFleetID", "txtBargeNum.Text", "cboHullType.Value", "cboCoverType.Value",
        "cboOperatorID.Value", "cboCustomerID.Value", "chkActiveOnly.Checked",
        "txtTicketID.Text", "cboLoadStatus.Value", "cboStatus.Value",
        "chkOpenTicketsOnly.Checked", "cboEquipmentType.Value",
        "isInTow", "isScheduledIn", "isScheduledOut", "boatLocationID",
        "isAtFacility", "isConsignedToFacility", "isDestinationIn", "isDestinationOut",
        "isOnOrderToFacility", "facilityLocationID",
        "isConsignedToShip", "isOnOrderToShip", "shipLocationID",
        "txtCoastGuardNum.Text", "cboSizeCategory.Value", "cboRiver.Value",
        "txtStartMile.Text", "txtEndMile.Text", "txtContractNumber.Text", "cboCommodityID.Value"
      ]
    },
    "ItemAdd": {
      "purpose": "Open new barge detail form",
      "action": "Show frmBargeDetail with Barge.NewBarge(_SelectedFleetID)"
    },
    "ItemModify": {
      "purpose": "Open barge detail form for selected barge",
      "action": "Show frmBargeDetail with Barge.GetBarge(GridControlIndex, _SelectedFleetID)"
    },
    "ItemRemove": {
      "purpose": "Delete selected barge",
      "action": "Barge.DeleteBarge(GridControlIndex), then RefreshList(False)",
      "confirmation": "Yes/No dialog"
    },
    "OnChangeOfFleet": {
      "purpose": "Handle fleet selection change",
      "actions": [
        "Update _SelectedFleetID",
        "Repopulate cboFacilityLocationID for new fleet",
        "Reload damage level colors for new fleet",
        "Clear grid results"
      ]
    },
    "CloseTickets": {
      "purpose": "Close tickets for selected barges (multi-select)",
      "action": "Barge.CloseTicketAndSave for each selected row",
      "confirmation": "Yes/No dialog",
      "feedback": "Display success/failure lists"
    },
    "SelectedBargeHasTicket": {
      "purpose": "Check if selected barge has a ticket",
      "returns": "Boolean"
    },
    "CargoTransferList": {
      "purpose": "Get cargo transfer list for selected barge ticket",
      "dataSource": "BusinessLogic.Lists.BargeCargoTransferList.GetList(BargeTicketID)"
    }
  },
  "memberVariables": [
    {
      "name": "_SelectedFleetID",
      "type": "Int32",
      "purpose": "Track currently selected fleet from main form"
    },
    {
      "name": "_CurrentConsignListMode",
      "type": "ConsignListMode",
      "purpose": "Track current facility combo mode (unused in visible code)"
    },
    {
      "name": "_IsCommodityInfoCustomizationActive",
      "type": "Boolean",
      "purpose": "Control visibility of commodity quantity column in grid"
    },
    {
      "name": "_AppearanceCrossCharterCTC",
      "type": "Infragistics.Win.Appearance",
      "purpose": "Background color for CTC cross-chartered barges"
    },
    {
      "name": "_AppearanceCrossCharterRTD",
      "type": "Infragistics.Win.Appearance",
      "purpose": "Background color for RTD cross-chartered barges"
    },
    {
      "name": "_DamageLevelMapList",
      "type": "Lists.BargeTokenMapList",
      "purpose": "Color mappings for damage level formatting"
    }
  ],
  "initialization": {
    "sequence": [
      "Initialize called from main form",
      "InitializeBase(SubSystem.frmBargeSearch)",
      "Check for CommodityInfoCustomization",
      "HandleCreated event fires",
      "FormatControls - populate all dropdowns",
      "SetValidatorExtenderForTicketSearch - configure validators",
      "Set initial control states (disable location combos)",
      "Hide contract number if no Freight license",
      "CreateCrossCharterAppearances - load color settings",
      "MyAppSettingHelper.RestoreGrid - restore user grid settings"
    ]
  },
  "searchCriteria": {
    "basic": [
      "Barge Number (starts with)",
      "Operator",
      "Status",
      "Hull Type",
      "Open Tickets Only (checkbox)",
      "Ticket ID (exact match)",
      "Customer",
      "Load Status",
      "Cover Type",
      "Active Only (checkbox)"
    ],
    "advanced": [
      "Boat Search Type + Boat Location",
      "Facility Search Type + Facility Location",
      "Ship Search Type + Ship Location",
      "Equipment Type",
      "USCG Number (exact match)",
      "Barge Size",
      "River",
      "Mile Range (Start - End)",
      "Commodity",
      "Contract Number (contains, Freight license only)"
    ]
  },
  "integrations": {
    "mainForm": {
      "implements": "IBaseSearch",
      "provides": [
        "FocusFirstField()",
        "GridControlIndex",
        "Initialize()",
        "ItemAdd()",
        "ItemModify()",
        "ItemRemove()",
        "ItemRun() - not used",
        "ItemView() - not used",
        "LocalPanel",
        "OnChangeOfFleet(newFleetID)",
        "RefreshList(selectFirstRow)",
        "SetButtonTypes()",
        "UltraGridControl"
      ],
      "customProperties": [
        "NewCargoTransferPossible - enables New Cargo Transfer button",
        "CargoTransferList - provides data for cargo transfer operations",
        "SelectedBargeHasTicket() - enables ticket operations"
      ]
    },
    "security": {
      "controlAuthorization": "ControlAuthorizationBase",
      "subSystem": "frmBargeSearch",
      "buttonTypes": {
        "btnFind": "ButtonType.Open",
        "btnReset": "ButtonType.Open"
      }
    },
    "userSettings": {
      "gridSettings": "MyAppSettingHelper.SaveGrid/RestoreGrid",
      "preserves": [
        "Column widths",
        "Column order",
        "Sort settings",
        "Hidden columns"
      ]
    }
  },
  "licenseFeatures": {
    "freight": {
      "controls": ["txtContractNumber", "lblContractNumber"],
      "gridColumns": [
        "FreightCustomer",
        "ContractNumber",
        "PurchaseOrderNum",
        "FreightStatus",
        "FreightOrigin",
        "FreightDestination"
      ],
      "conditionalColumn": "IsDefaultTons (requires EnableUseOfDefaultTonnage)"
    },
    "terminal": {
      "gridColumns": [
        "CargoHandlingStatus",
        "Cargo",
        "CargoCustomer",
        "SurveyTons (as Tonnage)",
        "IsHeadBarge",
        "HasWaterInCargoBox",
        "IsRakeDown",
        "IsHeavy",
        "EstimatedArrivalDateTime",
        "PositionUpdatedDateTime"
      ]
    },
    "commodityInfoCustomization": {
      "gridColumns": ["SurveyTons (as Quantity)"]
    }
  },
  "notes": [
    "Complex search form with expandable advanced options - modern equivalent should use collapsible Bootstrap card or accordion",
    "Facility combo has special 'expandable' behavior - clicking header toggles between ConsignFacilities and AllFacilities - implement with toggle button in modern UI",
    "Multiple conditional column visibility based on licenses and global settings - implement with server-side column configuration",
    "Search types (Boat/Facility/Ship) enable/disable associated location dropdowns - implement with JavaScript onChange handlers",
    "Equipment type 'Fleet-owned' auto-unchecks 'Open tickets only' - business rule to preserve in modern UI",
    "Grid supports multi-select for bulk ticket closing operation - implement DataTables with checkboxes",
    "Cross-charter and damage level row coloring uses dynamic color settings from database - implement with DataTables rowCallback",
    "Form implements IBaseSearch interface for main form integration - modern equivalent uses standard controller actions",
    "Mile range search uses two fields (Start/End) for greater-than-or-equal and less-than-or-equal - preserve in modern UI",
    "Grid has both visible and hidden columns excluded from column chooser - implement DataTables column visibility",
    "All DateTime displays should use MM/dd/yyyy HH:mm format (24-hour time)",
    "Grid settings are saved/restored per user - implement with DataTables stateSave option",
    "Validation messages display in main form status bar via ValidatorExtender event - modern UI should use toast notifications or validation summary"
  ]
}
