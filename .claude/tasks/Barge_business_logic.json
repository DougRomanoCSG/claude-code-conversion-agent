{
  "businessObject": "Barge",
  "baseClass": "BargeBase",
  "namespace": "BargeOps.Onshore.BusinessLogic",
  "fullInheritance": "Barge -> BargeBase -> BusinessLogicBase",
  "properties": [
    {
      "name": "BargeID",
      "type": "Int32",
      "access": "ReadOnly",
      "isPrimaryKey": true,
      "isNullable": false,
      "description": "Unique identifier for the barge",
      "source": "BargeBase"
    },
    {
      "name": "BargeNum",
      "type": "String",
      "access": "ReadWrite",
      "isRequired": true,
      "description": "Barge number (unique identifier visible to users)",
      "source": "BargeBase",
      "displayName": "Barge number"
    },
    {
      "name": "UscgNum",
      "type": "String",
      "access": "ReadWrite",
      "description": "US Coast Guard VIN number",
      "source": "BargeBase",
      "displayName": "Coast Guard VIN"
    },
    {
      "name": "IsActive",
      "type": "Boolean",
      "access": "ReadWrite",
      "defaultValue": "true",
      "description": "Indicates if barge is active",
      "source": "BargeBase"
    },
    {
      "name": "CustomerID",
      "type": "String",
      "access": "ReadWrite",
      "isRequired": true,
      "conditionalRequirement": "Required if not Fleet-owned and not Terminal Mode",
      "description": "Operator/customer who operates the barge",
      "source": "BargeBase",
      "displayName": "Operator"
    },
    {
      "name": "OwnerID",
      "type": "String",
      "access": "ReadWrite",
      "description": "Owner of the barge",
      "source": "BargeBase",
      "displayName": "Owner"
    },
    {
      "name": "HullType",
      "type": "String",
      "access": "ReadWrite",
      "description": "Type of hull",
      "source": "BargeBase",
      "displayName": "Hull type"
    },
    {
      "name": "ExternalLength",
      "type": "String",
      "access": "ReadWrite",
      "dataType": "Decimal",
      "description": "External length of barge; triggers SizeCategory calculation",
      "source": "Barge (overrides BargeBase)",
      "displayName": "Length"
    },
    {
      "name": "ExternalWidth",
      "type": "String",
      "access": "ReadWrite",
      "dataType": "Decimal",
      "description": "External width of barge; triggers SizeCategory calculation",
      "source": "Barge (overrides BargeBase)",
      "displayName": "Width"
    },
    {
      "name": "ExternalDepth",
      "type": "String",
      "access": "ReadWrite",
      "dataType": "Decimal",
      "description": "External depth of barge",
      "source": "BargeBase",
      "displayName": "Depth"
    },
    {
      "name": "SizeCategory",
      "type": "String",
      "access": "ReadWrite",
      "isRequired": true,
      "conditionalRequirement": "Required if not Fleet-owned and not Terminal Mode",
      "description": "Size category (auto-calculated from length/width)",
      "source": "BargeBase",
      "displayName": "Size"
    },
    {
      "name": "Draft",
      "type": "String",
      "access": "ReadWrite",
      "dataType": "Decimal",
      "maxValue": 99.999,
      "minValue": 0.0,
      "description": "Overall draft (must be >= highest corner draft)",
      "source": "Barge (overrides BargeBase)",
      "displayName": "Draft"
    },
    {
      "name": "DraftFeet",
      "type": "String",
      "access": "ReadWrite",
      "dataType": "Integer",
      "description": "Draft in feet (calculated from Draft property)",
      "source": "Barge"
    },
    {
      "name": "DraftInches",
      "type": "String",
      "access": "ReadWrite",
      "dataType": "Integer",
      "minValue": 0,
      "maxValue": 11,
      "description": "Draft in inches (0-11)",
      "source": "Barge",
      "displayName": "Draft inches"
    },
    {
      "name": "DraftPortBow",
      "type": "String",
      "access": "ReadWrite",
      "dataType": "Decimal",
      "maxValue": 99.999,
      "minValue": 0.0,
      "description": "Port bow corner draft",
      "source": "BargeBase",
      "displayName": "Port bow draft"
    },
    {
      "name": "DraftPortStern",
      "type": "String",
      "access": "ReadWrite",
      "dataType": "Decimal",
      "maxValue": 99.999,
      "minValue": 0.0,
      "description": "Port stern corner draft",
      "source": "BargeBase",
      "displayName": "Port stern draft"
    },
    {
      "name": "DraftStarboardBow",
      "type": "String",
      "access": "ReadWrite",
      "dataType": "Decimal",
      "maxValue": 99.999,
      "minValue": 0.0,
      "description": "Starboard bow corner draft",
      "source": "BargeBase",
      "displayName": "Starboard bow draft"
    },
    {
      "name": "DraftStarboardStern",
      "type": "String",
      "access": "ReadWrite",
      "dataType": "Decimal",
      "maxValue": 99.999,
      "minValue": 0.0,
      "description": "Starboard stern corner draft",
      "source": "BargeBase",
      "displayName": "Starboard stern draft"
    },
    {
      "name": "DraftCalculated",
      "type": "String",
      "access": "ReadWrite",
      "dataType": "Decimal",
      "maxValue": 99.999,
      "minValue": 0.0,
      "description": "Calculated draft",
      "source": "Barge (overrides BargeBase)",
      "displayName": "Calculated draft"
    },
    {
      "name": "DraftCalculatedFeet",
      "type": "String",
      "access": "ReadWrite",
      "dataType": "Integer",
      "description": "Calculated draft in feet",
      "source": "Barge"
    },
    {
      "name": "DraftCalculatedInches",
      "type": "String",
      "access": "ReadWrite",
      "dataType": "Integer",
      "minValue": 0,
      "maxValue": 11,
      "description": "Calculated draft in inches (0-11)",
      "source": "Barge",
      "displayName": "Calculated draft inches"
    },
    {
      "name": "CoverType",
      "type": "String",
      "access": "ReadWrite",
      "isRequired": true,
      "conditionalRequirement": "Required if GlobalSettingList.RequireBargeCoverType is True, or if commodity requires cover",
      "description": "Type of cover (e.g., OT for Open Top)",
      "source": "BargeBase",
      "displayName": "Cover type"
    },
    {
      "name": "CoverConfig",
      "type": "String",
      "access": "ReadWrite",
      "conditionalRequirement": "Required if company-operated and CoverType is not OT or blank",
      "description": "Cover configuration",
      "source": "BargeBase",
      "displayName": "Cover config"
    },
    {
      "name": "CoverSubTypeID",
      "type": "String",
      "access": "ReadWrite",
      "conditionalRequirement": "Required if commodity requires cover; must be blank if CoverType is OT or blank",
      "description": "Cover sub-type identifier",
      "source": "BargeBase",
      "displayName": "Sub type"
    },
    {
      "name": "CommodityID",
      "type": "String",
      "access": "ReadWrite",
      "description": "Commodity currently in barge",
      "source": "BargeBase",
      "displayName": "Commodity"
    },
    {
      "name": "LocationID",
      "type": "String",
      "access": "Public Get / Private Set (shadowed)",
      "description": "Current location of barge; set via multi-parameter signature with date/time, tier, and berth info",
      "source": "Barge (shadows BargeBase)",
      "displayName": "Location"
    },
    {
      "name": "LocationDateTime",
      "type": "SmartDate",
      "access": "Public Get / Private Set (shadowed)",
      "description": "Date/time of last position update",
      "source": "Barge (shadows BargeBase)"
    },
    {
      "name": "LoadStatus",
      "type": "String",
      "access": "ReadWrite",
      "description": "Current load status (Empty, Loaded, etc.)",
      "source": "BargeBase",
      "displayName": "Load status"
    },
    {
      "name": "CleanStatus",
      "type": "String",
      "access": "ReadWrite",
      "description": "Cleanliness status",
      "source": "BargeBase",
      "displayName": "Clean status"
    },
    {
      "name": "RepairStatus",
      "type": "String",
      "access": "ReadWrite",
      "description": "Repair status",
      "source": "BargeBase",
      "displayName": "Repair status"
    },
    {
      "name": "DamageLevel",
      "type": "String",
      "access": "ReadWrite",
      "description": "Level of damage",
      "source": "BargeBase",
      "displayName": "Damage level"
    },
    {
      "name": "DamageNote",
      "type": "String",
      "access": "ReadWrite",
      "conditionalRequirement": "Must be blank if IsDamaged is not checked",
      "description": "Notes about damage",
      "source": "BargeBase",
      "displayName": "Damage note"
    },
    {
      "name": "IsDamaged",
      "type": "Boolean",
      "access": "ReadWrite",
      "description": "Indicates if barge has damage noted",
      "source": "BargeBase",
      "displayName": "Damage noted"
    },
    {
      "name": "IsCargoDamaged",
      "type": "Boolean",
      "access": "ReadWrite",
      "description": "Indicates if cargo is damaged",
      "source": "BargeBase",
      "displayName": "Damaged cargo"
    },
    {
      "name": "IsLeaker",
      "type": "Boolean",
      "access": "ReadWrite",
      "description": "Indicates if barge is a leaker",
      "source": "BargeBase",
      "displayName": "Leaker"
    },
    {
      "name": "IsDryDocked",
      "type": "Boolean",
      "access": "ReadWrite",
      "description": "Indicates if barge is in dry dock",
      "source": "BargeBase",
      "displayName": "Dry dock"
    },
    {
      "name": "IsRepairScheduled",
      "type": "Boolean",
      "access": "ReadWrite",
      "description": "Indicates if repair is scheduled",
      "source": "BargeBase",
      "displayName": "Scheduled for repair"
    },
    {
      "name": "HasInsufficientFreeboard",
      "type": "Boolean",
      "access": "ReadWrite",
      "description": "Indicates if barge has insufficient freeboard",
      "source": "BargeBase",
      "displayName": "Insufficient freeboard"
    },
    {
      "name": "FreeboardRange",
      "type": "String",
      "access": "ReadWrite",
      "conditionalRequirement": "Required if HasInsufficientFreeboard is true; must be blank otherwise",
      "description": "Freeboard range",
      "source": "BargeBase",
      "displayName": "Freeboard range"
    },
    {
      "name": "FleetID",
      "type": "String",
      "access": "ReadWrite",
      "isRequired": true,
      "conditionalRequirement": "Required if EquipmentType is 'fleet-owned'",
      "description": "Fleet identifier",
      "source": "BargeBase",
      "displayName": "Fleet"
    },
    {
      "name": "EquipmentType",
      "type": "String",
      "access": "ReadWrite",
      "description": "Equipment type (e.g., 'fleet-owned')",
      "source": "BargeBase",
      "displayName": "Equipment type"
    },
    {
      "name": "TierID",
      "type": "String",
      "access": "Public Get / Private Set (shadowed)",
      "description": "Tier where barge is located; set via LocationID property",
      "source": "Barge (shadows BargeBase)",
      "displayName": "Tier"
    },
    {
      "name": "TierX",
      "type": "String",
      "access": "Public Get / Private Set (shadowed)",
      "description": "X-coordinate in tier; set via LocationID property",
      "source": "Barge (shadows BargeBase)",
      "displayName": "Tier X"
    },
    {
      "name": "TierY",
      "type": "String",
      "access": "Public Get / Private Set (shadowed)",
      "description": "Y-coordinate in tier; set via LocationID property",
      "source": "Barge (shadows BargeBase)",
      "displayName": "Tier Y"
    },
    {
      "name": "FacilityBerthID",
      "type": "String",
      "access": "Public Get / Private Set (shadowed)",
      "description": "Berth where barge is located; must match barge location; set via LocationID property",
      "source": "Barge (shadows BargeBase)"
    },
    {
      "name": "FacilityBerthX",
      "type": "String",
      "access": "Public Get / Private Set (shadowed)",
      "description": "X-coordinate in berth; set via LocationID property",
      "source": "Barge (shadows BargeBase)"
    },
    {
      "name": "FacilityBerthY",
      "type": "String",
      "access": "Public Get / Private Set (shadowed)",
      "description": "Y-coordinate in berth; set via LocationID property",
      "source": "Barge (shadows BargeBase)"
    },
    {
      "name": "FleetBoatID",
      "type": "String",
      "access": "ReadWrite",
      "description": "Servicing boat identifier; auto-updates FleetBoatActivityDateTime",
      "source": "Barge (overrides BargeBase)",
      "displayName": "Servicing boat ID"
    },
    {
      "name": "FleetBoatActivityDateTime",
      "type": "SmartDate",
      "access": "ReadWrite",
      "description": "Date/time of last fleet boat activity (auto-set when FleetBoatID changes)",
      "source": "BargeBase"
    },
    {
      "name": "RakeDirection",
      "type": "String",
      "access": "ReadWrite",
      "description": "Rake direction (None, Left, Right, Up, Down)",
      "source": "BargeBase",
      "displayName": "Rake direction"
    },
    {
      "name": "ColorPairID",
      "type": "String",
      "access": "ReadWrite",
      "description": "Color pair identifier",
      "source": "BargeBase",
      "displayName": "Color pair ID"
    },
    {
      "name": "TowString",
      "type": "String",
      "access": "ReadWrite",
      "description": "Tow string identifier",
      "source": "BargeBase"
    },
    {
      "name": "TowCut",
      "type": "String",
      "access": "ReadWrite",
      "description": "Tow cut identifier",
      "source": "BargeBase"
    },
    {
      "name": "BargeSyncIdentifier",
      "type": "Guid",
      "access": "ReadWrite",
      "description": "Synchronization identifier",
      "source": "BargeBase"
    },
    {
      "name": "HasAnchorWire",
      "type": "Boolean",
      "access": "ReadWrite",
      "defaultValue": "false",
      "description": "Indicates if barge has anchor wire",
      "source": "BargeBase"
    },
    {
      "name": "InServiceDate",
      "type": "SmartDate",
      "access": "ReadWrite",
      "description": "Date barge entered service",
      "source": "BargeBase",
      "displayName": "In service date"
    },
    {
      "name": "OutOfServiceDate",
      "type": "SmartDate",
      "access": "ReadWrite",
      "description": "Date barge went out of service; must be later than InServiceDate",
      "source": "BargeBase",
      "displayName": "Out of service date"
    },
    {
      "name": "HullNumber",
      "type": "String",
      "access": "ReadWrite",
      "description": "Hull number",
      "source": "BargeBase",
      "displayName": "Hull number"
    },
    {
      "name": "BargeSeriesID",
      "type": "String",
      "access": "ReadWrite",
      "description": "Barge series; auto-populates OwnerID, CustomerID, HullType, CoverType, and dimensions",
      "source": "Barge (overrides BargeBase)",
      "displayName": "Barge series"
    },
    {
      "name": "GlAccountNum",
      "type": "String",
      "access": "ReadWrite",
      "description": "General ledger account number",
      "source": "BargeBase",
      "displayName": "G/L code"
    },
    {
      "name": "BargeType",
      "type": "String",
      "access": "ReadWrite",
      "description": "Type of barge",
      "source": "BargeBase"
    },
    {
      "name": "ConvFesBargeID",
      "type": "String",
      "access": "ReadWrite",
      "description": "Conversion/FES barge identifier",
      "source": "BargeBase"
    },
    {
      "name": "Status",
      "type": "String",
      "access": "ReadOnly",
      "description": "Current status (calculated)",
      "source": "Barge"
    },
    {
      "name": "InspectionStatus",
      "type": "String",
      "access": "ReadOnly",
      "description": "Current inspection status",
      "source": "Barge"
    },
    {
      "name": "IsOnHold",
      "type": "Boolean",
      "access": "ReadOnly",
      "description": "Indicates if barge is on hold",
      "source": "Barge"
    },
    {
      "name": "DestinationInName",
      "type": "String",
      "access": "ReadOnly",
      "description": "Inbound destination name",
      "source": "Barge"
    },
    {
      "name": "DestinationOutName",
      "type": "String",
      "access": "ReadOnly",
      "description": "Outbound destination name",
      "source": "Barge"
    },
    {
      "name": "LoadFirst",
      "type": "Boolean",
      "access": "ReadOnly",
      "description": "Load first flag",
      "source": "Barge"
    },
    {
      "name": "LoadLast",
      "type": "Boolean",
      "access": "ReadOnly",
      "description": "Load last flag",
      "source": "Barge"
    },
    {
      "name": "LoadMultipleLots",
      "type": "Boolean",
      "access": "ReadOnly",
      "description": "Load multiple lots flag",
      "source": "Barge"
    },
    {
      "name": "IsOnOrder",
      "type": "Boolean",
      "access": "ReadOnly",
      "description": "Indicates if barge is on order",
      "source": "Barge"
    },
    {
      "name": "IsAwaitingPickup",
      "type": "Boolean",
      "access": "ReadOnly",
      "description": "Indicates if barge is awaiting pickup",
      "source": "Barge"
    },
    {
      "name": "IsCompanyOperatedBarge",
      "type": "Boolean",
      "access": "ReadOnly",
      "parameters": "activeDivisionOnly: Boolean (optional, default false)",
      "description": "Indicates if barge is company-operated (CustomerID matches any DivisionCode.OperatorID)",
      "source": "Barge"
    },
    {
      "name": "IsCompanyOperatedBargeCoverTypeSpecialLogic",
      "type": "Boolean",
      "access": "ReadOnly",
      "description": "True if EnableCoverTypeSpecialLogic is True and barge is company-operated",
      "source": "Barge"
    },
    {
      "name": "IsNotNullAndNotOTCoverType",
      "type": "Boolean",
      "access": "ReadOnly",
      "description": "True when CoverType is not Null and is not 'OT'",
      "source": "Barge"
    },
    {
      "name": "IsRequiredCoverForCommodity",
      "type": "Boolean",
      "access": "ReadOnly",
      "description": "True if the commodity requires a cover and barge is company-operated",
      "source": "Barge"
    },
    {
      "name": "BargeEventTicketID",
      "type": "Int32",
      "access": "ReadWrite",
      "description": "Ticket ID for barge event operations",
      "source": "Barge"
    },
    {
      "name": "SelectedFleetID",
      "type": "Int32",
      "access": "Friend",
      "description": "Currently selected fleet ID (for stored procedure calls and status updates)",
      "source": "Barge"
    },
    {
      "name": "OriginalLoadStatus",
      "type": "String",
      "access": "ReadOnly",
      "description": "Original load status when object was loaded",
      "source": "Barge"
    },
    {
      "name": "OriginalTierID",
      "type": "String",
      "access": "Friend ReadOnly",
      "description": "Original tier ID when object was loaded",
      "source": "Barge"
    },
    {
      "name": "OriginalTierX",
      "type": "String",
      "access": "Friend ReadOnly",
      "description": "Original tier X coordinate when object was loaded",
      "source": "Barge"
    },
    {
      "name": "OriginalTierY",
      "type": "String",
      "access": "Friend ReadOnly",
      "description": "Original tier Y coordinate when object was loaded",
      "source": "Barge"
    },
    {
      "name": "HasMultipleOpenTickets",
      "type": "Boolean",
      "access": "Friend ReadOnly",
      "description": "Indicates if barge has multiple open tickets",
      "source": "Barge"
    },
    {
      "name": "LatestModifyUser",
      "type": "String",
      "access": "ReadOnly",
      "description": "Last user who modified the barge record (used by ShoreComm for update logic)",
      "source": "Barge"
    },
    {
      "name": "LatestEventDateTimeAllOtherFleets",
      "type": "String",
      "access": "Friend ReadOnly",
      "description": "Latest event date/time for all non-voided events on open tickets in other fleets",
      "source": "Barge"
    }
  ],
  "businessRules": [
    {
      "ruleName": "ExternalLength_Reasonable",
      "property": "ExternalLength",
      "condition": "ExternalLength is not empty AND (ExternalLength > 50000.0 OR ExternalLength < 0.0)",
      "message": "[ExternalLength value] is not a reasonable value for Length",
      "severity": "Error",
      "context": "Always",
      "lineNumber": "Barge.vb:1533-1539"
    },
    {
      "ruleName": "ExternalWidth_Reasonable",
      "property": "ExternalWidth",
      "condition": "ExternalWidth is not empty AND (ExternalWidth > 20000.0 OR ExternalWidth < 0.0)",
      "message": "[ExternalWidth value] is not a reasonable value for Width",
      "severity": "Error",
      "context": "Always",
      "lineNumber": "Barge.vb:1542-1548"
    },
    {
      "ruleName": "ExternalDepth_Reasonable",
      "property": "ExternalDepth",
      "condition": "ExternalDepth is not empty AND (ExternalDepth > 10000.0 OR ExternalDepth < 0.0)",
      "message": "[ExternalDepth value] is not a reasonable value for Depth",
      "severity": "Error",
      "context": "Always",
      "lineNumber": "Barge.vb:1551-1557"
    },
    {
      "ruleName": "Draft_MaxDraft",
      "property": "Draft",
      "condition": "Draft is not empty AND (DraftPortBow > Draft OR DraftPortStern > Draft OR DraftStarboardBow > Draft OR DraftStarboardStern > Draft)",
      "message": "Overall draft must be >= the highest corner draft.",
      "severity": "Error",
      "context": "Always",
      "lineNumber": "Barge.vb:1559-1574"
    },
    {
      "ruleName": "Draft_Range",
      "property": "Draft",
      "condition": "Draft is not empty AND (Draft > 99.999 OR Draft < 0.0)",
      "message": "Draft must be between 0 and 99 ft 11 in",
      "severity": "Error",
      "context": "Always",
      "lineNumber": "Barge.vb:1577-1580"
    },
    {
      "ruleName": "DraftInches_Range",
      "property": "DraftInches",
      "condition": "DraftInches is not empty AND (DraftInches < 0 OR DraftInches > 11)",
      "message": "Draft inches must be between 0 and 11.",
      "severity": "Error",
      "context": "Always",
      "lineNumber": "Barge.vb:1583-1586"
    },
    {
      "ruleName": "DraftPortBow_Range",
      "property": "DraftPortBow",
      "condition": "DraftPortBow is not empty AND (DraftPortBow > 99.999 OR DraftPortBow < 0.0)",
      "message": "Port bow draft must be between 0 and 99 ft 11 in",
      "severity": "Error",
      "context": "Always",
      "lineNumber": "Barge.vb:1589-1593"
    },
    {
      "ruleName": "DraftStarboardBow_Range",
      "property": "DraftStarboardBow",
      "condition": "DraftStarboardBow is not empty AND (DraftStarboardBow > 99.999 OR DraftStarboardBow < 0.0)",
      "message": "Starboard bow draft must be between 0 and 99 ft 11 in",
      "severity": "Error",
      "context": "Always",
      "lineNumber": "Barge.vb:1596-1600"
    },
    {
      "ruleName": "DraftPortStern_Range",
      "property": "DraftPortStern",
      "condition": "DraftPortStern is not empty AND (DraftPortStern > 99.999 OR DraftPortStern < 0.0)",
      "message": "Port stern draft must be between 0 and 99 ft 11 in",
      "severity": "Error",
      "context": "Always",
      "lineNumber": "Barge.vb:1603-1607"
    },
    {
      "ruleName": "DraftStarboardStern_Range",
      "property": "DraftStarboardStern",
      "condition": "DraftStarboardStern is not empty AND (DraftStarboardStern > 99.999 OR DraftStarboardStern < 0.0)",
      "message": "Starboard stern draft must be between 0 and 99 ft 11 in",
      "severity": "Error",
      "context": "Always",
      "lineNumber": "Barge.vb:1610-1614"
    },
    {
      "ruleName": "DraftCalculated_Range",
      "property": "DraftCalculated",
      "condition": "DraftCalculated is not empty AND (DraftCalculated > 99.999 OR DraftCalculated < 0.0)",
      "message": "Calculated draft must be between 0 and 99 ft 11 in",
      "severity": "Error",
      "context": "Always",
      "lineNumber": "Barge.vb:1617-1621"
    },
    {
      "ruleName": "CustomerID_RequiredFleetOwned",
      "property": "CustomerID",
      "condition": "NOT _IsTerminalActive AND EquipmentType.ToLower() <> 'fleet-owned' AND CustomerID is empty",
      "message": "Operator is required",
      "severity": "Error",
      "context": "When not Terminal Mode and not Fleet-owned",
      "lineNumber": "Barge.vb:1624-1631"
    },
    {
      "ruleName": "SizeCategory_RequiredFleetOwned",
      "property": "SizeCategory",
      "condition": "NOT _IsTerminalActive AND EquipmentType.ToLower() <> 'fleet-owned' AND SizeCategory is empty",
      "message": "Size is required",
      "severity": "Error",
      "context": "When not Terminal Mode and not Fleet-owned",
      "lineNumber": "Barge.vb:1634-1639"
    },
    {
      "ruleName": "FleetID_RequiredFleetOwned",
      "property": "FleetID",
      "condition": "EquipmentType.ToLower() = 'fleet-owned' AND FleetID is empty",
      "message": "Fleet is required",
      "severity": "Error",
      "context": "When Fleet-owned",
      "lineNumber": "Barge.vb:1642-1646"
    },
    {
      "ruleName": "FacilityBerthID_MustBeBlank",
      "property": "FacilityBerthID",
      "condition": "(FacilityBerthID is not empty OR FacilityBerthX is not empty OR FacilityBerthY is not empty) AND LocationID <> FacilityBerthList.GetLocationID(FacilityBerthID)",
      "message": "Facility Berth ID, Facility Berth X, and Facility Berth Y must be blank when the barge location does not match the berth location.",
      "severity": "Error",
      "context": "When berth location doesn't match barge location",
      "lineNumber": "Barge.vb:1649-1656"
    },
    {
      "ruleName": "DamageNote_IsDamaged_Required",
      "property": "DamageNote",
      "condition": "NOT IsDamaged AND DamageNote is not empty",
      "message": "Damage note must be blank if Damage noted is not checked.",
      "severity": "Error",
      "context": "When IsDamaged is false",
      "lineNumber": "Barge.vb:1660-1664"
    },
    {
      "ruleName": "FreeboardRange_Required",
      "property": "FreeboardRange",
      "condition": "(HasInsufficientFreeboard AND FreeboardRange is empty) OR (NOT HasInsufficientFreeboard AND FreeboardRange is not empty)",
      "message": "Freeboard range is required if Insufficient freeboard is checked.",
      "severity": "Error",
      "context": "Conditional based on HasInsufficientFreeboard",
      "lineNumber": "Barge.vb:1667-1674"
    },
    {
      "ruleName": "OutOfServiceDate_MustBeLater",
      "property": "OutOfServiceDate",
      "condition": "InServiceDate is not empty AND OutOfServiceDate is not empty AND InServiceDate >= OutOfServiceDate",
      "message": "The Out of service date must be later than the In service date.",
      "severity": "Error",
      "context": "When both dates have values",
      "lineNumber": "Barge.vb:1677-1684"
    },
    {
      "ruleName": "BargeCharters_UniqueDateRanges",
      "property": "BargeCharters",
      "condition": "Any two charters have overlapping date ranges",
      "message": "The date ranges of two charters may not overlap.",
      "severity": "Error",
      "context": "When multiple charters exist",
      "lineNumber": "Barge.vb:1687-1741"
    },
    {
      "ruleName": "CoverConfig_BlankOrRequiredCoverConfig",
      "property": "CoverConfig",
      "condition": "IsCompanyOperatedBargeCoverTypeSpecialLogic is True AND IsNotNullAndNotOTCoverType is True AND (CoverConfig is empty OR CoverConfig.ToLower = 'open')",
      "message": "Cover config is required and must have a value other than 'Open' when Cover type has a value and is not 'OT'.",
      "severity": "Error",
      "context": "When company-operated with special logic enabled and CoverType is not OT",
      "lineNumber": "Barge.vb:1744-1770"
    },
    {
      "ruleName": "CoverConfig_MustBeBlank",
      "property": "CoverConfig",
      "condition": "IsCompanyOperatedBargeCoverTypeSpecialLogic is True AND NOT IsNotNullAndNotOTCoverType AND CoverConfig is not empty",
      "message": "Cover config must be blank.",
      "severity": "Error",
      "context": "When company-operated with special logic enabled and CoverType is OT or blank",
      "lineNumber": "Barge.vb:1760-1764"
    },
    {
      "ruleName": "CoverType_CommodityID_Required",
      "property": "CoverType",
      "condition": "(CoverType is empty OR CoverType.ToLower = 'OT') AND IsRequiredCoverForCommodity is True",
      "message": "The selected Commodity requires a cover, therefore a Cover type other than 'OT' is required.",
      "severity": "Error",
      "context": "When commodity requires cover and barge is company-operated",
      "lineNumber": "Barge.vb:1774-1783"
    },
    {
      "ruleName": "CoverSubTypeID_CommodityID_Required",
      "property": "CoverSubTypeID",
      "condition": "(CoverSubTypeID is empty OR CInt(CoverSubTypeID) <= 0) AND IsRequiredCoverForCommodity is True",
      "message": "The selected Commodity requires a cover, therefore Sub type is required.",
      "severity": "Error",
      "context": "When commodity requires cover and barge is company-operated",
      "lineNumber": "Barge.vb:1789-1794"
    },
    {
      "ruleName": "CoverSubTypeID_CoverType_Required",
      "property": "CoverSubTypeID",
      "condition": "CoverSubTypeID is not empty AND CInt(CoverSubTypeID) > 0 AND (CoverType is empty OR CoverType.ToLower = 'OT')",
      "message": "Sub type must be blank when Cover type is 'OT' or has no value.",
      "severity": "Error",
      "context": "When CoverType is OT or blank",
      "lineNumber": "Barge.vb:1797-1803"
    },
    {
      "ruleName": "CoverType_Required",
      "property": "CoverType",
      "condition": "CoverType is empty AND GlobalSettingList.RequireBargeCoverType is True",
      "message": "Cover type is required",
      "severity": "Error",
      "context": "When GlobalSettingList.RequireBargeCoverType is True",
      "lineNumber": "Barge.vb:1807-1812"
    }
  ],
  "methods": {
    "factory": [
      {
        "name": "NewBarge",
        "returnType": "Barge",
        "parameters": [],
        "description": "Creates new barge instance",
        "source": "BargeBase"
      },
      {
        "name": "GetBarge",
        "returnType": "Barge",
        "parameters": ["ID: Int32"],
        "description": "Retrieves barge by ID",
        "source": "BargeBase"
      },
      {
        "name": "GetBarge",
        "returnType": "Barge",
        "parameters": ["bargeNum: String", "selectedFleetID: Int32"],
        "description": "Retrieves barge by number and fleet",
        "source": "Barge (various overloads in file)"
      },
      {
        "name": "GetBargeAsync",
        "returnType": "Task<Barge>",
        "parameters": ["ID: Int32", "selectedFleetID: Int32"],
        "description": "Asynchronously retrieves barge by ID and fleet",
        "source": "Barge"
      }
    ],
    "crud": [
      {
        "name": "Save",
        "returnType": "BusinessBase",
        "description": "Saves barge and related objects with refresh",
        "source": "Inherited from base"
      },
      {
        "name": "SaveNoRefresh",
        "returnType": "void",
        "description": "Saves barge and related objects without refresh",
        "source": "Inherited from base"
      }
    ],
    "business": [
      {
        "name": "UpdateStatus",
        "returnType": "void",
        "description": "Updates barge status when location changes",
        "source": "Barge (referenced in LocationID setter)"
      },
      {
        "name": "SetInitialSizeCategory",
        "returnType": "void",
        "description": "Sets size category based on external length and width",
        "source": "Barge"
      },
      {
        "name": "ClearTier",
        "returnType": "void",
        "parameters": ["barge: Barge"],
        "description": "Clears tier information",
        "source": "Barge"
      },
      {
        "name": "ClearBerth",
        "returnType": "void",
        "parameters": ["barge: Barge"],
        "description": "Clears berth information",
        "source": "Barge"
      },
      {
        "name": "ConvertToFeetAndInches",
        "returnType": "void",
        "parameters": ["value: String", "feet: String", "inches: String"],
        "description": "Converts decimal draft to feet and inches",
        "source": "Barge"
      },
      {
        "name": "ConvertFromFeetAndInches",
        "returnType": "String",
        "parameters": ["feet: String", "inches: String"],
        "description": "Converts feet and inches to decimal draft",
        "source": "Barge"
      },
      {
        "name": "GetOpenTicketID",
        "returnType": "Int32",
        "parameters": [],
        "description": "Gets open ticket ID for current barge and selected fleet",
        "source": "Barge"
      },
      {
        "name": "GetOpenTicketID",
        "returnType": "Int32",
        "parameters": ["myBargeID: Int32", "myFleetID: Int32"],
        "isShared": true,
        "description": "Gets open ticket ID for specified barge and fleet",
        "source": "Barge"
      },
      {
        "name": "GetBargeID",
        "returnType": "Int32",
        "parameters": ["bargeNum: String"],
        "isShared": true,
        "description": "Looks up BargeID by barge number",
        "source": "Barge"
      },
      {
        "name": "GetBargeNum",
        "returnType": "String",
        "parameters": ["bargeNum: String"],
        "isShared": true,
        "description": "Looks up BargeOps barge number (handles format differences)",
        "source": "Barge"
      },
      {
        "name": "CloseTicketAndSave",
        "returnType": "BrokenRules.RulesCollection",
        "parameters": ["bargeNum: String", "ticketID: Int32", "fleetID: Int32", "preserveBargeState: Boolean"],
        "isShared": true,
        "description": "Closes ticket and saves barge",
        "source": "Barge"
      },
      {
        "name": "CloseTicket",
        "returnType": "void",
        "parameters": ["barge: Barge", "ticketID: Int32", "closeDateTime: String", "preserveBargeState: Boolean"],
        "isShared": true,
        "description": "Closes ticket (sets fields but doesn't save)",
        "source": "Barge"
      },
      {
        "name": "VoidTicketAndSave",
        "returnType": "Barge",
        "parameters": ["bargeNum: String", "ticketID: Int32", "fleetID: Int32", "voidNote: String"],
        "isShared": true,
        "description": "Voids ticket and saves barge",
        "source": "Barge"
      },
      {
        "name": "GetBargeIDBySyncIdentifier",
        "returnType": "Int32",
        "parameters": ["syncIdentifier: Guid"],
        "isShared": true,
        "description": "Gets BargeID by sync identifier",
        "source": "Barge"
      },
      {
        "name": "GetBargeSyncIdentifierByID",
        "returnType": "Guid",
        "parameters": ["bargeID: Int32"],
        "isShared": true,
        "description": "Gets sync identifier by BargeID",
        "source": "Barge"
      },
      {
        "name": "GetBargeNumBySyncIdentifier",
        "returnType": "String",
        "parameters": ["syncIdentifier: Guid"],
        "isShared": true,
        "description": "Gets barge number by sync identifier",
        "source": "Barge"
      },
      {
        "name": "BargeHasOpenTicketsInOtherFleets",
        "returnType": "Boolean",
        "parameters": ["brgID: Int32", "fleetIDNotToCheck: Int32"],
        "isShared": true,
        "description": "Checks if barge has open tickets in other fleets",
        "source": "Barge"
      }
    ]
  },
  "relationships": [
    {
      "property": "Ticket",
      "relatedEntity": "Ticket",
      "type": "OneToOne",
      "cascadeDelete": false,
      "description": "Associated ticket (deferred loading); exposed via BargeEventTicket property",
      "source": "BargeBase"
    },
    {
      "property": "BargeCharters",
      "relatedEntity": "BargeCharter",
      "type": "OneToMany",
      "cascadeDelete": true,
      "description": "Collection of charters for this barge (deferred loading)",
      "source": "BargeBase"
    },
    {
      "property": "Alert",
      "relatedEntity": "Alert",
      "type": "OneToOne",
      "cascadeDelete": false,
      "description": "Associated alert (deferred loading)",
      "source": "BargeBase"
    },
    {
      "property": "CustomerID",
      "relatedEntity": "Customer",
      "type": "ManyToOne",
      "description": "Operator/customer foreign key",
      "source": "BargeBase"
    },
    {
      "property": "OwnerID",
      "relatedEntity": "Customer",
      "type": "ManyToOne",
      "description": "Owner foreign key",
      "source": "BargeBase"
    },
    {
      "property": "LocationID",
      "relatedEntity": "Location",
      "type": "ManyToOne",
      "description": "Current location foreign key",
      "source": "BargeBase"
    },
    {
      "property": "FleetID",
      "relatedEntity": "Fleet",
      "type": "ManyToOne",
      "description": "Fleet foreign key (for fleet-owned barges)",
      "source": "BargeBase"
    },
    {
      "property": "TierID",
      "relatedEntity": "Tier",
      "type": "ManyToOne",
      "description": "Tier foreign key",
      "source": "BargeBase"
    },
    {
      "property": "FacilityBerthID",
      "relatedEntity": "FacilityBerth",
      "type": "ManyToOne",
      "description": "Berth foreign key (must match location)",
      "source": "BargeBase"
    },
    {
      "property": "FleetBoatID",
      "relatedEntity": "Location (Boat)",
      "type": "ManyToOne",
      "description": "Servicing boat foreign key",
      "source": "BargeBase"
    },
    {
      "property": "CommodityID",
      "relatedEntity": "Commodity",
      "type": "ManyToOne",
      "description": "Commodity foreign key",
      "source": "BargeBase"
    },
    {
      "property": "BargeSeriesID",
      "relatedEntity": "BargeSeries",
      "type": "ManyToOne",
      "description": "Barge series foreign key",
      "source": "BargeBase"
    },
    {
      "property": "ColorPairID",
      "relatedEntity": "ColorPair",
      "type": "ManyToOne",
      "description": "Color pair foreign key",
      "source": "BargeBase"
    },
    {
      "property": "CoverSubTypeID",
      "relatedEntity": "CoverSubType",
      "type": "ManyToOne",
      "description": "Cover sub-type foreign key",
      "source": "BargeBase"
    }
  ],
  "initialization": {
    "method": "Initialize",
    "defaults": [
      {
        "property": "IsActive",
        "value": "true"
      },
      {
        "property": "HasAnchorWire",
        "value": "false"
      }
    ],
    "description": "Sets default values and display names for properties"
  },
  "specialBehaviors": [
    {
      "behavior": "LocationID Multi-Parameter Setter",
      "description": "LocationID setter requires multiple parameters (locDateTime, locTierID, locTierX, locTierY, facBerthID, facBerthX, facBerthY). Updates location only if new datetime >= current datetime or is MinValue. Auto-clears tier/berth if invalid.",
      "reference": "Barge.vb:201-291"
    },
    {
      "behavior": "BargeSeriesID Auto-Population",
      "description": "When BargeSeriesID is set, automatically populates OwnerID, CustomerID, HullType, CoverType, ExternalDepth, ExternalLength, and ExternalWidth from BargeSeriesList",
      "reference": "Barge.vb:419-437"
    },
    {
      "behavior": "Draft Feet/Inches Conversion",
      "description": "Draft property auto-converts to DraftFeet and DraftInches. Setting DraftFeet or DraftInches recalculates Draft property. Same pattern for DraftCalculated.",
      "reference": "Barge.vb:718-814"
    },
    {
      "behavior": "FleetBoatID Activity Tracking",
      "description": "Setting FleetBoatID automatically updates FleetBoatActivityDateTime to current datetime",
      "reference": "Barge.vb:440-448"
    },
    {
      "behavior": "SizeCategory Auto-Calculation",
      "description": "Changing ExternalLength or ExternalWidth triggers SetInitialSizeCategory method",
      "reference": "Barge.vb:125-147"
    },
    {
      "behavior": "Status Auto-Update",
      "description": "Changing LocationID triggers UpdateStatus method to recalculate barge status",
      "reference": "Barge.vb:241"
    },
    {
      "behavior": "Cover Type Special Logic",
      "description": "Complex conditional logic for CoverConfig and CoverSubType based on: IsCompanyOperatedBargeCoverTypeSpecialLogic, IsNotNullAndNotOTCoverType, and IsRequiredCoverForCommodity properties",
      "reference": "Barge.vb:850-892, 1744-1812"
    },
    {
      "behavior": "Ticket Management",
      "description": "Barge exposes BargeEventTicket property (not Ticket directly). BargeEventTicketID controls which ticket is loaded. GetOpenTicketID determines current open ticket.",
      "reference": "Barge.vb:603-717"
    },
    {
      "behavior": "Charter Date Range Validation",
      "description": "Complex logic ensures BargeCharters collection has no overlapping date ranges using coalesced end dates",
      "reference": "Barge.vb:1687-1741"
    }
  ],
  "modernValidationMapping": {
    "fluentValidation": [
      {
        "legacyRule": "BrokenRules.Assert(p_dispExternalLength, message, condition)",
        "modernEquivalent": "RuleFor(x => x.ExternalLength).Must(x => x <= 50000.0 && x >= 0.0).When(x => !string.IsNullOrEmpty(x.ExternalLength)).WithMessage(message)"
      },
      {
        "legacyRule": "BrokenRules.Assert(p_dispDraft & 'MAX', message, condition)",
        "modernEquivalent": "RuleFor(x => x.Draft).Must((barge, draft) => AllCornerDrafts <= draft).When(x => !string.IsNullOrEmpty(x.Draft)).WithMessage(message)"
      },
      {
        "legacyRule": "BrokenRules.Assert(p_dispCustomerID & 'Barge' & cIsRequiredName & 'FleetOwned', message, condition)",
        "modernEquivalent": "RuleFor(x => x.CustomerID).NotEmpty().When(x => !IsTerminalActive && x.EquipmentType?.ToLower() != 'fleet-owned').WithMessage(message)"
      },
      {
        "legacyRule": "BrokenRules.Assert(p_dispFreeboardRange & cIsRequiredName, message, condition)",
        "modernEquivalent": "RuleFor(x => x.FreeboardRange).NotEmpty().When(x => x.HasInsufficientFreeboard).WithMessage(message); RuleFor(x => x.FreeboardRange).Empty().When(x => !x.HasInsufficientFreeboard).WithMessage(message)"
      }
    ],
    "dataAnnotations": [
      {
        "property": "BargeNum",
        "annotations": "[Required(ErrorMessage = \"Barge number is required\")]"
      },
      {
        "property": "Draft",
        "annotations": "[Range(0.0, 99.999, ErrorMessage = \"Draft must be between 0 and 99 ft 11 in\")]"
      },
      {
        "property": "DraftInches",
        "annotations": "[Range(0, 11, ErrorMessage = \"Draft inches must be between 0 and 11.\")]"
      }
    ]
  },
  "storedProcedures": [
    {
      "name": "GetOpenTicket",
      "parameters": ["@BargeID: Int", "@SelectedFleetID: Int"],
      "returns": "Int32 (TicketID or 0 if none, negative if multiple)",
      "description": "Gets the open ticket ID for a barge in a fleet",
      "reference": "Barge.vb:1838"
    },
    {
      "name": "BargeOpenTicketCountInOtherFleets",
      "parameters": ["@BargeID: Int", "@FleetID: Int"],
      "returns": "Int32 (count of open tickets)",
      "description": "Counts open tickets for barge in fleets other than specified fleet",
      "reference": "Barge.vb:1138"
    },
    {
      "name": "GetBargeID",
      "parameters": ["@BargeNum: VarChar"],
      "returns": "Int32 (BargeID or -1 if not found)",
      "description": "Looks up BargeID by barge number",
      "reference": "Barge.vb:1855"
    },
    {
      "name": "GetBargeNum",
      "parameters": ["@BargeNum: VarChar"],
      "returns": "String (BargeOps formatted barge number)",
      "description": "Looks up BargeOps barge number (handles format variations)",
      "reference": "Barge.vb:1873"
    },
    {
      "name": "HasBillableEventsForOpenTickets",
      "parameters": ["@BargeID: Int"],
      "returns": "Boolean",
      "description": "Checks if barge has billable events on open tickets",
      "reference": "Barge.vb:1116"
    }
  ],
  "notes": [
    "Barge object has complex location management with multi-parameter LocationID setter to handle date/time validation",
    "Draft values support both decimal (feet) and feet/inches representations with automatic conversion",
    "Cover type logic has special rules for company-operated barges when EnableCoverTypeSpecialLogic global setting is enabled",
    "Ticket relationship is exposed via BargeEventTicket property rather than direct Ticket property to control which ticket is loaded",
    "BargeCharters collection enforces non-overlapping date ranges with sophisticated comparison logic",
    "Status field is calculated/read-only and updated when location changes",
    "Multiple readonly properties expose calculated/derived state (IsOnOrder, IsAwaitingPickup, etc.)",
    "BargeSeriesID acts as a template that auto-populates multiple properties when set",
    "Size category is auto-calculated when external dimensions change",
    "Facility berth fields must match the barge's current location or are automatically cleared",
    "The object supports both synchronous and asynchronous factory methods (GetBarge/GetBargeAsync)",
    "Friend-scoped properties (SelectedFleetID, ModifyDateTime) support specialized scenarios like OnboardOrderBarge updates and stored procedure calls"
  ]
}
