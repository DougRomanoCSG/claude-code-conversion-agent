{
  "entity": "Vendor",
  "softDelete": true,
  "hasIsActive": true,
  "storedProcedures": [
    {
      "name": "VendorSearch",
      "operation": "Search",
      "parameters": [
        {
          "name": "@Name",
          "type": "varchar",
          "required": false,
          "description": "Filter by vendor name"
        },
        {
          "name": "@AccountingCode",
          "type": "varchar",
          "required": false,
          "description": "Filter by accounting code"
        },
        {
          "name": "@IsBargeExEnabledOnly",
          "type": "bit",
          "required": false,
          "description": "Filter by BargeEx enabled vendors only"
        },
        {
          "name": "@IsActiveOnly",
          "type": "bit",
          "required": false,
          "description": "Filter by active vendors only"
        },
        {
          "name": "@EnablePortalOnly",
          "type": "bit",
          "required": false,
          "description": "Filter by portal enabled vendors only"
        },
        {
          "name": "@FuelSuppliersOnly",
          "type": "bit",
          "required": false,
          "description": "Filter by fuel suppliers only"
        },
        {
          "name": "@IsLiquidBrokerOnly",
          "type": "bit",
          "required": false,
          "description": "Filter by liquid broker vendors only"
        },
        {
          "name": "@IsInternalVendorOnly",
          "type": "bit",
          "required": false,
          "description": "Filter by internal vendors only"
        },
        {
          "name": "@IsTankermanOnly",
          "type": "bit",
          "required": false,
          "description": "Filter by tankerman vendors only"
        }
      ],
      "resultColumns": [
        {
          "column": "VendorID",
          "property": "VendorID",
          "type": "int"
        },
        {
          "column": "Name",
          "property": "Name",
          "type": "string"
        },
        {
          "column": "LongName",
          "property": "LongName",
          "type": "string"
        },
        {
          "column": "AccountingCode",
          "property": "AccountingCode",
          "type": "string"
        },
        {
          "column": "IsBargeExEnabled",
          "property": "IsBargeExEnabled",
          "type": "bool"
        },
        {
          "column": "IsActive",
          "property": "IsActive",
          "type": "bool"
        },
        {
          "column": "EnablePortal",
          "property": "EnablePortal",
          "type": "bool"
        },
        {
          "column": "IsFuelSupplier",
          "property": "IsFuelSupplier",
          "type": "bool"
        },
        {
          "column": "IsBoatAssistSupplier",
          "property": "IsBoatAssistSupplier",
          "type": "bool"
        },
        {
          "column": "IsLiquidBroker",
          "property": "IsLiquidBroker",
          "type": "bool"
        },
        {
          "column": "IsInternalVendor",
          "property": "IsInternalVendor",
          "type": "bool"
        },
        {
          "column": "IsTankerman",
          "property": "IsTankerman",
          "type": "bool"
        }
      ]
    },
    {
      "name": "VendorSelect",
      "operation": "GetById",
      "parameters": [
        {
          "name": "@VendorID",
          "type": "int",
          "required": true,
          "description": "Primary key to fetch vendor"
        }
      ],
      "resultColumns": [
        {
          "column": "VendorID",
          "property": "VendorID",
          "type": "int"
        },
        {
          "column": "Name",
          "property": "Name",
          "type": "string",
          "maxLength": 20
        },
        {
          "column": "LongName",
          "property": "LongName",
          "type": "string",
          "maxLength": 50
        },
        {
          "column": "AccountingCode",
          "property": "AccountingCode",
          "type": "string",
          "maxLength": 20
        },
        {
          "column": "IsActive",
          "property": "IsActive",
          "type": "bool"
        },
        {
          "column": "EnablePortal",
          "property": "EnablePortal",
          "type": "bool"
        },
        {
          "column": "Address",
          "property": "Address",
          "type": "string",
          "maxLength": 80
        },
        {
          "column": "City",
          "property": "City",
          "type": "string",
          "maxLength": 30
        },
        {
          "column": "State",
          "property": "State",
          "type": "string",
          "maxLength": 2
        },
        {
          "column": "Zip",
          "property": "Zip",
          "type": "string",
          "maxLength": 10
        },
        {
          "column": "PhoneNumber",
          "property": "PhoneNumber",
          "type": "string",
          "maxLength": 10,
          "formatting": "Phone10"
        },
        {
          "column": "FaxNumber",
          "property": "FaxNumber",
          "type": "string",
          "maxLength": 10,
          "formatting": "Phone10"
        },
        {
          "column": "EmailAddress",
          "property": "EmailAddress",
          "type": "string",
          "maxLength": 100
        },
        {
          "column": "IsBargeExEnabled",
          "property": "IsBargeExEnabled",
          "type": "bool"
        },
        {
          "column": "BargeExTradingPartnerNum",
          "property": "BargeExTradingPartnerNum",
          "type": "string",
          "maxLength": 8
        },
        {
          "column": "BargeExConfigID",
          "property": "BargeExConfigID",
          "type": "string"
        },
        {
          "column": "IsLiquidBroker",
          "property": "IsLiquidBroker",
          "type": "bool"
        },
        {
          "column": "TermsCode",
          "property": "TermsCode",
          "type": "string",
          "maxLength": 8
        },
        {
          "column": "IsInternalVendor",
          "property": "IsInternalVendor",
          "type": "bool"
        },
        {
          "column": "IsTankerman",
          "property": "IsTankerman",
          "type": "bool"
        }
      ],
      "childResultSets": [
        {
          "name": "VendorContacts",
          "description": "Child collection loaded immediately"
        }
      ]
    },
    {
      "name": "VendorInsert",
      "operation": "Insert",
      "parameters": [
        {
          "name": "@VendorID",
          "type": "int",
          "direction": "InputOutput",
          "required": true,
          "description": "Primary key, returned as output"
        },
        {
          "name": "@Name",
          "type": "varchar",
          "required": true,
          "maxLength": 20
        },
        {
          "name": "@LongName",
          "type": "varchar",
          "required": true,
          "maxLength": 50
        },
        {
          "name": "@AccountingCode",
          "type": "varchar",
          "required": false,
          "maxLength": 20
        },
        {
          "name": "@IsActive",
          "type": "bit",
          "required": true
        },
        {
          "name": "@EnablePortal",
          "type": "bit",
          "required": true
        },
        {
          "name": "@Address",
          "type": "varchar",
          "required": false,
          "maxLength": 80
        },
        {
          "name": "@City",
          "type": "varchar",
          "required": false,
          "maxLength": 30
        },
        {
          "name": "@State",
          "type": "char",
          "required": false,
          "maxLength": 2
        },
        {
          "name": "@Zip",
          "type": "varchar",
          "required": false,
          "maxLength": 10
        },
        {
          "name": "@PhoneNumber",
          "type": "varchar",
          "required": false,
          "maxLength": 10
        },
        {
          "name": "@FaxNumber",
          "type": "varchar",
          "required": false,
          "maxLength": 10
        },
        {
          "name": "@EmailAddress",
          "type": "varchar",
          "required": false,
          "maxLength": 100
        },
        {
          "name": "@IsBargeExEnabled",
          "type": "bit",
          "required": true
        },
        {
          "name": "@BargeExTradingPartnerNum",
          "type": "char",
          "required": false,
          "maxLength": 8
        },
        {
          "name": "@BargeExConfigID",
          "type": "int",
          "required": false
        },
        {
          "name": "@IsLiquidBroker",
          "type": "bit",
          "required": true
        },
        {
          "name": "@TermsCode",
          "type": "varchar",
          "required": false,
          "maxLength": 8
        },
        {
          "name": "@IsInternalVendor",
          "type": "bit",
          "required": true
        },
        {
          "name": "@IsTankerman",
          "type": "bit",
          "required": true
        }
      ]
    },
    {
      "name": "VendorUpdate",
      "operation": "Update",
      "parameters": [
        {
          "name": "@VendorID",
          "type": "int",
          "required": true,
          "description": "Primary key"
        },
        {
          "name": "@Name",
          "type": "varchar",
          "required": true,
          "maxLength": 20
        },
        {
          "name": "@LongName",
          "type": "varchar",
          "required": true,
          "maxLength": 50
        },
        {
          "name": "@AccountingCode",
          "type": "varchar",
          "required": false,
          "maxLength": 20
        },
        {
          "name": "@IsActive",
          "type": "bit",
          "required": true
        },
        {
          "name": "@EnablePortal",
          "type": "bit",
          "required": true
        },
        {
          "name": "@Address",
          "type": "varchar",
          "required": false,
          "maxLength": 80
        },
        {
          "name": "@City",
          "type": "varchar",
          "required": false,
          "maxLength": 30
        },
        {
          "name": "@State",
          "type": "char",
          "required": false,
          "maxLength": 2
        },
        {
          "name": "@Zip",
          "type": "varchar",
          "required": false,
          "maxLength": 10
        },
        {
          "name": "@PhoneNumber",
          "type": "varchar",
          "required": false,
          "maxLength": 10
        },
        {
          "name": "@FaxNumber",
          "type": "varchar",
          "required": false,
          "maxLength": 10
        },
        {
          "name": "@EmailAddress",
          "type": "varchar",
          "required": false,
          "maxLength": 100
        },
        {
          "name": "@IsBargeExEnabled",
          "type": "bit",
          "required": true
        },
        {
          "name": "@BargeExTradingPartnerNum",
          "type": "char",
          "required": false,
          "maxLength": 8
        },
        {
          "name": "@BargeExConfigID",
          "type": "int",
          "required": false
        },
        {
          "name": "@IsLiquidBroker",
          "type": "bit",
          "required": true
        },
        {
          "name": "@TermsCode",
          "type": "varchar",
          "required": false,
          "maxLength": 8
        },
        {
          "name": "@IsInternalVendor",
          "type": "bit",
          "required": true
        },
        {
          "name": "@IsTankerman",
          "type": "bit",
          "required": true
        }
      ]
    },
    {
      "name": "VendorDelete",
      "operation": "Delete",
      "note": "LEGACY: This stored procedure exists but should NOT be used. Entity has IsActive field, use SetActive pattern instead.",
      "parameters": [
        {
          "name": "@VendorID",
          "type": "int",
          "required": true
        }
      ]
    },
    {
      "name": "VendorsSelect",
      "operation": "GetAll",
      "parameters": [],
      "resultColumns": "Same as VendorSelect"
    }
  ],
  "sqlFiles": [
    {
      "fileName": "Vendor_Search.sql",
      "operation": "Search",
      "description": "Search vendors with multiple filter criteria for ListQuery",
      "modernPattern": "ListQuery with filterable/sortable fields"
    },
    {
      "fileName": "Vendor_GetById.sql",
      "operation": "GetById",
      "description": "Fetch single vendor by VendorID"
    },
    {
      "fileName": "Vendor_Insert.sql",
      "operation": "Insert",
      "description": "Create new vendor record, returns VendorID"
    },
    {
      "fileName": "Vendor_Update.sql",
      "operation": "Update",
      "description": "Update existing vendor record"
    },
    {
      "fileName": "Vendor_SetActive.sql",
      "operation": "SetActive",
      "description": "Soft delete vendor by setting IsActive = false (REPLACES VendorDelete)"
    },
    {
      "fileName": "Vendor_GetAll.sql",
      "operation": "GetAll",
      "description": "Get all vendors (may not be needed if Search handles this)"
    }
  ],
  "repositoryInterface": {
    "name": "IVendorRepository",
    "namespace": "Admin.Infrastructure.Abstractions",
    "location": "src/BargeOps.API/src/Admin.Infrastructure/Abstractions/IVendorRepository.cs",
    "methods": [
      {
        "name": "SearchAsync",
        "returnType": "Task<DataTableResponse<VendorListDto>>",
        "parameters": [
          "VendorSearchRequest request"
        ],
        "description": "Search vendors with filters and pagination"
      },
      {
        "name": "GetByIdAsync",
        "returnType": "Task<VendorDto>",
        "parameters": [
          "int vendorId"
        ],
        "description": "Get vendor by ID with related data"
      },
      {
        "name": "CreateAsync",
        "returnType": "Task<int>",
        "parameters": [
          "VendorDto vendor"
        ],
        "description": "Create new vendor, returns VendorID"
      },
      {
        "name": "UpdateAsync",
        "returnType": "Task",
        "parameters": [
          "VendorDto vendor"
        ],
        "description": "Update existing vendor"
      },
      {
        "name": "SetActiveAsync",
        "returnType": "Task",
        "parameters": [
          "int vendorId",
          "bool isActive"
        ],
        "description": "Soft delete/activate vendor via IsActive flag"
      }
    ]
  },
  "repositoryImplementation": {
    "name": "VendorRepository",
    "namespace": "Admin.Infrastructure.Repositories",
    "location": "src/BargeOps.API/src/Admin.Infrastructure/Repositories/VendorRepository.cs",
    "pattern": "Dapper with SqlText.GetSqlText() for embedded SQL resources"
  },
  "dtoStructure": {
    "namespace": "BargeOps.Shared.Dto",
    "location": "src/BargeOps.Shared/BargeOps.Shared/Dto/VendorDto.cs",
    "dtos": [
      {
        "name": "VendorDto",
        "description": "Full vendor detail DTO",
        "properties": [
          "int VendorID",
          "string Name",
          "string LongName",
          "string AccountingCode",
          "bool IsActive",
          "bool EnablePortal",
          "string Address",
          "string City",
          "string State",
          "string Zip",
          "string PhoneNumber",
          "string FaxNumber",
          "string EmailAddress",
          "bool IsBargeExEnabled",
          "string BargeExTradingPartnerNum",
          "string BargeExConfigID",
          "bool IsLiquidBroker",
          "string TermsCode",
          "bool IsInternalVendor",
          "bool IsTankerman",
          "List<VendorContactDto> VendorContacts"
        ]
      },
      {
        "name": "VendorListDto",
        "description": "Lightweight DTO for search results",
        "properties": [
          "int VendorID",
          "string Name",
          "string LongName",
          "string AccountingCode",
          "bool IsBargeExEnabled",
          "bool IsActive",
          "bool EnablePortal",
          "bool IsFuelSupplier",
          "bool IsBoatAssistSupplier",
          "bool IsLiquidBroker",
          "bool IsInternalVendor",
          "bool IsTankerman"
        ]
      },
      {
        "name": "VendorSearchRequest",
        "extends": "DataTableRequest",
        "properties": [
          "string Name",
          "string AccountingCode",
          "bool IsBargeExEnabledOnly",
          "bool IsActiveOnly",
          "bool EnablePortalOnly",
          "bool FuelSuppliersOnly",
          "bool IsLiquidBrokerOnly",
          "bool IsInternalVendorOnly",
          "bool IsTankermanOnly"
        ]
      }
    ]
  },
  "listQueryFields": {
    "filterable": [
      "Name",
      "LongName",
      "AccountingCode",
      "IsBargeExEnabled",
      "IsActive",
      "EnablePortal",
      "IsFuelSupplier",
      "IsBoatAssistSupplier",
      "IsLiquidBroker",
      "IsInternalVendor",
      "IsTankerman"
    ],
    "sortable": [
      "Name",
      "LongName",
      "AccountingCode",
      "IsActive"
    ],
    "defaultSort": "Name ASC"
  },
  "childCollections": [
    {
      "name": "VendorContacts",
      "loadingStrategy": "immediate",
      "description": "Loaded with parent via multiple result sets"
    },
    {
      "name": "VendorBusinessUnits",
      "loadingStrategy": "deferred",
      "description": "Loaded on-demand when accessed",
      "sqlFile": "VendorBusinessUnit_GetByVendorId.sql"
    },
    {
      "name": "VendorPortalGroups",
      "loadingStrategy": "deferred",
      "description": "Loaded on-demand when accessed",
      "sqlFile": "VendorPortalGroup_GetByVendorId.sql"
    }
  ],
  "businessRules": [
    {
      "rule": "Name is required",
      "field": "Name",
      "validation": "Required"
    },
    {
      "rule": "LongName is required",
      "field": "LongName",
      "validation": "Required"
    },
    {
      "rule": "BargeEx validation",
      "description": "If IsBargeExEnabled = true, then BargeExTradingPartnerNum and BargeExConfigID are required",
      "fields": [
        "IsBargeExEnabled",
        "BargeExTradingPartnerNum",
        "BargeExConfigID"
      ],
      "validation": "ConditionalRequired"
    },
    {
      "rule": "Default IsActive = true",
      "field": "IsActive",
      "validation": "DefaultValue"
    }
  ],
  "dataFormatting": [
    {
      "field": "PhoneNumber",
      "format": "Phone10",
      "description": "10-digit phone number formatting"
    },
    {
      "field": "FaxNumber",
      "format": "Phone10",
      "description": "10-digit fax number formatting"
    },
    {
      "field": "Zip",
      "format": "ZipCodeOptionalExtension",
      "description": "ZIP code with optional 4-digit extension"
    },
    {
      "field": "State",
      "format": "Char(2)",
      "description": "2-character state abbreviation"
    }
  ],
  "auditFields": {
    "tracked": true,
    "description": "Entity supports field-level auditing via AuditFieldEvent",
    "auditedFields": [
      "VendorID",
      "Name",
      "LongName",
      "AccountingCode",
      "IsActive",
      "EnablePortal",
      "Address",
      "City",
      "State",
      "Zip",
      "PhoneNumber",
      "FaxNumber",
      "EmailAddress",
      "IsBargeExEnabled",
      "BargeExTradingPartnerNum",
      "BargeExConfigID",
      "IsLiquidBroker",
      "TermsCode",
      "IsInternalVendor",
      "IsTankerman"
    ]
  },
  "modernizationNotes": {
    "softDelete": "CRITICAL: Entity uses IsActive for soft delete. DO NOT implement hard delete. Use SetActive.sql instead of Delete.sql.",
    "sqlResources": "All SQL queries must be embedded resources loaded via SqlText.GetSqlText()",
    "listQuery": "Implement ListQuery with [Filterable] and [Sortable] attributes on DTO properties",
    "childCollections": "VendorContacts loaded immediately, BusinessUnits and PortalGroups deferred",
    "validation": "BargeEx conditional validation must be implemented in business logic layer",
    "searchComplexity": "Search has 9 filter parameters - consider whether all are needed or if ListQuery can handle filtering"
  }
}
