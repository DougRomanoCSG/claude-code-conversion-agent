{
  "entity": "BargeSeries",
  "legacyForms": {
    "searchForm": "frmBargeSeriesSearch",
    "detailForm": "frmBargeSeriesDetail",
    "baseClasses": {
      "search": "frmBaseSearch",
      "detail": "frmBaseDetailEditList"
    }
  },
  "controlMappings": [
    {
      "legacyControl": "UltraTextEditor",
      "modernEquivalent": "Bootstrap Text Input",
      "html": "<input type=\"text\" class=\"form-control\" asp-for=\"PropertyName\" />",
      "accessibility": "Use asp-for tag helper to auto-generate id, name, and for attributes",
      "validation": "Use jquery.validate with asp-validation-for tag helper",
      "examples": [
        "txtBargeSeries",
        "txtName",
        "txtLength",
        "txtWidth",
        "txtDepth",
        "txtTonsPerInch",
        "txtDraftLightFeet",
        "txtDraftLightInches"
      ]
    },
    {
      "legacyControl": "UltraComboEditor / UltraCombo",
      "modernEquivalent": "Select2 Dropdown",
      "html": "<select class=\"form-select\" asp-for=\"PropertyName\" asp-items=\"Model.DropdownItems\" data-select2=\"true\"></select>",
      "javascript": "$('.form-select[data-select2]').select2({ placeholder: 'Select...', allowClear: true });",
      "accessibility": "Include aria-label and ensure proper label association",
      "serverSide": "Populate via ViewModel SelectListItem collections",
      "examples": [
        "cboCustomerID (Owner dropdown)",
        "cboHullType",
        "cboCoverType"
      ]
    },
    {
      "legacyControl": "UltraGrid",
      "modernEquivalent": "DataTables (Server-side)",
      "html": "<table id=\"bargeSeriesTable\" class=\"table table-striped table-bordered dt-responsive nowrap\" style=\"width:100%\"></table>",
      "javascript": {
        "initialization": "DataTables with server-side processing",
        "pattern": "See bargeSeriesSearch.js for full implementation",
        "features": [
          "Server-side processing",
          "State saving with localStorage",
          "Responsive design",
          "Column ordering",
          "Pagination",
          "Search/filter integration"
        ]
      },
      "examples": [
        "grdSearch (Search results grid)",
        "grdBargeSeriesDraft (Draft tonnage child grid)"
      ]
    },
    {
      "legacyControl": "UltraCheckEditor",
      "modernEquivalent": "Bootstrap Checkbox",
      "html": "<div class=\"form-check\">\n  <input type=\"checkbox\" class=\"form-check-input\" asp-for=\"PropertyName\" />\n  <label class=\"form-check-label\" asp-for=\"PropertyName\"></label>\n</div>",
      "accessibility": "Use form-check-input and form-check-label classes",
      "examples": [
        "chkActiveOnly (Search filter)",
        "chkIsActive (Detail form)"
      ]
    },
    {
      "legacyControl": "UltraPanel",
      "modernEquivalent": "Bootstrap Card",
      "html": "<div class=\"card\">\n  <div class=\"card-header\"><h5>Title</h5></div>\n  <div class=\"card-body\">Content</div>\n</div>",
      "styling": "Use Bootstrap card, card-header, card-body classes",
      "examples": [
        "pnlSearch",
        "pnlCriteria",
        "pnlDetailEdit",
        "pnlDetailEditList"
      ]
    },
    {
      "legacyControl": "UltraGroupBox",
      "modernEquivalent": "Bootstrap Card with Header",
      "html": "<div class=\"card\">\n  <div class=\"card-header\"><h5>Group Title</h5></div>\n  <div class=\"card-body\">Content</div>\n</div>",
      "styling": "Use Bootstrap card for grouping content",
      "examples": [
        "grpDetailEditList (Draft tonnage group)",
        "grpSubmitCancel"
      ]
    },
    {
      "legacyControl": "UltraButton",
      "modernEquivalent": "Bootstrap Button",
      "html": "<button type=\"button\" class=\"btn btn-primary\"><i class=\"fas fa-icon\"></i> Text</button>",
      "variants": [
        "btn-primary (Submit, Find)",
        "btn-secondary (Reset, Cancel)",
        "btn-success (New)",
        "btn-sm (Small buttons in grids)"
      ],
      "examples": [
        "btnFind",
        "btnReset",
        "btnSubmit",
        "btnCancel"
      ]
    },
    {
      "legacyControl": "UltraLabel",
      "modernEquivalent": "Bootstrap Label with asp-for",
      "html": "<label asp-for=\"PropertyName\" class=\"form-label\"></label>",
      "styling": "Use form-label class for form inputs",
      "accessibility": "asp-for auto-generates for attribute",
      "examples": [
        "lblBargeSeries",
        "lblCustomerID",
        "lblHullType",
        "lblCoverType",
        "lblExternalLength",
        "lblExternalWidth",
        "lblExternalDepth"
      ]
    },
    {
      "legacyControl": "UltraToolbarsManager / UltraToolbar",
      "modernEquivalent": "Bootstrap Button Group / Toolbar",
      "html": "<div class=\"btn-toolbar mb-2\" role=\"toolbar\">\n  <div class=\"btn-group\" role=\"group\">\n    <button type=\"button\" class=\"btn btn-secondary\"><i class=\"fas fa-paste\"></i> Paste</button>\n    <button type=\"button\" class=\"btn btn-secondary\"><i class=\"fas fa-file-export\"></i> Export</button>\n  </div>\n</div>",
      "javascript": "Wire up click handlers to custom functionality",
      "examples": [
        "Paste from Clipboard (Draft table)",
        "Export (Draft table)"
      ]
    },
    {
      "legacyControl": "UltraStatusBar",
      "modernEquivalent": "Bootstrap Alert or Footer",
      "html": "<div class=\"alert alert-info\" role=\"status\">Status message</div>",
      "alternative": "Use toast notifications for temporary messages",
      "examples": [
        "staStatus"
      ]
    }
  ],
  "formPatterns": {
    "searchForm": {
      "layout": "Bootstrap form with row/col grid system",
      "structure": {
        "header": "Card header with entity title",
        "searchCriteria": "Card body with form inputs in grid layout",
        "searchButtons": "Find and Reset buttons (right-aligned)",
        "resultsGrid": "DataTables grid below search criteria"
      },
      "htmlPattern": "<div class=\"card mb-3\">\n  <div class=\"card-header\"><h5>Search Criteria</h5></div>\n  <div class=\"card-body\">\n    <form id=\"searchForm\">\n      <div class=\"row mb-3\">\n        <div class=\"col-md-4\">...</div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <button type=\"button\" id=\"btnSearch\" class=\"btn btn-primary\">Find</button>\n          <button type=\"button\" id=\"btnReset\" class=\"btn btn-secondary\">Reset</button>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>"
    },
    "detailForm": {
      "layout": "Vertical sections with card grouping",
      "structure": {
        "header": "Form fields panel (top)",
        "childGrid": "Child entity grid with toolbar (middle, expandable)",
        "submitCancel": "Action buttons (bottom, right-aligned)"
      },
      "htmlPattern": "<div class=\"container-fluid\">\n  <!-- Main form fields -->\n  <div class=\"card mb-3\">\n    <div class=\"card-body\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">...</div>\n      </div>\n    </div>\n  </div>\n  <!-- Child grid section -->\n  <div class=\"card mb-3\">\n    <div class=\"card-header\"><h5>Draft Tonnage</h5></div>\n    <div class=\"card-body\">\n      <div class=\"btn-toolbar mb-2\">...</div>\n      <table id=\"draftGrid\" class=\"table\">...</table>\n    </div>\n  </div>\n  <!-- Action buttons -->\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <button type=\"submit\" class=\"btn btn-primary float-end\">Submit</button>\n      <button type=\"button\" class=\"btn btn-secondary float-end me-2\">Cancel</button>\n      <div class=\"form-check\">\n        <input type=\"checkbox\" class=\"form-check-input\" id=\"chkIsActive\" />\n        <label class=\"form-check-label\" for=\"chkIsActive\">Active</label>\n      </div>\n    </div>\n  </div>\n</div>"
    },
    "gridPattern": {
      "library": "DataTables",
      "serverSide": true,
      "features": [
        "Server-side processing",
        "Pagination",
        "Sorting",
        "Filtering",
        "State saving (localStorage)",
        "Responsive design",
        "Column visibility",
        "Export functionality"
      ],
      "jsPattern": "$(document).ready(function() {\n  var dataTable = $('#bargeSeriesTable').DataTable({\n    processing: true,\n    serverSide: true,\n    stateSave: true,\n    responsive: true,\n    ajax: {\n      url: '/BargeSeriesSearch/BargeSeriesTable',\n      type: 'POST',\n      data: function(d) {\n        d.seriesName = $('#SeriesName').val();\n        d.ownerId = $('#OwnerId').val();\n        d.hullType = $('#HullType').val();\n        d.coverType = $('#CoverType').val();\n        d.activeOnly = $('#ActiveOnly').is(':checked');\n      }\n    },\n    columns: [\n      { data: null, render: function(data, type, row) {\n        return '<a href=\"/BargeSeriesSearch/Edit/' + row.id + '\" class=\"btn btn-sm btn-primary\"><i class=\"fas fa-edit\"></i></a>';\n      }},\n      { data: 'seriesName' },\n      { data: 'owner' },\n      { data: 'hullType' },\n      { data: 'coverType' },\n      { data: 'isActive', render: function(data) {\n        return '<input type=\"checkbox\" ' + (data ? 'checked' : '') + ' disabled />';\n      }}\n    ]\n  });\n});"
    },
    "childGridPattern": {
      "entity": "BargeSeriesDraft",
      "description": "Draft tonnage table with paste-from-clipboard functionality",
      "features": [
        "Inline editing",
        "Paste from Excel/clipboard",
        "Export to Excel",
        "Add/Modify/Remove rows"
      ],
      "toolbar": {
        "buttons": [
          {
            "name": "Paste",
            "icon": "fas fa-paste",
            "permission": "BargeSeriesModify",
            "action": "Paste clipboard data into grid"
          },
          {
            "name": "Export",
            "icon": "fas fa-file-export",
            "permission": "BargeSeriesView",
            "action": "Export grid to Excel"
          }
        ]
      },
      "htmlPattern": "<div class=\"btn-toolbar mb-2\" role=\"toolbar\">\n  <div class=\"btn-group\" role=\"group\">\n    <button type=\"button\" id=\"btnPaste\" class=\"btn btn-secondary\"><i class=\"fas fa-paste\"></i> Paste from Clipboard</button>\n    <button type=\"button\" id=\"btnExport\" class=\"btn btn-secondary\"><i class=\"fas fa-file-export\"></i> Export</button>\n  </div>\n</div>\n<table id=\"draftGrid\" class=\"table table-striped table-bordered\">\n  <thead>\n    <tr>\n      <th>Draft (ft)</th>\n      <th>Tonnage</th>\n    </tr>\n  </thead>\n  <tbody></tbody>\n</table>"
    },
    "validationPattern": {
      "library": "jquery.validate + unobtrusive validation",
      "approach": "Server-side validation with client-side display",
      "htmlPattern": "<span asp-validation-for=\"PropertyName\" class=\"text-danger\"></span>",
      "jsInitialization": "$.validator.unobtrusive.parse('#formId');"
    }
  },
  "searchFormControls": {
    "txtBargeSeries": {
      "label": "Series:",
      "type": "text",
      "modern": "<input type=\"text\" class=\"form-control\" asp-for=\"SeriesName\" placeholder=\"Enter series name...\" />"
    },
    "cboCustomerID": {
      "label": "Owner:",
      "type": "dropdown",
      "modern": "<select asp-for=\"OwnerId\" asp-items=\"Model.Owners\" class=\"form-select\" data-select2=\"true\"><option value=\"\">-- All Owners --</option></select>"
    },
    "cboHullType": {
      "label": "Hull type:",
      "type": "dropdown",
      "modern": "<select asp-for=\"HullType\" asp-items=\"Model.HullTypes\" class=\"form-select\" data-select2=\"true\"><option value=\"\">-- All Hull Types --</option></select>"
    },
    "cboCoverType": {
      "label": "Cover type:",
      "type": "dropdown",
      "modern": "<select asp-for=\"CoverType\" asp-items=\"Model.CoverTypes\" class=\"form-select\" data-select2=\"true\"><option value=\"\">-- All Cover Types --</option></select>"
    },
    "chkActiveOnly": {
      "label": "Active only",
      "type": "checkbox",
      "defaultChecked": true,
      "modern": "<div class=\"form-check form-check-inline\">\n  <input asp-for=\"ActiveOnly\" class=\"form-check-input\" />\n  <label asp-for=\"ActiveOnly\" class=\"form-check-label\"></label>\n</div>"
    },
    "btnFind": {
      "type": "button",
      "modern": "<button type=\"button\" id=\"btnSearch\" class=\"btn btn-primary\"><i class=\"fas fa-search\"></i> Find</button>"
    },
    "btnReset": {
      "type": "button",
      "modern": "<button type=\"button\" id=\"btnReset\" class=\"btn btn-secondary\"><i class=\"fas fa-undo\"></i> Reset</button>"
    }
  },
  "detailFormControls": {
    "txtName": {
      "label": "Series:",
      "type": "text",
      "required": true,
      "modern": "<input type=\"text\" class=\"form-control\" asp-for=\"Name\" />\n<span asp-validation-for=\"Name\" class=\"text-danger\"></span>"
    },
    "cboCustomerID": {
      "label": "Owner:",
      "type": "dropdown",
      "modern": "<select asp-for=\"OwnerId\" asp-items=\"Model.Owners\" class=\"form-select\" data-select2=\"true\"></select>"
    },
    "cboHullType": {
      "label": "Hull type:",
      "type": "dropdown",
      "modern": "<select asp-for=\"HullType\" asp-items=\"Model.HullTypes\" class=\"form-select\" data-select2=\"true\"></select>"
    },
    "cboCoverType": {
      "label": "Cover type:",
      "type": "dropdown",
      "modern": "<select asp-for=\"CoverType\" asp-items=\"Model.CoverTypes\" class=\"form-select\" data-select2=\"true\"></select>"
    },
    "txtLength": {
      "label": "Length:",
      "type": "text",
      "dataType": "decimal",
      "modern": "<input type=\"text\" class=\"form-control\" asp-for=\"ExternalLength\" />"
    },
    "txtWidth": {
      "label": "Width:",
      "type": "text",
      "dataType": "decimal",
      "modern": "<input type=\"text\" class=\"form-control\" asp-for=\"ExternalWidth\" />"
    },
    "txtDepth": {
      "label": "Depth:",
      "type": "text",
      "dataType": "decimal",
      "modern": "<input type=\"text\" class=\"form-control\" asp-for=\"ExternalDepth\" />"
    },
    "txtTonsPerInch": {
      "label": "Tons/inch:",
      "type": "text",
      "dataType": "decimal",
      "modern": "<input type=\"text\" class=\"form-control\" asp-for=\"TonsPerInch\" />"
    },
    "txtDraftLightFeet": {
      "label": "Light draft (ft/in):",
      "type": "text",
      "dataType": "integer",
      "grouped": "with txtDraftLightInches",
      "modern": "<div class=\"row\">\n  <div class=\"col-md-6\">\n    <label class=\"form-label\">Light Draft (ft)</label>\n    <input type=\"text\" class=\"form-control\" asp-for=\"DraftLightFeet\" />\n  </div>\n  <div class=\"col-md-6\">\n    <label class=\"form-label\">Light Draft (in)</label>\n    <input type=\"text\" class=\"form-control\" asp-for=\"DraftLightInches\" />\n  </div>\n</div>"
    },
    "txtDraftLightInches": {
      "label": "Light draft (in):",
      "type": "text",
      "dataType": "integer",
      "range": "0-11",
      "grouped": "with txtDraftLightFeet",
      "modern": "See txtDraftLightFeet for combined pattern"
    },
    "chkIsActive": {
      "label": "Active",
      "type": "checkbox",
      "defaultChecked": true,
      "modern": "<div class=\"form-check\">\n  <input asp-for=\"IsActive\" class=\"form-check-input\" />\n  <label asp-for=\"IsActive\" class=\"form-check-label\"></label>\n</div>"
    },
    "btnSubmit": {
      "type": "submit",
      "modern": "<button type=\"submit\" class=\"btn btn-primary float-end\"><i class=\"fas fa-save\"></i> Submit</button>"
    },
    "btnCancel": {
      "type": "button",
      "modern": "<button type=\"button\" class=\"btn btn-secondary float-end me-2\" onclick=\"window.location.href='@Url.Action(\\\"Index\\\", \\\"BargeSeriesSearch\\\")';\"><i class=\"fas fa-times\"></i> Cancel</button>"
    }
  },
  "javascriptFiles": {
    "search": {
      "filename": "bargeSeriesSearch.js",
      "location": "wwwroot/js/",
      "responsibilities": [
        "Initialize DataTables with server-side processing",
        "Wire up search button click handler",
        "Wire up reset button click handler",
        "Handle Enter key in search fields",
        "Auto-search when dropdowns change",
        "State management with localStorage"
      ]
    },
    "detail": {
      "filename": "bargeSeriesEdit.js",
      "location": "wwwroot/js/",
      "responsibilities": [
        "Initialize Select2 dropdowns",
        "Initialize draft grid (inline editing or DataTables)",
        "Handle paste-from-clipboard functionality",
        "Handle export-to-Excel functionality",
        "Form validation",
        "AJAX form submission (if needed)"
      ]
    }
  },
  "viewModels": {
    "search": {
      "name": "BargeSeriesSearchViewModel",
      "namespace": "BargeOpsAdmin.ViewModels",
      "properties": [
        "SeriesName (string)",
        "OwnerId (string)",
        "HullType (string)",
        "CoverType (string)",
        "ActiveOnly (bool, default: true)",
        "Owners (SelectList)",
        "HullTypes (SelectList)",
        "CoverTypes (SelectList)",
        "CanModify (bool, permission-based)"
      ]
    },
    "detail": {
      "name": "BargeSeriesDetailViewModel",
      "namespace": "BargeOpsAdmin.ViewModels",
      "properties": [
        "BargeSeriesId (int)",
        "Name (string, required)",
        "OwnerId (string)",
        "HullType (string)",
        "CoverType (string)",
        "ExternalLength (decimal)",
        "ExternalWidth (decimal)",
        "ExternalDepth (decimal)",
        "TonsPerInch (decimal)",
        "DraftLightFeet (int)",
        "DraftLightInches (int, range: 0-11)",
        "IsActive (bool, default: true)",
        "Owners (SelectList)",
        "HullTypes (SelectList)",
        "CoverTypes (SelectList)",
        "Drafts (List<BargeSeriesDraftViewModel>)",
        "CanModify (bool, permission-based)",
        "IsReadOnly (bool, permission-based)"
      ]
    },
    "draftChild": {
      "name": "BargeSeriesDraftViewModel",
      "namespace": "BargeOpsAdmin.ViewModels",
      "properties": [
        "BargeSeriesDraftId (int)",
        "BargeSeriesId (int, FK)",
        "DraftFeet (decimal)",
        "Tonnage (decimal)"
      ]
    }
  },
  "views": {
    "search": {
      "main": "Views/BargeSeriesSearch/Index.cshtml",
      "partials": [
        "_Search.cshtml (search criteria card)",
        "_SearchResults.cshtml (DataTables grid)"
      ]
    },
    "detail": {
      "main": "Views/BargeSeriesSearch/Edit.cshtml",
      "alternative": "Views/BargeSeriesSearch/Create.cshtml"
    }
  },
  "controllers": {
    "ui": {
      "name": "BargeSeriesSearchController",
      "namespace": "BargeOpsAdmin.Controllers",
      "baseClass": "AppController",
      "actions": [
        "Index() - Search page",
        "BargeSeriesTable() - DataTables server-side endpoint",
        "Create() - Create new series",
        "Edit(int id) - Edit existing series",
        "Delete(int id) - Delete series",
        "Export() - Export to Excel"
      ]
    }
  },
  "cssFiles": {
    "custom": {
      "filename": "bargeSeriesSearch.css",
      "location": "wwwroot/css/",
      "purpose": "Custom styling overrides for BargeSeries screens"
    }
  },
  "dependencies": {
    "clientSide": [
      "Bootstrap 5",
      "DataTables (with Bootstrap 5 styling)",
      "Select2 (for enhanced dropdowns)",
      "jQuery",
      "jQuery Validate",
      "jQuery Unobtrusive Validation",
      "Font Awesome (for icons)"
    ],
    "serverSide": [
      "ASP.NET Core 8 MVC",
      "FluentValidation (for ViewModel validation)",
      "AutoMapper (for DTO mapping)",
      "Entity Framework Core"
    ]
  },
  "specialFeatures": {
    "draftTable": {
      "description": "Child grid for draft tonnage data with paste-from-clipboard",
      "implementation": "DataTables with inline editing OR editable grid library",
      "pasteFeature": {
        "description": "Users can paste tabular data from Excel/clipboard into draft grid",
        "javascript": "Use Clipboard API or custom paste handler",
        "validation": "Validate pasted data format and values before inserting"
      },
      "exportFeature": {
        "description": "Export draft table to Excel",
        "implementation": "Use DataTables buttons extension or server-side export"
      }
    }
  },
  "accessibility": {
    "standards": "WCAG 2.1 Level AA",
    "requirements": [
      "All form inputs must have associated labels (use asp-for)",
      "All interactive elements must be keyboard accessible",
      "Use aria-label for icon-only buttons",
      "Use aria-required for required fields",
      "Ensure color contrast meets standards",
      "Provide focus indicators",
      "Use semantic HTML5 elements"
    ]
  },
  "responsiveDesign": {
    "approach": "Mobile-first with Bootstrap 5 grid system",
    "breakpoints": [
      "xs: <576px (mobile)",
      "sm: ≥576px (tablet portrait)",
      "md: ≥768px (tablet landscape)",
      "lg: ≥992px (desktop)",
      "xl: ≥1200px (large desktop)"
    ],
    "dataTablesResponsive": "Use responsive extension for grid column collapsing on small screens"
  },
  "commonMistakes": {
    "avoid": [
      "Using inline styles instead of Bootstrap classes",
      "Not using asp-for tag helpers for form inputs",
      "Forgetting to initialize Select2 on dropdowns",
      "Not implementing server-side DataTables processing",
      "Hardcoding URLs instead of using Url.Action()",
      "Not handling validation errors properly",
      "Missing aria attributes for accessibility"
    ]
  },
  "implementationNotes": [
    "Use Bootstrap 5 card components instead of UltraPanel/UltraGroupBox",
    "Replace UltraGrid with DataTables configured for server-side processing",
    "Use Select2 for all dropdown controls (UltraCombo)",
    "Implement paste-from-clipboard for draft table using Clipboard API",
    "Use Font Awesome icons for all buttons",
    "Ensure all forms use asp-for tag helpers for proper model binding",
    "Implement jquery.validate for client-side validation",
    "Use ViewModels for all data passing (no ViewBag/ViewData)",
    "Store DataTables state in localStorage with versioned keys",
    "Implement proper permission checks in controllers and views"
  ],
  "migrationPriority": "Medium",
  "complexity": "Medium",
  "estimatedEffort": "3-4 days",
  "dependencies": [
    "Customer/Owner data for dropdowns",
    "HullType lookup data",
    "CoverType lookup data",
    "BargeSeriesDraft child entity implementation"
  ]
}
