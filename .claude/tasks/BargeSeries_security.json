{
  "entity": "BargeSeries",
  "legacy": {
    "searchForm": "frmBargeSeriesSearch",
    "detailForm": "frmBargeSeriesDetail",
    "subsystem": "frmBargeSeriesSearch",
    "securityButtons": {
      "search": [
        {
          "button": "btnFind",
          "type": "Open",
          "legacyPermission": "CanRead",
          "description": "Search for barge series records"
        },
        {
          "button": "btnReset",
          "type": "Open",
          "legacyPermission": "CanRead",
          "description": "Reset search criteria"
        }
      ],
      "detail": [
        {
          "button": "btnSubmit",
          "type": "Submit",
          "legacyPermission": "CanCreate/CanUpdate",
          "description": "Save barge series changes"
        },
        {
          "button": "btnCancel",
          "type": "Cancel",
          "legacyPermission": "CanRead",
          "description": "Cancel editing"
        }
      ],
      "toolbar": [
        {
          "button": "Paste",
          "type": "Action",
          "legacyPermission": "CanUpdate",
          "description": "Paste draft table data from clipboard"
        },
        {
          "button": "Export",
          "type": "Open",
          "legacyPermission": "CanRead",
          "description": "Export draft table data to Excel"
        }
      ]
    },
    "crudOperations": {
      "create": {
        "method": "ItemAdd",
        "businessLogicCall": "BargeSeries.NewBargeSeries()",
        "requiredPermission": "CanCreate"
      },
      "read": {
        "method": "ItemModify",
        "businessLogicCall": "BargeSeries.GetBargeSeries(id)",
        "requiredPermission": "CanRead"
      },
      "update": {
        "method": "btnSubmit_Click",
        "businessLogicCall": "BargeSeries.ApplyEdit()",
        "requiredPermission": "CanUpdate"
      },
      "delete": {
        "method": "ItemRemove",
        "businessLogicCall": "BargeSeries.DeleteBargeSeries(id)",
        "requiredPermission": "CanDelete"
      },
      "search": {
        "method": "RefreshList",
        "businessLogicCall": "BargeSeriesSearch.GetList(...)",
        "requiredPermission": "CanRead"
      }
    }
  },
  "modern": {
    "api": {
      "authentication": "ApiKey",
      "attributePattern": "[ApiKey]",
      "endpoints": [
        {
          "method": "GET",
          "route": "api/BargeSeries",
          "action": "GetList",
          "requiredAuth": "ApiKey",
          "futurePermission": "BargeSeriesView",
          "description": "Search barge series by criteria"
        },
        {
          "method": "GET",
          "route": "api/BargeSeries/{id}",
          "action": "GetById",
          "requiredAuth": "ApiKey",
          "futurePermission": "BargeSeriesView",
          "description": "Get barge series by ID with draft table"
        },
        {
          "method": "POST",
          "route": "api/BargeSeries",
          "action": "Create",
          "requiredAuth": "ApiKey",
          "futurePermission": "BargeSeriesModify",
          "description": "Create new barge series with draft table"
        },
        {
          "method": "PUT",
          "route": "api/BargeSeries/{id}",
          "action": "Update",
          "requiredAuth": "ApiKey",
          "futurePermission": "BargeSeriesModify",
          "description": "Update existing barge series and draft table"
        },
        {
          "method": "DELETE",
          "route": "api/BargeSeries/{id}",
          "action": "Delete",
          "requiredAuth": "ApiKey",
          "futurePermission": "BargeSeriesModify",
          "description": "Delete barge series and related draft records"
        },
        {
          "method": "PATCH",
          "route": "api/BargeSeries/{id}/active",
          "action": "SetActive",
          "requiredAuth": "ApiKey",
          "futurePermission": "BargeSeriesModify",
          "description": "Activate or deactivate barge series"
        }
      ]
    },
    "ui": {
      "authentication": "OIDC",
      "developmentAuth": "DevelopmentAutoSignInMiddleware",
      "attributePattern": "[Authorize]",
      "permissions": [
        {
          "name": "BargeSeriesView",
          "enumValue": "AuthPermissions.BargeSeriesView",
          "description": "View barge series and search records",
          "granularity": "ReadOnly",
          "requiredFor": [
            "Index",
            "Search",
            "Details"
          ],
          "uiElements": [
            "Search form access",
            "Grid display",
            "Find button",
            "Reset button",
            "Export toolbar button",
            "Detail form view (read-only)"
          ]
        },
        {
          "name": "BargeSeriesModify",
          "enumValue": "AuthPermissions.BargeSeriesModify",
          "description": "Create, update, delete, and manage barge series",
          "granularity": "Modify",
          "requiredFor": [
            "Create",
            "Edit",
            "Delete",
            "SetActive"
          ],
          "uiElements": [
            "New button in main grid",
            "Edit button in main grid",
            "Delete button in main grid",
            "Submit button in detail form",
            "All input fields enabled",
            "Paste toolbar button",
            "Draft table editing",
            "IsActive checkbox"
          ]
        }
      ],
      "buttonSecurity": [
        {
          "button": "btnNew",
          "location": "Main search toolbar",
          "requiredPermission": "BargeSeriesModify",
          "hideWhenNoPermission": true
        },
        {
          "button": "btnEdit",
          "location": "Main search toolbar",
          "requiredPermission": "BargeSeriesModify",
          "hideWhenNoPermission": true
        },
        {
          "button": "btnDelete",
          "location": "Main search toolbar",
          "requiredPermission": "BargeSeriesModify",
          "hideWhenNoPermission": true
        },
        {
          "button": "btnFind",
          "location": "Search form",
          "requiredPermission": "BargeSeriesView",
          "hideWhenNoPermission": false
        },
        {
          "button": "btnReset",
          "location": "Search form",
          "requiredPermission": "BargeSeriesView",
          "hideWhenNoPermission": false
        },
        {
          "button": "btnSubmit",
          "location": "Detail form",
          "requiredPermission": "BargeSeriesModify",
          "hideWhenNoPermission": true
        },
        {
          "button": "btnCancel",
          "location": "Detail form",
          "requiredPermission": "BargeSeriesView",
          "hideWhenNoPermission": false
        },
        {
          "button": "toolbarPaste",
          "location": "Detail form toolbar",
          "requiredPermission": "BargeSeriesModify",
          "hideWhenNoPermission": true
        },
        {
          "button": "toolbarExport",
          "location": "Detail form toolbar",
          "requiredPermission": "BargeSeriesView",
          "hideWhenNoPermission": false
        }
      ]
    },
    "permissionEnum": {
      "file": "Enums/AuthPermissions.cs",
      "entries": [
        {
          "name": "BargeSeriesView",
          "value": "auto-assigned",
          "description": "View barge series and search records"
        },
        {
          "name": "BargeSeriesModify",
          "value": "auto-assigned",
          "description": "Create, update, delete, and manage barge series"
        }
      ]
    }
  },
  "implementation": {
    "controllers": [
      {
        "name": "BargeSeriesController",
        "type": "API",
        "authentication": "[ApiKey]",
        "baseClass": "ApiControllerBase",
        "actions": [
          "GetList",
          "GetById",
          "Create",
          "Update",
          "Delete",
          "SetActive"
        ]
      },
      {
        "name": "BargeSeriesSearchController",
        "type": "UI",
        "authentication": "[Authorize]",
        "baseClass": "AppController",
        "actions": [
          "Index",
          "Search"
        ],
        "permissions": [
          {
            "action": "Index",
            "policy": "BargeSeriesView"
          },
          {
            "action": "Search",
            "policy": "BargeSeriesView"
          }
        ]
      },
      {
        "name": "BargeSeriesDetailController",
        "type": "UI",
        "authentication": "[Authorize]",
        "baseClass": "AppController",
        "actions": [
          "Create",
          "Edit",
          "Delete",
          "SetActive",
          "Details"
        ],
        "permissions": [
          {
            "action": "Details",
            "policy": "BargeSeriesView"
          },
          {
            "action": "Create",
            "policy": "BargeSeriesModify"
          },
          {
            "action": "Edit",
            "policy": "BargeSeriesModify"
          },
          {
            "action": "Delete",
            "policy": "BargeSeriesModify"
          },
          {
            "action": "SetActive",
            "policy": "BargeSeriesModify"
          }
        ]
      }
    ],
    "viewModels": [
      {
        "name": "BargeSeriesSearchViewModel",
        "permissions": [
          {
            "property": "CanModify",
            "permission": "BargeSeriesModify",
            "description": "Controls visibility of New, Edit, Delete buttons"
          }
        ]
      },
      {
        "name": "BargeSeriesDetailViewModel",
        "permissions": [
          {
            "property": "CanModify",
            "permission": "BargeSeriesModify",
            "description": "Controls edit mode and submit button visibility"
          },
          {
            "property": "IsReadOnly",
            "permission": "!BargeSeriesModify",
            "description": "Disables all input fields when user lacks modify permission"
          }
        ]
      }
    ]
  },
  "specialFeatures": {
    "draftTable": {
      "description": "Barge series includes child draft table with paste-from-clipboard functionality",
      "securityNotes": "Paste functionality requires BargeSeriesModify permission",
      "childEntity": "BargeSeriesDraft",
      "operations": [
        {
          "operation": "View draft table",
          "permission": "BargeSeriesView"
        },
        {
          "operation": "Edit draft cells",
          "permission": "BargeSeriesModify"
        },
        {
          "operation": "Paste from clipboard",
          "permission": "BargeSeriesModify"
        },
        {
          "operation": "Export to Excel",
          "permission": "BargeSeriesView"
        }
      ]
    }
  },
  "notes": [
    "BargeSeries uses SubSystem.frmBargeSeriesSearch for both search and detail forms",
    "Delete operation is a hard delete (DeleteBargeSeries), not a soft delete",
    "IsActive field allows soft deactivation separate from hard delete",
    "Search form implements IBaseSearch interface with standard CRUD operations",
    "Detail form implements IBaseDetailEdit interface",
    "Draft table (BargeSeriesDrafts) is a child entity managed through parent form",
    "Paste functionality allows bulk import of draft table data from clipboard",
    "Export functionality uses Main.ExportGrid for Excel export",
    "Both API and UI require authentication, but use different methods (ApiKey vs OIDC)",
    "CSG Authorization framework will be implemented in the future for fine-grained permission control"
  ]
}
